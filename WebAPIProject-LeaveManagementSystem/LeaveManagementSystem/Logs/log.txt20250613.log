2025-06-13 07:46:01,531 [.NET Signal Handler] INFO  Microsoft.Hosting.Lifetime - Application is shutting down...
2025-06-13 07:53:30,136 [1] WARN  Microsoft.EntityFrameworkCore.Model.Validation - Entity 'LeaveType' has a global query filter defined and is the required end of a relationship with the entity 'LeaveBalance'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-06-13 07:53:30,395 [1] INFO  Microsoft.Hosting.Lifetime - Now listening on: http://localhost:5000
2025-06-13 07:53:30,396 [1] INFO  Microsoft.Hosting.Lifetime - Application started. Press Ctrl+C to shut down.
2025-06-13 07:53:30,396 [1] INFO  Microsoft.Hosting.Lifetime - Hosting environment: Development
2025-06-13 07:53:30,396 [1] INFO  Microsoft.Hosting.Lifetime - Content root path: /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem
2025-06-13 07:53:30,464 [13] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."DeletedAt", l."EndDate", l."IsDeleted", l."LeaveTypeId", l."Reason", l."ReviewedById", l."StartDate", l."Status", l."UpdatedAt", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy", t1."Id", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Email", t1."Gender", t1."IsActive", t1."IsDeleted", t1."LastLoginAt", t1."PasswordHash", t1."Role", t1."Username", t2."Id", t2."DeletedAt", t2."FileContent", t2."FileName", t2."IsDeleted", t2."LeaveRequestId", t2."UploadedAt"
FROM "LeaveRequests" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
LEFT JOIN (
    SELECT u0."Id", u0."CreatedAt", u0."CreatedBy", u0."DeletedAt", u0."Email", u0."Gender", u0."IsActive", u0."IsDeleted", u0."LastLoginAt", u0."PasswordHash", u0."Role", u0."Username"
    FROM "Users" AS u0
    WHERE NOT (u0."IsDeleted")
) AS t1 ON l."ReviewedById" = t1."Id"
LEFT JOIN (
    SELECT l1."Id", l1."DeletedAt", l1."FileContent", l1."FileName", l1."IsDeleted", l1."LeaveRequestId", l1."UploadedAt"
    FROM "LeaveAttachments" AS l1
    WHERE NOT (l1."IsDeleted")
) AS t2 ON l."Id" = t2."LeaveRequestId"
WHERE NOT (l."IsDeleted")
ORDER BY l."Id", t."Id", t0."Id", t1."Id"
2025-06-13 07:55:59,228 [15] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:25:59.2278210Z, Method: POST, Path: /api/v1/auth/login, User: Anonymous
2025-06-13 07:55:59,291 [13] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
FROM "Users" AS u
WHERE NOT (u."IsDeleted")
2025-06-13 07:55:59,539 [13] INFO  LeaveManagementSystem.Services.AuthenticationService - User joeytrib@example.com logged in successfully
2025-06-13 07:55:59,542 [13] INFO  LeaveManagementSystem.Controllers.AuthenticationController - User joeytrib@example.com logged in successfully.
2025-06-13 07:56:45,888 [15] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:26:45.8888130Z, Method: GET, Path: /api/LeaveBalance/user/0b23eda3-d5c7-40a2-9049-557e40524a4d, User: Joey
2025-06-13 07:56:47,922 [15] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:26:47.9222190Z, Method: GET, Path: /api/LeaveBalance/user/0b23eda3-d5c7-40a2-9049-557e40524a4d, User: Joey
2025-06-13 07:57:04,764 [17] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:27:04.7646480Z, Method: GET, Path: /api/LeaveBalance/user/0b23eda3-d5c7-40a2-9049-557e40524a4d, User: Joey
2025-06-13 07:57:05,519 [17] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:27:05.5197690Z, Method: GET, Path: /api/LeaveBalance/user/0b23eda3-d5c7-40a2-9049-557e40524a4d, User: Joey
2025-06-13 07:57:07,106 [15] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:27:07.1060110Z, Method: GET, Path: /api/LeaveBalance/user/0b23eda3-d5c7-40a2-9049-557e40524a4d, User: Joey
2025-06-13 07:57:39,819 [14] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:27:39.8198940Z, Method: GET, Path: /api/LeaveBalance/user/0b23eda3-d5c7-40a2-9049-557e40524a4d, User: Joey
2025-06-13 07:58:03,559 [17] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:28:03.5595720Z, Method: GET, Path: /api/v1/users, User: Anonymous
2025-06-13 07:58:03,572 [17] INFO  LeaveManagementSystem.Controllers.UsersController - Fetching all users with pagination parameters.
2025-06-13 07:58:03,604 [18] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
FROM "Users" AS u
WHERE NOT (u."IsDeleted")
2025-06-13 07:58:20,446 [15] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:28:20.4465660Z, Method: GET, Path: /api/LeaveBalance/user/7f1ffd9c-9e10-4b8c-82df-696060387368, User: Joey
2025-06-13 07:58:21,723 [15] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:28:21.7231760Z, Method: GET, Path: /api/LeaveBalance/user/7f1ffd9c-9e10-4b8c-82df-696060387368, User: Joey
2025-06-13 07:58:22,757 [15] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:28:22.7573030Z, Method: GET, Path: /api/LeaveBalance/user/7f1ffd9c-9e10-4b8c-82df-696060387368, User: Joey
2025-06-13 07:58:23,688 [14] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:28:23.6884590Z, Method: GET, Path: /api/LeaveBalance/user/7f1ffd9c-9e10-4b8c-82df-696060387368, User: Joey
2025-06-13 07:58:24,838 [15] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:28:24.8380720Z, Method: GET, Path: /api/LeaveBalance/user/7f1ffd9c-9e10-4b8c-82df-696060387368, User: Joey
2025-06-13 07:58:25,911 [15] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:28:25.9118280Z, Method: GET, Path: /api/LeaveBalance/user/7f1ffd9c-9e10-4b8c-82df-696060387368, User: Joey
2025-06-13 07:58:29,065 [14] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:28:29.0658020Z, Method: GET, Path: /api/LeaveBalance/user/7f1ffd9c-9e10-4b8c-82df-696060387368, User: Joey
2025-06-13 07:58:48,442 [14] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:28:48.4427820Z, Method: GET, Path: /api/LeaveBalance/user/%7B7f1ffd9c-9e10-4b8c-82df-696060387368%7D/leaveType/%7BleaveTypeId%7D, User: Anonymous
2025-06-13 07:59:19,398 [15] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:29:19.3987490Z, Method: GET, Path: /api/Leave-balance/user/7f1ffd9c-9e10-4b8c-82df-696060387368, User: Joey
2025-06-13 07:59:20,616 [17] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:29:20.6162570Z, Method: GET, Path: /api/Leave-balance/user/7f1ffd9c-9e10-4b8c-82df-696060387368, User: Joey
2025-06-13 08:00:01,513 [19] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:30:01.5138680Z, Method: POST, Path: /api/v1/auth/login, User: Anonymous
2025-06-13 08:00:01,530 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
FROM "Users" AS u
WHERE NOT (u."IsDeleted")
2025-06-13 08:00:01,701 [15] INFO  LeaveManagementSystem.Services.AuthenticationService - User chandler@example.com logged in successfully
2025-06-13 08:00:01,702 [15] INFO  LeaveManagementSystem.Controllers.AuthenticationController - User chandler@example.com logged in successfully.
2025-06-13 08:00:17,462 [3] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:30:17.4629060Z, Method: GET, Path: /api/v1/leave-balance/user/7f1ffd9c-9e10-4b8c-82df-696060387368, User: Chandler
2025-06-13 08:00:17,469 [3] INFO  LeaveManagementSystem.Controllers.LeaveBalanceController - Fetching leave balances for user ID: 7f1ffd9c-9e10-4b8c-82df-696060387368
2025-06-13 08:00:17,511 [3] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (10ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."LeaveTypeId", t0."TotalLeaves", t0."UsedLeaves", t0."UserId", t0."Id0", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted") AND u."Id" = @__key_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t1."Id" AS "Id0", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Description", t1."IsDeleted", t1."Name", t1."StandardLeaveCount", t1."UpdatedAt", t1."UpdatedBy"
    FROM "LeaveBalances" AS l
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t1 ON l."LeaveTypeId" = t1."Id"
) AS t0 ON t."Id" = t0."UserId"
ORDER BY t."Id", t0."Id"
2025-06-13 08:00:41,686 [19] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:30:41.6861390Z, Method: GET, Path: /api/v1/leave-balance/user/7f1ffd9c-9e10-4b8c-82df-696060387368, User: Joey
2025-06-13 08:00:41,687 [19] INFO  LeaveManagementSystem.Controllers.LeaveBalanceController - Fetching leave balances for user ID: 7f1ffd9c-9e10-4b8c-82df-696060387368
2025-06-13 08:00:41,693 [19] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."LeaveTypeId", t0."TotalLeaves", t0."UsedLeaves", t0."UserId", t0."Id0", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted") AND u."Id" = @__key_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t1."Id" AS "Id0", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Description", t1."IsDeleted", t1."Name", t1."StandardLeaveCount", t1."UpdatedAt", t1."UpdatedBy"
    FROM "LeaveBalances" AS l
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t1 ON l."LeaveTypeId" = t1."Id"
) AS t0 ON t."Id" = t0."UserId"
ORDER BY t."Id", t0."Id"
2025-06-13 08:02:12,910 [15] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:32:12.9106120Z, Method: GET, Path: /api/v1/leavetypes, User: Anonymous
2025-06-13 08:02:12,917 [15] INFO  LeaveManagementSystem.Controllers.LeaveTypeController - Fetching all leave types with pagination.
2025-06-13 08:02:12,925 [19] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."CreatedBy", l."DeletedAt", l."Description", l."IsDeleted", l."Name", l."StandardLeaveCount", l."UpdatedAt", l."UpdatedBy"
FROM "LeaveTypes" AS l
WHERE NOT (l."IsDeleted")
2025-06-13 08:02:40,696 [19] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:32:40.6961730Z, Method: GET, Path: /api/LeaveBalance/user/7f1ffd9c-9e10-4b8c-82df-696060387368/leaveType/8de0bb9b-a6cf-4be7-aaff-37f8688b37f9, User: Anonymous
2025-06-13 08:02:42,156 [21] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:32:42.1561050Z, Method: GET, Path: /api/LeaveBalance/user/7f1ffd9c-9e10-4b8c-82df-696060387368/leaveType/8de0bb9b-a6cf-4be7-aaff-37f8688b37f9, User: Anonymous
2025-06-13 08:03:06,325 [19] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:33:06.3253980Z, Method: GET, Path: /api/v1/leave-balance/user/3fa85f64-5717-4562-b3fc-2c963f66afa6/leaveType/8de0bb9b-a6cf-4be7-aaff-37f8688b37f9, User: Chandler
2025-06-13 08:03:06,332 [19] INFO  LeaveManagementSystem.Controllers.LeaveBalanceController - Fetching leave balance for user ID: 3fa85f64-5717-4562-b3fc-2c963f66afa6 and leave type ID: 8de0bb9b-a6cf-4be7-aaff-37f8688b37f9
2025-06-13 08:03:06,335 [21] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."LeaveTypeId", t0."TotalLeaves", t0."UsedLeaves", t0."UserId", t0."Id0", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted") AND u."Id" = @__key_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t1."Id" AS "Id0", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Description", t1."IsDeleted", t1."Name", t1."StandardLeaveCount", t1."UpdatedAt", t1."UpdatedBy"
    FROM "LeaveBalances" AS l
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t1 ON l."LeaveTypeId" = t1."Id"
) AS t0 ON t."Id" = t0."UserId"
ORDER BY t."Id", t0."Id"
2025-06-13 08:03:06,335 [21] WARN  LeaveManagementSystem.Controllers.LeaveBalanceController - Leave balance not found for user ID: 3fa85f64-5717-4562-b3fc-2c963f66afa6 and leave type ID: 8de0bb9b-a6cf-4be7-aaff-37f8688b37f9. User with ID 3fa85f64-5717-4562-b3fc-2c963f66afa6 not found
2025-06-13 08:03:08,598 [19] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:33:08.5989090Z, Method: GET, Path: /api/v1/leave-balance/user/3fa85f64-5717-4562-b3fc-2c963f66afa6/leaveType/8de0bb9b-a6cf-4be7-aaff-37f8688b37f9, User: Chandler
2025-06-13 08:03:08,599 [19] INFO  LeaveManagementSystem.Controllers.LeaveBalanceController - Fetching leave balance for user ID: 3fa85f64-5717-4562-b3fc-2c963f66afa6 and leave type ID: 8de0bb9b-a6cf-4be7-aaff-37f8688b37f9
2025-06-13 08:03:08,601 [23] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."LeaveTypeId", t0."TotalLeaves", t0."UsedLeaves", t0."UserId", t0."Id0", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted") AND u."Id" = @__key_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t1."Id" AS "Id0", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Description", t1."IsDeleted", t1."Name", t1."StandardLeaveCount", t1."UpdatedAt", t1."UpdatedBy"
    FROM "LeaveBalances" AS l
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t1 ON l."LeaveTypeId" = t1."Id"
) AS t0 ON t."Id" = t0."UserId"
ORDER BY t."Id", t0."Id"
2025-06-13 08:03:08,602 [23] WARN  LeaveManagementSystem.Controllers.LeaveBalanceController - Leave balance not found for user ID: 3fa85f64-5717-4562-b3fc-2c963f66afa6 and leave type ID: 8de0bb9b-a6cf-4be7-aaff-37f8688b37f9. User with ID 3fa85f64-5717-4562-b3fc-2c963f66afa6 not found
2025-06-13 08:03:33,932 [23] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:33:33.9325090Z, Method: GET, Path: /api/v1/leave-balance/user/7f1ffd9c-9e10-4b8c-82df-696060387368/leaveType/8de0bb9b-a6cf-4be7-aaff-37f8688b37f9, User: Chandler
2025-06-13 08:03:33,933 [23] INFO  LeaveManagementSystem.Controllers.LeaveBalanceController - Fetching leave balance for user ID: 7f1ffd9c-9e10-4b8c-82df-696060387368 and leave type ID: 8de0bb9b-a6cf-4be7-aaff-37f8688b37f9
2025-06-13 08:03:33,940 [22] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (3ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."LeaveTypeId", t0."TotalLeaves", t0."UsedLeaves", t0."UserId", t0."Id0", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted") AND u."Id" = @__key_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t1."Id" AS "Id0", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Description", t1."IsDeleted", t1."Name", t1."StandardLeaveCount", t1."UpdatedAt", t1."UpdatedBy"
    FROM "LeaveBalances" AS l
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t1 ON l."LeaveTypeId" = t1."Id"
) AS t0 ON t."Id" = t0."UserId"
ORDER BY t."Id", t0."Id"
2025-06-13 08:03:33,942 [22] WARN  LeaveManagementSystem.Controllers.LeaveBalanceController - Leave balance not found for user ID: 7f1ffd9c-9e10-4b8c-82df-696060387368 and leave type ID: 8de0bb9b-a6cf-4be7-aaff-37f8688b37f9. Leave Balance for LeaveType 8de0bb9b-a6cf-4be7-aaff-37f8688b37f9 not found for User 7f1ffd9c-9e10-4b8c-82df-696060387368
2025-06-13 08:04:24,742 [22] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:34:24.7424180Z, Method: GET, Path: /api/v1/leave-balance/user/7f1ffd9c-9e10-4b8c-82df-696060387368/leaveType/80664038-baf4-458f-a0d2-43deb910c8a5, User: Chandler
2025-06-13 08:04:24,743 [22] INFO  LeaveManagementSystem.Controllers.LeaveBalanceController - Fetching leave balance for user ID: 7f1ffd9c-9e10-4b8c-82df-696060387368 and leave type ID: 80664038-baf4-458f-a0d2-43deb910c8a5
2025-06-13 08:04:24,752 [21] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (8ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."LeaveTypeId", t0."TotalLeaves", t0."UsedLeaves", t0."UserId", t0."Id0", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted") AND u."Id" = @__key_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t1."Id" AS "Id0", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Description", t1."IsDeleted", t1."Name", t1."StandardLeaveCount", t1."UpdatedAt", t1."UpdatedBy"
    FROM "LeaveBalances" AS l
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t1 ON l."LeaveTypeId" = t1."Id"
) AS t0 ON t."Id" = t0."UserId"
ORDER BY t."Id", t0."Id"
2025-06-13 08:05:09,442 [25] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:35:09.4428480Z, Method: GET, Path: /api/v1/leave-balance/user/7f1ffd9c-9e10-4b8c-82df-696060387368/leaveType/80664038-baf4-458f-a0d2-43deb910c8a5, User: Joey
2025-06-13 08:05:09,443 [25] INFO  LeaveManagementSystem.Controllers.LeaveBalanceController - Fetching leave balance for user ID: 7f1ffd9c-9e10-4b8c-82df-696060387368 and leave type ID: 80664038-baf4-458f-a0d2-43deb910c8a5
2025-06-13 08:05:09,459 [21] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (5ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."LeaveTypeId", t0."TotalLeaves", t0."UsedLeaves", t0."UserId", t0."Id0", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted") AND u."Id" = @__key_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t1."Id" AS "Id0", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Description", t1."IsDeleted", t1."Name", t1."StandardLeaveCount", t1."UpdatedAt", t1."UpdatedBy"
    FROM "LeaveBalances" AS l
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t1 ON l."LeaveTypeId" = t1."Id"
) AS t0 ON t."Id" = t0."UserId"
ORDER BY t."Id", t0."Id"
2025-06-13 08:05:27,738 [22] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:35:27.7386540Z, Method: POST, Path: /api/LeaveBalance/initialize/user/%7Ba9878ee5-34ba-4ec4-8a5c-4466310b9718%7D%0A, User: Anonymous
2025-06-13 08:05:29,665 [21] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:35:29.6651020Z, Method: POST, Path: /api/LeaveBalance/initialize/user/%7Ba9878ee5-34ba-4ec4-8a5c-4466310b9718%7D%0A, User: Anonymous
2025-06-13 08:05:38,253 [21] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:35:38.2529000Z, Method: POST, Path: /api/Leave-balance/initialize/user/%7Ba9878ee5-34ba-4ec4-8a5c-4466310b9718%7D%0A, User: Anonymous
2025-06-13 08:05:43,284 [22] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:35:43.2848060Z, Method: POST, Path: /api/Leave-balance/initialize/user/%7Ba9878ee5-34ba-4ec4-8a5c-4466310b9718%7D%0A, User: Joey
2025-06-13 08:07:51,868 [.NET Signal Handler] INFO  Microsoft.Hosting.Lifetime - Application is shutting down...
2025-06-13 08:07:58,070 [1] WARN  Microsoft.EntityFrameworkCore.Model.Validation - Entity 'LeaveType' has a global query filter defined and is the required end of a relationship with the entity 'LeaveBalance'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-06-13 08:07:58,319 [1] INFO  Microsoft.Hosting.Lifetime - Now listening on: http://localhost:5000
2025-06-13 08:07:58,320 [1] INFO  Microsoft.Hosting.Lifetime - Application started. Press Ctrl+C to shut down.
2025-06-13 08:07:58,320 [1] INFO  Microsoft.Hosting.Lifetime - Hosting environment: Development
2025-06-13 08:07:58,320 [1] INFO  Microsoft.Hosting.Lifetime - Content root path: /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem
2025-06-13 08:07:58,378 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."DeletedAt", l."EndDate", l."IsDeleted", l."LeaveTypeId", l."Reason", l."ReviewedById", l."StartDate", l."Status", l."UpdatedAt", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy", t1."Id", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Email", t1."Gender", t1."IsActive", t1."IsDeleted", t1."LastLoginAt", t1."PasswordHash", t1."Role", t1."Username", t2."Id", t2."DeletedAt", t2."FileContent", t2."FileName", t2."IsDeleted", t2."LeaveRequestId", t2."UploadedAt"
FROM "LeaveRequests" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
LEFT JOIN (
    SELECT u0."Id", u0."CreatedAt", u0."CreatedBy", u0."DeletedAt", u0."Email", u0."Gender", u0."IsActive", u0."IsDeleted", u0."LastLoginAt", u0."PasswordHash", u0."Role", u0."Username"
    FROM "Users" AS u0
    WHERE NOT (u0."IsDeleted")
) AS t1 ON l."ReviewedById" = t1."Id"
LEFT JOIN (
    SELECT l1."Id", l1."DeletedAt", l1."FileContent", l1."FileName", l1."IsDeleted", l1."LeaveRequestId", l1."UploadedAt"
    FROM "LeaveAttachments" AS l1
    WHERE NOT (l1."IsDeleted")
) AS t2 ON l."Id" = t2."LeaveRequestId"
WHERE NOT (l."IsDeleted")
ORDER BY l."Id", t."Id", t0."Id", t1."Id"
2025-06-13 08:09:50,088 [14] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:39:50.0876950Z, Method: GET, Path: /api/v1/users, User: Anonymous
2025-06-13 08:09:50,137 [14] INFO  LeaveManagementSystem.Controllers.UsersController - Fetching all users with pagination parameters.
2025-06-13 08:09:50,148 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
FROM "Users" AS u
WHERE NOT (u."IsDeleted")
2025-06-13 08:10:40,294 [14] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:40:40.2945010Z, Method: GET, Path: /api/v1/users, User: Anonymous
2025-06-13 08:10:40,296 [14] INFO  LeaveManagementSystem.Controllers.UsersController - Fetching all users with pagination parameters.
2025-06-13 08:10:40,322 [14] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
FROM "Users" AS u
WHERE NOT (u."IsDeleted")
2025-06-13 08:11:58,293 [13] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:41:58.2938360Z, Method: GET, Path: /api/v1/leavetypes, User: Anonymous
2025-06-13 08:11:58,300 [13] INFO  LeaveManagementSystem.Controllers.LeaveTypeController - Fetching all leave types with pagination.
2025-06-13 08:11:58,308 [14] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."CreatedBy", l."DeletedAt", l."Description", l."IsDeleted", l."Name", l."StandardLeaveCount", l."UpdatedAt", l."UpdatedBy"
FROM "LeaveTypes" AS l
WHERE NOT (l."IsDeleted")
2025-06-13 08:13:01,031 [16] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:43:01.0315670Z, Method: POST, Path: /api/v1/leave-requests, User: Chandler
2025-06-13 08:13:01,041 [16] INFO  LeaveManagementSystem.Controllers.LeaveRequestController - Creating new leave request.
2025-06-13 08:13:01,082 [16] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (10ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."LeaveTypeId", t0."TotalLeaves", t0."UsedLeaves", t0."UserId", t0."Id0", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted") AND u."Id" = @__key_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t1."Id" AS "Id0", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Description", t1."IsDeleted", t1."Name", t1."StandardLeaveCount", t1."UpdatedAt", t1."UpdatedBy"
    FROM "LeaveBalances" AS l
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t1 ON l."LeaveTypeId" = t1."Id"
) AS t0 ON t."Id" = t0."UserId"
ORDER BY t."Id", t0."Id"
2025-06-13 08:13:01,087 [16] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."CreatedBy", l."DeletedAt", l."Description", l."IsDeleted", l."Name", l."StandardLeaveCount", l."UpdatedAt", l."UpdatedBy"
FROM "LeaveTypes" AS l
WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
LIMIT 1
2025-06-13 08:13:01,096 [17] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."DeletedAt", l."EndDate", l."IsDeleted", l."LeaveTypeId", l."Reason", l."ReviewedById", l."StartDate", l."Status", l."UpdatedAt", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy", t1."Id", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Email", t1."Gender", t1."IsActive", t1."IsDeleted", t1."LastLoginAt", t1."PasswordHash", t1."Role", t1."Username", t2."Id", t2."DeletedAt", t2."FileContent", t2."FileName", t2."IsDeleted", t2."LeaveRequestId", t2."UploadedAt"
FROM "LeaveRequests" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
LEFT JOIN (
    SELECT u0."Id", u0."CreatedAt", u0."CreatedBy", u0."DeletedAt", u0."Email", u0."Gender", u0."IsActive", u0."IsDeleted", u0."LastLoginAt", u0."PasswordHash", u0."Role", u0."Username"
    FROM "Users" AS u0
    WHERE NOT (u0."IsDeleted")
) AS t1 ON l."ReviewedById" = t1."Id"
LEFT JOIN (
    SELECT l1."Id", l1."DeletedAt", l1."FileContent", l1."FileName", l1."IsDeleted", l1."LeaveRequestId", l1."UploadedAt"
    FROM "LeaveAttachments" AS l1
    WHERE NOT (l1."IsDeleted")
) AS t2 ON l."Id" = t2."LeaveRequestId"
WHERE NOT (l."IsDeleted")
ORDER BY l."Id", t."Id", t0."Id", t1."Id"
2025-06-13 08:13:01,098 [17] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (0ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."CreatedBy", l."DeletedAt", l."Description", l."IsDeleted", l."Name", l."StandardLeaveCount", l."UpdatedAt", l."UpdatedBy"
FROM "LeaveTypes" AS l
WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
LIMIT 1
2025-06-13 08:13:01,100 [17] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."LeaveTypeId", t0."TotalLeaves", t0."UsedLeaves", t0."UserId", t0."Id0", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted") AND u."Id" = @__key_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t1."Id" AS "Id0", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Description", t1."IsDeleted", t1."Name", t1."StandardLeaveCount", t1."UpdatedAt", t1."UpdatedBy"
    FROM "LeaveBalances" AS l
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t1 ON l."LeaveTypeId" = t1."Id"
) AS t0 ON t."Id" = t0."UserId"
ORDER BY t."Id", t0."Id"
2025-06-13 08:13:01,108 [17] ERROR LeaveManagementSystem.Controllers.LeaveRequestController - Error creating leave request.
System.Exception: Failed to create leave request Leave Balance for LeaveType 21a9c3ae-dcc8-41aa-9e64-57ec38b72420 not found for User c56813f9-b9e7-473a-94d9-1fc652a73fb8
 ---> System.Collections.Generic.KeyNotFoundException: Leave Balance for LeaveType 21a9c3ae-dcc8-41aa-9e64-57ec38b72420 not found for User c56813f9-b9e7-473a-94d9-1fc652a73fb8
   at LeaveManagementSystem.Services.LeaveBalanceService.GetLeaveBalanceForTypeAsync(Guid userId, Guid leaveTypeId) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveBalanceService.cs:line 72
   at LeaveManagementSystem.Services.LeaveRequestService.CreateAsync(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 242
   --- End of inner exception stack trace ---
   at LeaveManagementSystem.Services.LeaveRequestService.CreateAsync(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 282
   at LeaveManagementSystem.Controllers.LeaveRequestController.Create(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Controllers/LeaveRequestController.cs:line 79
2025-06-13 08:15:19,935 [17] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:45:19.9357240Z, Method: POST, Path: /api/v1/auth/login, User: Anonymous
2025-06-13 08:15:19,946 [16] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
FROM "Users" AS u
WHERE NOT (u."IsDeleted")
2025-06-13 08:15:20,182 [16] INFO  LeaveManagementSystem.Services.AuthenticationService - User joeytrib@example.com logged in successfully
2025-06-13 08:15:20,183 [16] INFO  LeaveManagementSystem.Controllers.AuthenticationController - User joeytrib@example.com logged in successfully.
2025-06-13 08:15:35,158 [17] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:45:35.1580120Z, Method: POST, Path: /api/v1/leave-requests, User: Joey
2025-06-13 08:15:35,160 [17] INFO  LeaveManagementSystem.Controllers.LeaveRequestController - Creating new leave request.
2025-06-13 08:15:35,163 [16] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."LeaveTypeId", t0."TotalLeaves", t0."UsedLeaves", t0."UserId", t0."Id0", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted") AND u."Id" = @__key_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t1."Id" AS "Id0", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Description", t1."IsDeleted", t1."Name", t1."StandardLeaveCount", t1."UpdatedAt", t1."UpdatedBy"
    FROM "LeaveBalances" AS l
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t1 ON l."LeaveTypeId" = t1."Id"
) AS t0 ON t."Id" = t0."UserId"
ORDER BY t."Id", t0."Id"
2025-06-13 08:15:35,174 [16] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."CreatedBy", l."DeletedAt", l."Description", l."IsDeleted", l."Name", l."StandardLeaveCount", l."UpdatedAt", l."UpdatedBy"
FROM "LeaveTypes" AS l
WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
LIMIT 1
2025-06-13 08:15:35,175 [16] ERROR LeaveManagementSystem.Controllers.LeaveRequestController - Error creating leave request.
System.Exception: Failed to create leave request LeaveType with id 3fa85f64-5717-4562-b3fc-2c963f66afa6 not found.
 ---> System.Collections.Generic.KeyNotFoundException: LeaveType with id 3fa85f64-5717-4562-b3fc-2c963f66afa6 not found.
   at LeaveManagementSystem.Services.LeaveTypeService.GetByIdAsync(Guid id) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveTypeService.cs:line 89
   at LeaveManagementSystem.Services.LeaveRequestService.ValidateGenderBasedLeaveAsync(Guid userId, Guid leaveTypeId) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 369
   at LeaveManagementSystem.Services.LeaveRequestService.CreateAsync(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 211
   --- End of inner exception stack trace ---
   at LeaveManagementSystem.Services.LeaveRequestService.CreateAsync(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 282
   at LeaveManagementSystem.Controllers.LeaveRequestController.Create(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Controllers/LeaveRequestController.cs:line 79
2025-06-13 08:16:02,988 [17] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:46:02.9883300Z, Method: GET, Path: /api/v1/leavetypes, User: Anonymous
2025-06-13 08:16:02,990 [17] INFO  LeaveManagementSystem.Controllers.LeaveTypeController - Fetching all leave types with pagination.
2025-06-13 08:16:02,991 [18] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."CreatedBy", l."DeletedAt", l."Description", l."IsDeleted", l."Name", l."StandardLeaveCount", l."UpdatedAt", l."UpdatedBy"
FROM "LeaveTypes" AS l
WHERE NOT (l."IsDeleted")
2025-06-13 08:16:15,254 [16] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:46:15.2547790Z, Method: POST, Path: /api/v1/leave-requests, User: Joey
2025-06-13 08:16:15,259 [16] INFO  LeaveManagementSystem.Controllers.LeaveRequestController - Creating new leave request.
2025-06-13 08:16:15,261 [17] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."LeaveTypeId", t0."TotalLeaves", t0."UsedLeaves", t0."UserId", t0."Id0", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted") AND u."Id" = @__key_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t1."Id" AS "Id0", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Description", t1."IsDeleted", t1."Name", t1."StandardLeaveCount", t1."UpdatedAt", t1."UpdatedBy"
    FROM "LeaveBalances" AS l
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t1 ON l."LeaveTypeId" = t1."Id"
) AS t0 ON t."Id" = t0."UserId"
ORDER BY t."Id", t0."Id"
2025-06-13 08:16:15,262 [17] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (0ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."CreatedBy", l."DeletedAt", l."Description", l."IsDeleted", l."Name", l."StandardLeaveCount", l."UpdatedAt", l."UpdatedBy"
FROM "LeaveTypes" AS l
WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
LIMIT 1
2025-06-13 08:16:15,264 [16] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."DeletedAt", l."EndDate", l."IsDeleted", l."LeaveTypeId", l."Reason", l."ReviewedById", l."StartDate", l."Status", l."UpdatedAt", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy", t1."Id", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Email", t1."Gender", t1."IsActive", t1."IsDeleted", t1."LastLoginAt", t1."PasswordHash", t1."Role", t1."Username", t2."Id", t2."DeletedAt", t2."FileContent", t2."FileName", t2."IsDeleted", t2."LeaveRequestId", t2."UploadedAt"
FROM "LeaveRequests" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
LEFT JOIN (
    SELECT u0."Id", u0."CreatedAt", u0."CreatedBy", u0."DeletedAt", u0."Email", u0."Gender", u0."IsActive", u0."IsDeleted", u0."LastLoginAt", u0."PasswordHash", u0."Role", u0."Username"
    FROM "Users" AS u0
    WHERE NOT (u0."IsDeleted")
) AS t1 ON l."ReviewedById" = t1."Id"
LEFT JOIN (
    SELECT l1."Id", l1."DeletedAt", l1."FileContent", l1."FileName", l1."IsDeleted", l1."LeaveRequestId", l1."UploadedAt"
    FROM "LeaveAttachments" AS l1
    WHERE NOT (l1."IsDeleted")
) AS t2 ON l."Id" = t2."LeaveRequestId"
WHERE NOT (l."IsDeleted")
ORDER BY l."Id", t."Id", t0."Id", t1."Id"
2025-06-13 08:16:15,265 [20] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (0ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."CreatedBy", l."DeletedAt", l."Description", l."IsDeleted", l."Name", l."StandardLeaveCount", l."UpdatedAt", l."UpdatedBy"
FROM "LeaveTypes" AS l
WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
LIMIT 1
2025-06-13 08:16:15,267 [16] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."LeaveTypeId", t0."TotalLeaves", t0."UsedLeaves", t0."UserId", t0."Id0", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted") AND u."Id" = @__key_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t1."Id" AS "Id0", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Description", t1."IsDeleted", t1."Name", t1."StandardLeaveCount", t1."UpdatedAt", t1."UpdatedBy"
    FROM "LeaveBalances" AS l
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t1 ON l."LeaveTypeId" = t1."Id"
) AS t0 ON t."Id" = t0."UserId"
ORDER BY t."Id", t0."Id"
2025-06-13 08:16:15,273 [16] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."DeletedAt", l."EndDate", l."IsDeleted", l."LeaveTypeId", l."Reason", l."ReviewedById", l."StartDate", l."Status", l."UpdatedAt", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy", t1."Id", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Email", t1."Gender", t1."IsActive", t1."IsDeleted", t1."LastLoginAt", t1."PasswordHash", t1."Role", t1."Username", t2."Id", t2."DeletedAt", t2."FileContent", t2."FileName", t2."IsDeleted", t2."LeaveRequestId", t2."UploadedAt"
FROM "LeaveRequests" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
LEFT JOIN (
    SELECT u0."Id", u0."CreatedAt", u0."CreatedBy", u0."DeletedAt", u0."Email", u0."Gender", u0."IsActive", u0."IsDeleted", u0."LastLoginAt", u0."PasswordHash", u0."Role", u0."Username"
    FROM "Users" AS u0
    WHERE NOT (u0."IsDeleted")
) AS t1 ON l."ReviewedById" = t1."Id"
LEFT JOIN (
    SELECT l1."Id", l1."DeletedAt", l1."FileContent", l1."FileName", l1."IsDeleted", l1."LeaveRequestId", l1."UploadedAt"
    FROM "LeaveAttachments" AS l1
    WHERE NOT (l1."IsDeleted")
) AS t2 ON l."Id" = t2."LeaveRequestId"
WHERE NOT (l."IsDeleted")
ORDER BY l."Id", t."Id", t0."Id", t1."Id"
2025-06-13 08:16:15,274 [16] ERROR LeaveManagementSystem.Controllers.LeaveRequestController - Error creating leave request.
System.Exception: Failed to create leave request Monthly leave limit exceeded. Allowed: 1 days, Used: 0 days, Requested: 5 days.
 ---> System.InvalidOperationException: Monthly leave limit exceeded. Allowed: 1 days, Used: 0 days, Requested: 5 days.
   at LeaveManagementSystem.Services.LeaveRequestService.CreateAsync(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 263
   --- End of inner exception stack trace ---
   at LeaveManagementSystem.Services.LeaveRequestService.CreateAsync(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 282
   at LeaveManagementSystem.Controllers.LeaveRequestController.Create(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Controllers/LeaveRequestController.cs:line 79
2025-06-13 08:17:23,934 [16] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:47:23.9348050Z, Method: POST, Path: /api/v1/leave-requests, User: Joey
2025-06-13 08:17:23,936 [16] INFO  LeaveManagementSystem.Controllers.LeaveRequestController - Creating new leave request.
2025-06-13 08:17:23,944 [21] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (7ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."LeaveTypeId", t0."TotalLeaves", t0."UsedLeaves", t0."UserId", t0."Id0", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted") AND u."Id" = @__key_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t1."Id" AS "Id0", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Description", t1."IsDeleted", t1."Name", t1."StandardLeaveCount", t1."UpdatedAt", t1."UpdatedBy"
    FROM "LeaveBalances" AS l
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t1 ON l."LeaveTypeId" = t1."Id"
) AS t0 ON t."Id" = t0."UserId"
ORDER BY t."Id", t0."Id"
2025-06-13 08:17:23,945 [18] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (0ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."CreatedBy", l."DeletedAt", l."Description", l."IsDeleted", l."Name", l."StandardLeaveCount", l."UpdatedAt", l."UpdatedBy"
FROM "LeaveTypes" AS l
WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
LIMIT 1
2025-06-13 08:17:23,947 [18] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."DeletedAt", l."EndDate", l."IsDeleted", l."LeaveTypeId", l."Reason", l."ReviewedById", l."StartDate", l."Status", l."UpdatedAt", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy", t1."Id", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Email", t1."Gender", t1."IsActive", t1."IsDeleted", t1."LastLoginAt", t1."PasswordHash", t1."Role", t1."Username", t2."Id", t2."DeletedAt", t2."FileContent", t2."FileName", t2."IsDeleted", t2."LeaveRequestId", t2."UploadedAt"
FROM "LeaveRequests" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
LEFT JOIN (
    SELECT u0."Id", u0."CreatedAt", u0."CreatedBy", u0."DeletedAt", u0."Email", u0."Gender", u0."IsActive", u0."IsDeleted", u0."LastLoginAt", u0."PasswordHash", u0."Role", u0."Username"
    FROM "Users" AS u0
    WHERE NOT (u0."IsDeleted")
) AS t1 ON l."ReviewedById" = t1."Id"
LEFT JOIN (
    SELECT l1."Id", l1."DeletedAt", l1."FileContent", l1."FileName", l1."IsDeleted", l1."LeaveRequestId", l1."UploadedAt"
    FROM "LeaveAttachments" AS l1
    WHERE NOT (l1."IsDeleted")
) AS t2 ON l."Id" = t2."LeaveRequestId"
WHERE NOT (l."IsDeleted")
ORDER BY l."Id", t."Id", t0."Id", t1."Id"
2025-06-13 08:17:23,948 [18] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (0ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."CreatedBy", l."DeletedAt", l."Description", l."IsDeleted", l."Name", l."StandardLeaveCount", l."UpdatedAt", l."UpdatedBy"
FROM "LeaveTypes" AS l
WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
LIMIT 1
2025-06-13 08:17:23,949 [18] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."LeaveTypeId", t0."TotalLeaves", t0."UsedLeaves", t0."UserId", t0."Id0", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted") AND u."Id" = @__key_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t1."Id" AS "Id0", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Description", t1."IsDeleted", t1."Name", t1."StandardLeaveCount", t1."UpdatedAt", t1."UpdatedBy"
    FROM "LeaveBalances" AS l
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t1 ON l."LeaveTypeId" = t1."Id"
) AS t0 ON t."Id" = t0."UserId"
ORDER BY t."Id", t0."Id"
2025-06-13 08:17:23,951 [16] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."DeletedAt", l."EndDate", l."IsDeleted", l."LeaveTypeId", l."Reason", l."ReviewedById", l."StartDate", l."Status", l."UpdatedAt", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy", t1."Id", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Email", t1."Gender", t1."IsActive", t1."IsDeleted", t1."LastLoginAt", t1."PasswordHash", t1."Role", t1."Username", t2."Id", t2."DeletedAt", t2."FileContent", t2."FileName", t2."IsDeleted", t2."LeaveRequestId", t2."UploadedAt"
FROM "LeaveRequests" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
LEFT JOIN (
    SELECT u0."Id", u0."CreatedAt", u0."CreatedBy", u0."DeletedAt", u0."Email", u0."Gender", u0."IsActive", u0."IsDeleted", u0."LastLoginAt", u0."PasswordHash", u0."Role", u0."Username"
    FROM "Users" AS u0
    WHERE NOT (u0."IsDeleted")
) AS t1 ON l."ReviewedById" = t1."Id"
LEFT JOIN (
    SELECT l1."Id", l1."DeletedAt", l1."FileContent", l1."FileName", l1."IsDeleted", l1."LeaveRequestId", l1."UploadedAt"
    FROM "LeaveAttachments" AS l1
    WHERE NOT (l1."IsDeleted")
) AS t2 ON l."Id" = t2."LeaveRequestId"
WHERE NOT (l."IsDeleted")
ORDER BY l."Id", t."Id", t0."Id", t1."Id"
2025-06-13 08:17:23,951 [16] ERROR LeaveManagementSystem.Controllers.LeaveRequestController - Error creating leave request.
System.Exception: Failed to create leave request Monthly leave limit exceeded. Allowed: 1 days, Used: 0 days, Requested: 5 days.
 ---> System.InvalidOperationException: Monthly leave limit exceeded. Allowed: 1 days, Used: 0 days, Requested: 5 days.
   at LeaveManagementSystem.Services.LeaveRequestService.CreateAsync(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 263
   --- End of inner exception stack trace ---
   at LeaveManagementSystem.Services.LeaveRequestService.CreateAsync(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 282
   at LeaveManagementSystem.Controllers.LeaveRequestController.Create(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Controllers/LeaveRequestController.cs:line 79
2025-06-13 08:19:08,467 [16] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:49:08.4671060Z, Method: GET, Path: /api/v1/leavetypes, User: Joey
2025-06-13 08:19:08,468 [16] INFO  LeaveManagementSystem.Controllers.LeaveTypeController - Fetching all leave types with pagination.
2025-06-13 08:19:08,482 [16] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."CreatedBy", l."DeletedAt", l."Description", l."IsDeleted", l."Name", l."StandardLeaveCount", l."UpdatedAt", l."UpdatedBy"
FROM "LeaveTypes" AS l
WHERE NOT (l."IsDeleted")
2025-06-13 08:20:23,213 [22] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:50:23.2138580Z, Method: POST, Path: /api/v1/auth/login, User: Joey
2025-06-13 08:20:23,219 [18] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
FROM "Users" AS u
WHERE NOT (u."IsDeleted")
2025-06-13 08:20:23,220 [18] WARN  LeaveManagementSystem.Services.AuthenticationService - Failed login attempt for sampleuser@example.com
2025-06-13 08:20:23,220 [18] WARN  LeaveManagementSystem.Controllers.AuthenticationController - Unauthorized login attempt for sampleuser@example.com.
System.UnauthorizedAccessException: Invalid credentials
   at LeaveManagementSystem.Services.AuthenticationService.LoginAsync(UserLoginRequest request) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/AuthenticationService.cs:line 41
   at LeaveManagementSystem.Controllers.AuthenticationController.Login(UserLoginRequest request) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Controllers/AuthenticationController.cs:line 36
2025-06-13 08:20:29,167 [18] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:50:29.1675730Z, Method: POST, Path: /api/v1/auth/login, User: Joey
2025-06-13 08:20:29,171 [21] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
FROM "Users" AS u
WHERE NOT (u."IsDeleted")
2025-06-13 08:20:29,343 [21] INFO  LeaveManagementSystem.Services.AuthenticationService - User sample@example.com logged in successfully
2025-06-13 08:20:29,343 [21] INFO  LeaveManagementSystem.Controllers.AuthenticationController - User sample@example.com logged in successfully.
2025-06-13 08:20:40,942 [21] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:50:40.9423150Z, Method: POST, Path: /api/v1/leave-requests, User: Sample
2025-06-13 08:20:40,943 [21] INFO  LeaveManagementSystem.Controllers.LeaveRequestController - Creating new leave request.
2025-06-13 08:20:40,950 [18] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (5ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."LeaveTypeId", t0."TotalLeaves", t0."UsedLeaves", t0."UserId", t0."Id0", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted") AND u."Id" = @__key_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t1."Id" AS "Id0", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Description", t1."IsDeleted", t1."Name", t1."StandardLeaveCount", t1."UpdatedAt", t1."UpdatedBy"
    FROM "LeaveBalances" AS l
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t1 ON l."LeaveTypeId" = t1."Id"
) AS t0 ON t."Id" = t0."UserId"
ORDER BY t."Id", t0."Id"
2025-06-13 08:20:40,952 [21] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."CreatedBy", l."DeletedAt", l."Description", l."IsDeleted", l."Name", l."StandardLeaveCount", l."UpdatedAt", l."UpdatedBy"
FROM "LeaveTypes" AS l
WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
LIMIT 1
2025-06-13 08:20:40,956 [18] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."DeletedAt", l."EndDate", l."IsDeleted", l."LeaveTypeId", l."Reason", l."ReviewedById", l."StartDate", l."Status", l."UpdatedAt", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy", t1."Id", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Email", t1."Gender", t1."IsActive", t1."IsDeleted", t1."LastLoginAt", t1."PasswordHash", t1."Role", t1."Username", t2."Id", t2."DeletedAt", t2."FileContent", t2."FileName", t2."IsDeleted", t2."LeaveRequestId", t2."UploadedAt"
FROM "LeaveRequests" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
LEFT JOIN (
    SELECT u0."Id", u0."CreatedAt", u0."CreatedBy", u0."DeletedAt", u0."Email", u0."Gender", u0."IsActive", u0."IsDeleted", u0."LastLoginAt", u0."PasswordHash", u0."Role", u0."Username"
    FROM "Users" AS u0
    WHERE NOT (u0."IsDeleted")
) AS t1 ON l."ReviewedById" = t1."Id"
LEFT JOIN (
    SELECT l1."Id", l1."DeletedAt", l1."FileContent", l1."FileName", l1."IsDeleted", l1."LeaveRequestId", l1."UploadedAt"
    FROM "LeaveAttachments" AS l1
    WHERE NOT (l1."IsDeleted")
) AS t2 ON l."Id" = t2."LeaveRequestId"
WHERE NOT (l."IsDeleted")
ORDER BY l."Id", t."Id", t0."Id", t1."Id"
2025-06-13 08:20:40,958 [19] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (0ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."CreatedBy", l."DeletedAt", l."Description", l."IsDeleted", l."Name", l."StandardLeaveCount", l."UpdatedAt", l."UpdatedBy"
FROM "LeaveTypes" AS l
WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
LIMIT 1
2025-06-13 08:20:41,029 [19] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Boolean), @p5='?' (DbType = Guid), @p6='?', @p7='?' (DbType = Guid), @p8='?' (DbType = DateTime), @p9='?', @p10='?' (DbType = DateTime), @p11='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
INSERT INTO "LeaveRequests" ("Id", "CreatedAt", "DeletedAt", "EndDate", "IsDeleted", "LeaveTypeId", "Reason", "ReviewedById", "StartDate", "Status", "UpdatedAt", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-13 08:20:41,045 [18] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Guid), @p4='?', @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime), @p7='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
INSERT INTO "AuditLogs" ("Id", "Action", "DeletedAt", "EntityId", "EntityType", "IsDeleted", "Timestamp", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-06-13 08:20:41,054 [21] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t2."Id", t2."CreatedAt", t2."DeletedAt", t2."EndDate", t2."IsDeleted", t2."LeaveTypeId", t2."Reason", t2."ReviewedById", t2."StartDate", t2."Status", t2."UpdatedAt", t2."UserId", t2."Id0", t2."CreatedAt0", t2."CreatedBy", t2."DeletedAt0", t2."Email", t2."Gender", t2."IsActive", t2."IsDeleted0", t2."LastLoginAt", t2."PasswordHash", t2."Role", t2."Username", t2."Id1", t2."CreatedAt1", t2."CreatedBy0", t2."DeletedAt1", t2."Description", t2."IsDeleted1", t2."Name", t2."StandardLeaveCount", t2."UpdatedAt0", t2."UpdatedBy", t2."Id2", t2."CreatedAt2", t2."CreatedBy1", t2."DeletedAt2", t2."Email0", t2."Gender0", t2."IsActive0", t2."IsDeleted2", t2."LastLoginAt0", t2."PasswordHash0", t2."Role0", t2."Username0", t3."Id", t3."DeletedAt", t3."FileContent", t3."FileName", t3."IsDeleted", t3."LeaveRequestId", t3."UploadedAt"
FROM (
    SELECT l."Id", l."CreatedAt", l."DeletedAt", l."EndDate", l."IsDeleted", l."LeaveTypeId", l."Reason", l."ReviewedById", l."StartDate", l."Status", l."UpdatedAt", l."UserId", t."Id" AS "Id0", t."CreatedAt" AS "CreatedAt0", t."CreatedBy", t."DeletedAt" AS "DeletedAt0", t."Email", t."Gender", t."IsActive", t."IsDeleted" AS "IsDeleted0", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id" AS "Id1", t0."CreatedAt" AS "CreatedAt1", t0."CreatedBy" AS "CreatedBy0", t0."DeletedAt" AS "DeletedAt1", t0."Description", t0."IsDeleted" AS "IsDeleted1", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt" AS "UpdatedAt0", t0."UpdatedBy", t1."Id" AS "Id2", t1."CreatedAt" AS "CreatedAt2", t1."CreatedBy" AS "CreatedBy1", t1."DeletedAt" AS "DeletedAt2", t1."Email" AS "Email0", t1."Gender" AS "Gender0", t1."IsActive" AS "IsActive0", t1."IsDeleted" AS "IsDeleted2", t1."LastLoginAt" AS "LastLoginAt0", t1."PasswordHash" AS "PasswordHash0", t1."Role" AS "Role0", t1."Username" AS "Username0"
    FROM "LeaveRequests" AS l
    INNER JOIN (
        SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
        FROM "Users" AS u
        WHERE NOT (u."IsDeleted")
    ) AS t ON l."UserId" = t."Id"
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t0 ON l."LeaveTypeId" = t0."Id"
    LEFT JOIN (
        SELECT u0."Id", u0."CreatedAt", u0."CreatedBy", u0."DeletedAt", u0."Email", u0."Gender", u0."IsActive", u0."IsDeleted", u0."LastLoginAt", u0."PasswordHash", u0."Role", u0."Username"
        FROM "Users" AS u0
        WHERE NOT (u0."IsDeleted")
    ) AS t1 ON l."ReviewedById" = t1."Id"
    WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
    LIMIT 1
) AS t2
LEFT JOIN (
    SELECT l1."Id", l1."DeletedAt", l1."FileContent", l1."FileName", l1."IsDeleted", l1."LeaveRequestId", l1."UploadedAt"
    FROM "LeaveAttachments" AS l1
    WHERE NOT (l1."IsDeleted")
) AS t3 ON t2."Id" = t3."LeaveRequestId"
ORDER BY t2."Id", t2."Id0", t2."Id1", t2."Id2"
2025-06-13 08:21:35,064 [18] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:51:35.0646630Z, Method: GET, Path: /api/v1/leave-attachments/by-leave-request/b26b65b2-35f2-4483-8c17-90d4be243245, User: Anonymous
2025-06-13 08:21:35,071 [18] INFO  LeaveManagementSystem.Controllers.LeaveAttachmentController - Fetching attachments for LeaveRequestId: b26b65b2-35f2-4483-8c17-90d4be243245
2025-06-13 08:21:35,075 [18] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t2."Id", t2."CreatedAt", t2."DeletedAt", t2."EndDate", t2."IsDeleted", t2."LeaveTypeId", t2."Reason", t2."ReviewedById", t2."StartDate", t2."Status", t2."UpdatedAt", t2."UserId", t2."Id0", t2."CreatedAt0", t2."CreatedBy", t2."DeletedAt0", t2."Email", t2."Gender", t2."IsActive", t2."IsDeleted0", t2."LastLoginAt", t2."PasswordHash", t2."Role", t2."Username", t2."Id1", t2."CreatedAt1", t2."CreatedBy0", t2."DeletedAt1", t2."Description", t2."IsDeleted1", t2."Name", t2."StandardLeaveCount", t2."UpdatedAt0", t2."UpdatedBy", t2."Id2", t2."CreatedAt2", t2."CreatedBy1", t2."DeletedAt2", t2."Email0", t2."Gender0", t2."IsActive0", t2."IsDeleted2", t2."LastLoginAt0", t2."PasswordHash0", t2."Role0", t2."Username0", t3."Id", t3."DeletedAt", t3."FileContent", t3."FileName", t3."IsDeleted", t3."LeaveRequestId", t3."UploadedAt"
FROM (
    SELECT l."Id", l."CreatedAt", l."DeletedAt", l."EndDate", l."IsDeleted", l."LeaveTypeId", l."Reason", l."ReviewedById", l."StartDate", l."Status", l."UpdatedAt", l."UserId", t."Id" AS "Id0", t."CreatedAt" AS "CreatedAt0", t."CreatedBy", t."DeletedAt" AS "DeletedAt0", t."Email", t."Gender", t."IsActive", t."IsDeleted" AS "IsDeleted0", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id" AS "Id1", t0."CreatedAt" AS "CreatedAt1", t0."CreatedBy" AS "CreatedBy0", t0."DeletedAt" AS "DeletedAt1", t0."Description", t0."IsDeleted" AS "IsDeleted1", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt" AS "UpdatedAt0", t0."UpdatedBy", t1."Id" AS "Id2", t1."CreatedAt" AS "CreatedAt2", t1."CreatedBy" AS "CreatedBy1", t1."DeletedAt" AS "DeletedAt2", t1."Email" AS "Email0", t1."Gender" AS "Gender0", t1."IsActive" AS "IsActive0", t1."IsDeleted" AS "IsDeleted2", t1."LastLoginAt" AS "LastLoginAt0", t1."PasswordHash" AS "PasswordHash0", t1."Role" AS "Role0", t1."Username" AS "Username0"
    FROM "LeaveRequests" AS l
    INNER JOIN (
        SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
        FROM "Users" AS u
        WHERE NOT (u."IsDeleted")
    ) AS t ON l."UserId" = t."Id"
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t0 ON l."LeaveTypeId" = t0."Id"
    LEFT JOIN (
        SELECT u0."Id", u0."CreatedAt", u0."CreatedBy", u0."DeletedAt", u0."Email", u0."Gender", u0."IsActive", u0."IsDeleted", u0."LastLoginAt", u0."PasswordHash", u0."Role", u0."Username"
        FROM "Users" AS u0
        WHERE NOT (u0."IsDeleted")
    ) AS t1 ON l."ReviewedById" = t1."Id"
    WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
    LIMIT 1
) AS t2
LEFT JOIN (
    SELECT l1."Id", l1."DeletedAt", l1."FileContent", l1."FileName", l1."IsDeleted", l1."LeaveRequestId", l1."UploadedAt"
    FROM "LeaveAttachments" AS l1
    WHERE NOT (l1."IsDeleted")
) AS t3 ON t2."Id" = t3."LeaveRequestId"
ORDER BY t2."Id", t2."Id0", t2."Id1", t2."Id2"
2025-06-13 08:21:35,081 [19] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."DeletedAt", l."FileContent", l."FileName", l."IsDeleted", l."LeaveRequestId", l."UploadedAt", t."Id", t."CreatedAt", t."DeletedAt", t."EndDate", t."IsDeleted", t."LeaveTypeId", t."Reason", t."ReviewedById", t."StartDate", t."Status", t."UpdatedAt", t."UserId"
FROM "LeaveAttachments" AS l
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."DeletedAt", l0."EndDate", l0."IsDeleted", l0."LeaveTypeId", l0."Reason", l0."ReviewedById", l0."StartDate", l0."Status", l0."UpdatedAt", l0."UserId"
    FROM "LeaveRequests" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t ON l."LeaveRequestId" = t."Id"
WHERE NOT (l."IsDeleted")
2025-06-13 08:21:35,081 [19] WARN  LeaveManagementSystem.Controllers.LeaveAttachmentController - No attachments found for LeaveRequestId: b26b65b2-35f2-4483-8c17-90d4be243245
2025-06-13 08:22:04,688 [21] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:52:04.6886830Z, Method: GET, Path: /api/v1/leave-requests, User: Joey
2025-06-13 08:22:04,692 [21] INFO  LeaveManagementSystem.Controllers.LeaveRequestController - Fetching all leave requests.
2025-06-13 08:22:04,696 [21] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."DeletedAt", l."EndDate", l."IsDeleted", l."LeaveTypeId", l."Reason", l."ReviewedById", l."StartDate", l."Status", l."UpdatedAt", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy", t1."Id", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Email", t1."Gender", t1."IsActive", t1."IsDeleted", t1."LastLoginAt", t1."PasswordHash", t1."Role", t1."Username", t2."Id", t2."DeletedAt", t2."FileContent", t2."FileName", t2."IsDeleted", t2."LeaveRequestId", t2."UploadedAt"
FROM "LeaveRequests" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
LEFT JOIN (
    SELECT u0."Id", u0."CreatedAt", u0."CreatedBy", u0."DeletedAt", u0."Email", u0."Gender", u0."IsActive", u0."IsDeleted", u0."LastLoginAt", u0."PasswordHash", u0."Role", u0."Username"
    FROM "Users" AS u0
    WHERE NOT (u0."IsDeleted")
) AS t1 ON l."ReviewedById" = t1."Id"
LEFT JOIN (
    SELECT l1."Id", l1."DeletedAt", l1."FileContent", l1."FileName", l1."IsDeleted", l1."LeaveRequestId", l1."UploadedAt"
    FROM "LeaveAttachments" AS l1
    WHERE NOT (l1."IsDeleted")
) AS t2 ON l."Id" = t2."LeaveRequestId"
WHERE NOT (l."IsDeleted")
ORDER BY l."Id", t."Id", t0."Id", t1."Id"
2025-06-13 08:25:09,880 [29] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:55:09.8802350Z, Method: POST, Path: /api/v1/auth/login, User: Joey
2025-06-13 08:25:09,898 [29] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
FROM "Users" AS u
WHERE NOT (u."IsDeleted")
2025-06-13 08:25:10,070 [29] INFO  LeaveManagementSystem.Services.AuthenticationService - User tony@example.com logged in successfully
2025-06-13 08:25:10,070 [29] INFO  LeaveManagementSystem.Controllers.AuthenticationController - User tony@example.com logged in successfully.
2025-06-13 08:25:30,678 [29] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:55:30.6783950Z, Method: POST, Path: /api/v1/auth/login, User: Joey
2025-06-13 08:25:30,680 [25] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
FROM "Users" AS u
WHERE NOT (u."IsDeleted")
2025-06-13 08:25:30,856 [25] INFO  LeaveManagementSystem.Services.AuthenticationService - User tony@example.com logged in successfully
2025-06-13 08:25:30,856 [25] INFO  LeaveManagementSystem.Controllers.AuthenticationController - User tony@example.com logged in successfully.
2025-06-13 08:26:51,068 [30] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:56:51.0681610Z, Method: POST, Path: /api/v1/leave-requests, User: Tony
2025-06-13 08:26:51,069 [30] INFO  LeaveManagementSystem.Controllers.LeaveRequestController - Creating new leave request.
2025-06-13 08:26:51,074 [30] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (5ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."LeaveTypeId", t0."TotalLeaves", t0."UsedLeaves", t0."UserId", t0."Id0", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted") AND u."Id" = @__key_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t1."Id" AS "Id0", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Description", t1."IsDeleted", t1."Name", t1."StandardLeaveCount", t1."UpdatedAt", t1."UpdatedBy"
    FROM "LeaveBalances" AS l
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t1 ON l."LeaveTypeId" = t1."Id"
) AS t0 ON t."Id" = t0."UserId"
ORDER BY t."Id", t0."Id"
2025-06-13 08:26:51,077 [30] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."CreatedBy", l."DeletedAt", l."Description", l."IsDeleted", l."Name", l."StandardLeaveCount", l."UpdatedAt", l."UpdatedBy"
FROM "LeaveTypes" AS l
WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
LIMIT 1
2025-06-13 08:26:51,083 [28] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."DeletedAt", l."EndDate", l."IsDeleted", l."LeaveTypeId", l."Reason", l."ReviewedById", l."StartDate", l."Status", l."UpdatedAt", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy", t1."Id", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Email", t1."Gender", t1."IsActive", t1."IsDeleted", t1."LastLoginAt", t1."PasswordHash", t1."Role", t1."Username", t2."Id", t2."DeletedAt", t2."FileContent", t2."FileName", t2."IsDeleted", t2."LeaveRequestId", t2."UploadedAt"
FROM "LeaveRequests" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
LEFT JOIN (
    SELECT u0."Id", u0."CreatedAt", u0."CreatedBy", u0."DeletedAt", u0."Email", u0."Gender", u0."IsActive", u0."IsDeleted", u0."LastLoginAt", u0."PasswordHash", u0."Role", u0."Username"
    FROM "Users" AS u0
    WHERE NOT (u0."IsDeleted")
) AS t1 ON l."ReviewedById" = t1."Id"
LEFT JOIN (
    SELECT l1."Id", l1."DeletedAt", l1."FileContent", l1."FileName", l1."IsDeleted", l1."LeaveRequestId", l1."UploadedAt"
    FROM "LeaveAttachments" AS l1
    WHERE NOT (l1."IsDeleted")
) AS t2 ON l."Id" = t2."LeaveRequestId"
WHERE NOT (l."IsDeleted")
ORDER BY l."Id", t."Id", t0."Id", t1."Id"
2025-06-13 08:26:51,085 [28] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."CreatedBy", l."DeletedAt", l."Description", l."IsDeleted", l."Name", l."StandardLeaveCount", l."UpdatedAt", l."UpdatedBy"
FROM "LeaveTypes" AS l
WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
LIMIT 1
2025-06-13 08:26:51,088 [31] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Boolean), @p5='?' (DbType = Guid), @p6='?', @p7='?' (DbType = Guid), @p8='?' (DbType = DateTime), @p9='?', @p10='?' (DbType = DateTime), @p11='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
INSERT INTO "LeaveRequests" ("Id", "CreatedAt", "DeletedAt", "EndDate", "IsDeleted", "LeaveTypeId", "Reason", "ReviewedById", "StartDate", "Status", "UpdatedAt", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-13 08:26:51,092 [30] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Guid), @p4='?', @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime), @p7='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
INSERT INTO "AuditLogs" ("Id", "Action", "DeletedAt", "EntityId", "EntityType", "IsDeleted", "Timestamp", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-06-13 08:26:51,097 [31] ERROR Microsoft.EntityFrameworkCore.Query - An exception occurred while iterating over the results of a query for context type 'LeaveManagementSystem.Contexts.ApplicationDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-06-13 08:26:51,099 [31] ERROR LeaveManagementSystem.Controllers.LeaveRequestController - Error creating leave request.
System.Exception: Failed to create leave request A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
 ---> System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at LeaveManagementSystem.Repositories.LeaveRequestRepository.Get(Guid key) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Repositories/LeaveRequestRepository.cs:line 19
   at LeaveManagementSystem.Services.LeaveRequestService.CreateAsync(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 277
   --- End of inner exception stack trace ---
   at LeaveManagementSystem.Services.LeaveRequestService.CreateAsync(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 282
   at LeaveManagementSystem.Controllers.LeaveRequestController.Create(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Controllers/LeaveRequestController.cs:line 79
2025-06-13 08:26:59,173 [28] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:56:59.1730010Z, Method: POST, Path: /api/v1/leave-requests, User: Tony
2025-06-13 08:26:59,174 [28] INFO  LeaveManagementSystem.Controllers.LeaveRequestController - Creating new leave request.
2025-06-13 08:26:59,177 [30] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."LeaveTypeId", t0."TotalLeaves", t0."UsedLeaves", t0."UserId", t0."Id0", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted") AND u."Id" = @__key_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t1."Id" AS "Id0", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Description", t1."IsDeleted", t1."Name", t1."StandardLeaveCount", t1."UpdatedAt", t1."UpdatedBy"
    FROM "LeaveBalances" AS l
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t1 ON l."LeaveTypeId" = t1."Id"
) AS t0 ON t."Id" = t0."UserId"
ORDER BY t."Id", t0."Id"
2025-06-13 08:26:59,179 [31] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."CreatedBy", l."DeletedAt", l."Description", l."IsDeleted", l."Name", l."StandardLeaveCount", l."UpdatedAt", l."UpdatedBy"
FROM "LeaveTypes" AS l
WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
LIMIT 1
2025-06-13 08:26:59,181 [30] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."DeletedAt", l."EndDate", l."IsDeleted", l."LeaveTypeId", l."Reason", l."ReviewedById", l."StartDate", l."Status", l."UpdatedAt", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy", t1."Id", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Email", t1."Gender", t1."IsActive", t1."IsDeleted", t1."LastLoginAt", t1."PasswordHash", t1."Role", t1."Username", t2."Id", t2."DeletedAt", t2."FileContent", t2."FileName", t2."IsDeleted", t2."LeaveRequestId", t2."UploadedAt"
FROM "LeaveRequests" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
LEFT JOIN (
    SELECT u0."Id", u0."CreatedAt", u0."CreatedBy", u0."DeletedAt", u0."Email", u0."Gender", u0."IsActive", u0."IsDeleted", u0."LastLoginAt", u0."PasswordHash", u0."Role", u0."Username"
    FROM "Users" AS u0
    WHERE NOT (u0."IsDeleted")
) AS t1 ON l."ReviewedById" = t1."Id"
LEFT JOIN (
    SELECT l1."Id", l1."DeletedAt", l1."FileContent", l1."FileName", l1."IsDeleted", l1."LeaveRequestId", l1."UploadedAt"
    FROM "LeaveAttachments" AS l1
    WHERE NOT (l1."IsDeleted")
) AS t2 ON l."Id" = t2."LeaveRequestId"
WHERE NOT (l."IsDeleted")
ORDER BY l."Id", t."Id", t0."Id", t1."Id"
2025-06-13 08:26:59,181 [30] ERROR LeaveManagementSystem.Controllers.LeaveRequestController - Error creating leave request.
System.Exception: Failed to create leave request You have already applied for leave in this date range.
 ---> System.InvalidOperationException: You have already applied for leave in this date range.
   at LeaveManagementSystem.Services.LeaveRequestService.CreateAsync(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 225
   --- End of inner exception stack trace ---
   at LeaveManagementSystem.Services.LeaveRequestService.CreateAsync(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 282
   at LeaveManagementSystem.Controllers.LeaveRequestController.Create(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Controllers/LeaveRequestController.cs:line 79
2025-06-13 08:27:14,893 [31] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:57:14.8934260Z, Method: GET, Path: /api/v1/leave-requests, User: Tony
2025-06-13 08:27:14,893 [31] INFO  LeaveManagementSystem.Controllers.LeaveRequestController - Fetching all leave requests.
2025-06-13 08:27:14,896 [30] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."DeletedAt", l."EndDate", l."IsDeleted", l."LeaveTypeId", l."Reason", l."ReviewedById", l."StartDate", l."Status", l."UpdatedAt", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy", t1."Id", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Email", t1."Gender", t1."IsActive", t1."IsDeleted", t1."LastLoginAt", t1."PasswordHash", t1."Role", t1."Username", t2."Id", t2."DeletedAt", t2."FileContent", t2."FileName", t2."IsDeleted", t2."LeaveRequestId", t2."UploadedAt"
FROM "LeaveRequests" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
LEFT JOIN (
    SELECT u0."Id", u0."CreatedAt", u0."CreatedBy", u0."DeletedAt", u0."Email", u0."Gender", u0."IsActive", u0."IsDeleted", u0."LastLoginAt", u0."PasswordHash", u0."Role", u0."Username"
    FROM "Users" AS u0
    WHERE NOT (u0."IsDeleted")
) AS t1 ON l."ReviewedById" = t1."Id"
LEFT JOIN (
    SELECT l1."Id", l1."DeletedAt", l1."FileContent", l1."FileName", l1."IsDeleted", l1."LeaveRequestId", l1."UploadedAt"
    FROM "LeaveAttachments" AS l1
    WHERE NOT (l1."IsDeleted")
) AS t2 ON l."Id" = t2."LeaveRequestId"
WHERE NOT (l."IsDeleted")
ORDER BY l."Id", t."Id", t0."Id", t1."Id"
2025-06-13 08:27:49,440 [32] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:57:49.4403980Z, Method: POST, Path: /api/v1/auth/login, User: Tony
2025-06-13 08:27:49,442 [32] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
FROM "Users" AS u
WHERE NOT (u."IsDeleted")
2025-06-13 08:27:49,613 [32] INFO  LeaveManagementSystem.Services.AuthenticationService - User chandler@example.com logged in successfully
2025-06-13 08:27:49,613 [32] INFO  LeaveManagementSystem.Controllers.AuthenticationController - User chandler@example.com logged in successfully.
2025-06-13 08:28:20,484 [32] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:58:20.4848360Z, Method: POST, Path: /api/v1/leave-requests, User: Chandler
2025-06-13 08:28:20,486 [32] INFO  LeaveManagementSystem.Controllers.LeaveRequestController - Creating new leave request.
2025-06-13 08:28:20,488 [32] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."LeaveTypeId", t0."TotalLeaves", t0."UsedLeaves", t0."UserId", t0."Id0", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted") AND u."Id" = @__key_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t1."Id" AS "Id0", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Description", t1."IsDeleted", t1."Name", t1."StandardLeaveCount", t1."UpdatedAt", t1."UpdatedBy"
    FROM "LeaveBalances" AS l
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t1 ON l."LeaveTypeId" = t1."Id"
) AS t0 ON t."Id" = t0."UserId"
ORDER BY t."Id", t0."Id"
2025-06-13 08:28:20,490 [32] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."CreatedBy", l."DeletedAt", l."Description", l."IsDeleted", l."Name", l."StandardLeaveCount", l."UpdatedAt", l."UpdatedBy"
FROM "LeaveTypes" AS l
WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
LIMIT 1
2025-06-13 08:28:20,494 [34] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."DeletedAt", l."EndDate", l."IsDeleted", l."LeaveTypeId", l."Reason", l."ReviewedById", l."StartDate", l."Status", l."UpdatedAt", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy", t1."Id", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Email", t1."Gender", t1."IsActive", t1."IsDeleted", t1."LastLoginAt", t1."PasswordHash", t1."Role", t1."Username", t2."Id", t2."DeletedAt", t2."FileContent", t2."FileName", t2."IsDeleted", t2."LeaveRequestId", t2."UploadedAt"
FROM "LeaveRequests" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
LEFT JOIN (
    SELECT u0."Id", u0."CreatedAt", u0."CreatedBy", u0."DeletedAt", u0."Email", u0."Gender", u0."IsActive", u0."IsDeleted", u0."LastLoginAt", u0."PasswordHash", u0."Role", u0."Username"
    FROM "Users" AS u0
    WHERE NOT (u0."IsDeleted")
) AS t1 ON l."ReviewedById" = t1."Id"
LEFT JOIN (
    SELECT l1."Id", l1."DeletedAt", l1."FileContent", l1."FileName", l1."IsDeleted", l1."LeaveRequestId", l1."UploadedAt"
    FROM "LeaveAttachments" AS l1
    WHERE NOT (l1."IsDeleted")
) AS t2 ON l."Id" = t2."LeaveRequestId"
WHERE NOT (l."IsDeleted")
ORDER BY l."Id", t."Id", t0."Id", t1."Id"
2025-06-13 08:28:20,495 [23] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (0ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."CreatedBy", l."DeletedAt", l."Description", l."IsDeleted", l."Name", l."StandardLeaveCount", l."UpdatedAt", l."UpdatedBy"
FROM "LeaveTypes" AS l
WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
LIMIT 1
2025-06-13 08:28:20,497 [34] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Boolean), @p5='?' (DbType = Guid), @p6='?', @p7='?' (DbType = Guid), @p8='?' (DbType = DateTime), @p9='?', @p10='?' (DbType = DateTime), @p11='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
INSERT INTO "LeaveRequests" ("Id", "CreatedAt", "DeletedAt", "EndDate", "IsDeleted", "LeaveTypeId", "Reason", "ReviewedById", "StartDate", "Status", "UpdatedAt", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-13 08:28:20,497 [34] ERROR Microsoft.EntityFrameworkCore.Query - An exception occurred while iterating over the results of a query for context type 'LeaveManagementSystem.Contexts.ApplicationDbContext'.
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-06-13 08:28:20,497 [23] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Guid), @p4='?', @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime), @p7='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
INSERT INTO "AuditLogs" ("Id", "Action", "DeletedAt", "EntityId", "EntityType", "IsDeleted", "Timestamp", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-06-13 08:28:20,498 [34] ERROR LeaveManagementSystem.Controllers.LeaveRequestController - Error creating leave request.
System.Exception: Failed to create leave request A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
 ---> System.InvalidOperationException: A second operation was started on this context instance before a previous operation completed. This is usually caused by different threads concurrently using the same instance of DbContext. For more information on how to avoid threading issues with DbContext, see https://go.microsoft.com/fwlink/?linkid=2097913.
   at Microsoft.EntityFrameworkCore.Infrastructure.Internal.ConcurrencyDetector.EnterCriticalSection()
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at LeaveManagementSystem.Repositories.LeaveRequestRepository.Get(Guid key) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Repositories/LeaveRequestRepository.cs:line 19
   at LeaveManagementSystem.Services.LeaveRequestService.CreateAsync(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 277
   --- End of inner exception stack trace ---
   at LeaveManagementSystem.Services.LeaveRequestService.CreateAsync(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 282
   at LeaveManagementSystem.Controllers.LeaveRequestController.Create(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Controllers/LeaveRequestController.cs:line 79
2025-06-13 08:28:24,517 [35] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:58:24.5178740Z, Method: POST, Path: /api/v1/leave-requests, User: Chandler
2025-06-13 08:28:24,518 [35] INFO  LeaveManagementSystem.Controllers.LeaveRequestController - Creating new leave request.
2025-06-13 08:28:24,520 [35] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."LeaveTypeId", t0."TotalLeaves", t0."UsedLeaves", t0."UserId", t0."Id0", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted") AND u."Id" = @__key_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t1."Id" AS "Id0", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Description", t1."IsDeleted", t1."Name", t1."StandardLeaveCount", t1."UpdatedAt", t1."UpdatedBy"
    FROM "LeaveBalances" AS l
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t1 ON l."LeaveTypeId" = t1."Id"
) AS t0 ON t."Id" = t0."UserId"
ORDER BY t."Id", t0."Id"
2025-06-13 08:28:24,522 [23] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."CreatedBy", l."DeletedAt", l."Description", l."IsDeleted", l."Name", l."StandardLeaveCount", l."UpdatedAt", l."UpdatedBy"
FROM "LeaveTypes" AS l
WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
LIMIT 1
2025-06-13 08:28:24,525 [35] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."DeletedAt", l."EndDate", l."IsDeleted", l."LeaveTypeId", l."Reason", l."ReviewedById", l."StartDate", l."Status", l."UpdatedAt", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy", t1."Id", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Email", t1."Gender", t1."IsActive", t1."IsDeleted", t1."LastLoginAt", t1."PasswordHash", t1."Role", t1."Username", t2."Id", t2."DeletedAt", t2."FileContent", t2."FileName", t2."IsDeleted", t2."LeaveRequestId", t2."UploadedAt"
FROM "LeaveRequests" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
LEFT JOIN (
    SELECT u0."Id", u0."CreatedAt", u0."CreatedBy", u0."DeletedAt", u0."Email", u0."Gender", u0."IsActive", u0."IsDeleted", u0."LastLoginAt", u0."PasswordHash", u0."Role", u0."Username"
    FROM "Users" AS u0
    WHERE NOT (u0."IsDeleted")
) AS t1 ON l."ReviewedById" = t1."Id"
LEFT JOIN (
    SELECT l1."Id", l1."DeletedAt", l1."FileContent", l1."FileName", l1."IsDeleted", l1."LeaveRequestId", l1."UploadedAt"
    FROM "LeaveAttachments" AS l1
    WHERE NOT (l1."IsDeleted")
) AS t2 ON l."Id" = t2."LeaveRequestId"
WHERE NOT (l."IsDeleted")
ORDER BY l."Id", t."Id", t0."Id", t1."Id"
2025-06-13 08:28:24,525 [35] ERROR LeaveManagementSystem.Controllers.LeaveRequestController - Error creating leave request.
System.Exception: Failed to create leave request You have already applied for leave in this date range.
 ---> System.InvalidOperationException: You have already applied for leave in this date range.
   at LeaveManagementSystem.Services.LeaveRequestService.CreateAsync(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 225
   --- End of inner exception stack trace ---
   at LeaveManagementSystem.Services.LeaveRequestService.CreateAsync(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 282
   at LeaveManagementSystem.Controllers.LeaveRequestController.Create(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Controllers/LeaveRequestController.cs:line 79
2025-06-13 08:29:40,902 [33] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T02:59:40.9021800Z, Method: POST, Path: /api/v1/leave-requests, User: Chandler
2025-06-13 08:29:40,903 [33] INFO  LeaveManagementSystem.Controllers.LeaveRequestController - Creating new leave request.
2025-06-13 08:29:40,913 [36] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (3ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."LeaveTypeId", t0."TotalLeaves", t0."UsedLeaves", t0."UserId", t0."Id0", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted") AND u."Id" = @__key_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t1."Id" AS "Id0", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Description", t1."IsDeleted", t1."Name", t1."StandardLeaveCount", t1."UpdatedAt", t1."UpdatedBy"
    FROM "LeaveBalances" AS l
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t1 ON l."LeaveTypeId" = t1."Id"
) AS t0 ON t."Id" = t0."UserId"
ORDER BY t."Id", t0."Id"
2025-06-13 08:29:40,914 [23] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."CreatedBy", l."DeletedAt", l."Description", l."IsDeleted", l."Name", l."StandardLeaveCount", l."UpdatedAt", l."UpdatedBy"
FROM "LeaveTypes" AS l
WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
LIMIT 1
2025-06-13 08:29:40,916 [23] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."DeletedAt", l."EndDate", l."IsDeleted", l."LeaveTypeId", l."Reason", l."ReviewedById", l."StartDate", l."Status", l."UpdatedAt", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy", t1."Id", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Email", t1."Gender", t1."IsActive", t1."IsDeleted", t1."LastLoginAt", t1."PasswordHash", t1."Role", t1."Username", t2."Id", t2."DeletedAt", t2."FileContent", t2."FileName", t2."IsDeleted", t2."LeaveRequestId", t2."UploadedAt"
FROM "LeaveRequests" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
LEFT JOIN (
    SELECT u0."Id", u0."CreatedAt", u0."CreatedBy", u0."DeletedAt", u0."Email", u0."Gender", u0."IsActive", u0."IsDeleted", u0."LastLoginAt", u0."PasswordHash", u0."Role", u0."Username"
    FROM "Users" AS u0
    WHERE NOT (u0."IsDeleted")
) AS t1 ON l."ReviewedById" = t1."Id"
LEFT JOIN (
    SELECT l1."Id", l1."DeletedAt", l1."FileContent", l1."FileName", l1."IsDeleted", l1."LeaveRequestId", l1."UploadedAt"
    FROM "LeaveAttachments" AS l1
    WHERE NOT (l1."IsDeleted")
) AS t2 ON l."Id" = t2."LeaveRequestId"
WHERE NOT (l."IsDeleted")
ORDER BY l."Id", t."Id", t0."Id", t1."Id"
2025-06-13 08:29:40,917 [23] ERROR LeaveManagementSystem.Controllers.LeaveRequestController - Error creating leave request.
System.Exception: Failed to create leave request You have already applied for leave in this date range.
 ---> System.InvalidOperationException: You have already applied for leave in this date range.
   at LeaveManagementSystem.Services.LeaveRequestService.CreateAsync(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 225
   --- End of inner exception stack trace ---
   at LeaveManagementSystem.Services.LeaveRequestService.CreateAsync(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 282
   at LeaveManagementSystem.Controllers.LeaveRequestController.Create(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Controllers/LeaveRequestController.cs:line 79
2025-06-13 08:33:21,680 [38] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T03:03:21.6797130Z, Method: GET, Path: /api/v1/leave-requests/f137b974-0d82-42f4-abae-6660f7d0393c, User: Chandler
2025-06-13 08:33:21,690 [38] INFO  LeaveManagementSystem.Controllers.LeaveRequestController - Fetching leave request with ID: f137b974-0d82-42f4-abae-6660f7d0393c
2025-06-13 08:33:21,721 [40] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (14ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t2."Id", t2."CreatedAt", t2."DeletedAt", t2."EndDate", t2."IsDeleted", t2."LeaveTypeId", t2."Reason", t2."ReviewedById", t2."StartDate", t2."Status", t2."UpdatedAt", t2."UserId", t2."Id0", t2."CreatedAt0", t2."CreatedBy", t2."DeletedAt0", t2."Email", t2."Gender", t2."IsActive", t2."IsDeleted0", t2."LastLoginAt", t2."PasswordHash", t2."Role", t2."Username", t2."Id1", t2."CreatedAt1", t2."CreatedBy0", t2."DeletedAt1", t2."Description", t2."IsDeleted1", t2."Name", t2."StandardLeaveCount", t2."UpdatedAt0", t2."UpdatedBy", t2."Id2", t2."CreatedAt2", t2."CreatedBy1", t2."DeletedAt2", t2."Email0", t2."Gender0", t2."IsActive0", t2."IsDeleted2", t2."LastLoginAt0", t2."PasswordHash0", t2."Role0", t2."Username0", t3."Id", t3."DeletedAt", t3."FileContent", t3."FileName", t3."IsDeleted", t3."LeaveRequestId", t3."UploadedAt"
FROM (
    SELECT l."Id", l."CreatedAt", l."DeletedAt", l."EndDate", l."IsDeleted", l."LeaveTypeId", l."Reason", l."ReviewedById", l."StartDate", l."Status", l."UpdatedAt", l."UserId", t."Id" AS "Id0", t."CreatedAt" AS "CreatedAt0", t."CreatedBy", t."DeletedAt" AS "DeletedAt0", t."Email", t."Gender", t."IsActive", t."IsDeleted" AS "IsDeleted0", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id" AS "Id1", t0."CreatedAt" AS "CreatedAt1", t0."CreatedBy" AS "CreatedBy0", t0."DeletedAt" AS "DeletedAt1", t0."Description", t0."IsDeleted" AS "IsDeleted1", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt" AS "UpdatedAt0", t0."UpdatedBy", t1."Id" AS "Id2", t1."CreatedAt" AS "CreatedAt2", t1."CreatedBy" AS "CreatedBy1", t1."DeletedAt" AS "DeletedAt2", t1."Email" AS "Email0", t1."Gender" AS "Gender0", t1."IsActive" AS "IsActive0", t1."IsDeleted" AS "IsDeleted2", t1."LastLoginAt" AS "LastLoginAt0", t1."PasswordHash" AS "PasswordHash0", t1."Role" AS "Role0", t1."Username" AS "Username0"
    FROM "LeaveRequests" AS l
    INNER JOIN (
        SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
        FROM "Users" AS u
        WHERE NOT (u."IsDeleted")
    ) AS t ON l."UserId" = t."Id"
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t0 ON l."LeaveTypeId" = t0."Id"
    LEFT JOIN (
        SELECT u0."Id", u0."CreatedAt", u0."CreatedBy", u0."DeletedAt", u0."Email", u0."Gender", u0."IsActive", u0."IsDeleted", u0."LastLoginAt", u0."PasswordHash", u0."Role", u0."Username"
        FROM "Users" AS u0
        WHERE NOT (u0."IsDeleted")
    ) AS t1 ON l."ReviewedById" = t1."Id"
    WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
    LIMIT 1
) AS t2
LEFT JOIN (
    SELECT l1."Id", l1."DeletedAt", l1."FileContent", l1."FileName", l1."IsDeleted", l1."LeaveRequestId", l1."UploadedAt"
    FROM "LeaveAttachments" AS l1
    WHERE NOT (l1."IsDeleted")
) AS t3 ON t2."Id" = t3."LeaveRequestId"
ORDER BY t2."Id", t2."Id0", t2."Id1", t2."Id2"
2025-06-13 08:34:05,792 [40] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T03:04:05.7920870Z, Method: POST, Path: /api/v1/auth/login, User: Chandler
2025-06-13 08:34:05,803 [23] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
FROM "Users" AS u
WHERE NOT (u."IsDeleted")
2025-06-13 08:34:05,970 [23] INFO  LeaveManagementSystem.Services.AuthenticationService - User chandler@example.com logged in successfully
2025-06-13 08:34:05,970 [23] INFO  LeaveManagementSystem.Controllers.AuthenticationController - User chandler@example.com logged in successfully.
2025-06-13 08:34:13,715 [40] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T03:04:13.7155800Z, Method: PUT, Path: /api/v1/leave-requests/f137b974-0d82-42f4-abae-6660f7d0393c/status, User: Chandler
2025-06-13 08:34:13,735 [40] INFO  LeaveManagementSystem.Controllers.LeaveRequestController - Updating leave request status for ID: f137b974-0d82-42f4-abae-6660f7d0393c by approver ID: 0728af92-6d38-4547-be7c-bca1f3dcdcc6
2025-06-13 08:34:13,741 [40] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (4ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t2."Id", t2."CreatedAt", t2."DeletedAt", t2."EndDate", t2."IsDeleted", t2."LeaveTypeId", t2."Reason", t2."ReviewedById", t2."StartDate", t2."Status", t2."UpdatedAt", t2."UserId", t2."Id0", t2."CreatedAt0", t2."CreatedBy", t2."DeletedAt0", t2."Email", t2."Gender", t2."IsActive", t2."IsDeleted0", t2."LastLoginAt", t2."PasswordHash", t2."Role", t2."Username", t2."Id1", t2."CreatedAt1", t2."CreatedBy0", t2."DeletedAt1", t2."Description", t2."IsDeleted1", t2."Name", t2."StandardLeaveCount", t2."UpdatedAt0", t2."UpdatedBy", t2."Id2", t2."CreatedAt2", t2."CreatedBy1", t2."DeletedAt2", t2."Email0", t2."Gender0", t2."IsActive0", t2."IsDeleted2", t2."LastLoginAt0", t2."PasswordHash0", t2."Role0", t2."Username0", t3."Id", t3."DeletedAt", t3."FileContent", t3."FileName", t3."IsDeleted", t3."LeaveRequestId", t3."UploadedAt"
FROM (
    SELECT l."Id", l."CreatedAt", l."DeletedAt", l."EndDate", l."IsDeleted", l."LeaveTypeId", l."Reason", l."ReviewedById", l."StartDate", l."Status", l."UpdatedAt", l."UserId", t."Id" AS "Id0", t."CreatedAt" AS "CreatedAt0", t."CreatedBy", t."DeletedAt" AS "DeletedAt0", t."Email", t."Gender", t."IsActive", t."IsDeleted" AS "IsDeleted0", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id" AS "Id1", t0."CreatedAt" AS "CreatedAt1", t0."CreatedBy" AS "CreatedBy0", t0."DeletedAt" AS "DeletedAt1", t0."Description", t0."IsDeleted" AS "IsDeleted1", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt" AS "UpdatedAt0", t0."UpdatedBy", t1."Id" AS "Id2", t1."CreatedAt" AS "CreatedAt2", t1."CreatedBy" AS "CreatedBy1", t1."DeletedAt" AS "DeletedAt2", t1."Email" AS "Email0", t1."Gender" AS "Gender0", t1."IsActive" AS "IsActive0", t1."IsDeleted" AS "IsDeleted2", t1."LastLoginAt" AS "LastLoginAt0", t1."PasswordHash" AS "PasswordHash0", t1."Role" AS "Role0", t1."Username" AS "Username0"
    FROM "LeaveRequests" AS l
    INNER JOIN (
        SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
        FROM "Users" AS u
        WHERE NOT (u."IsDeleted")
    ) AS t ON l."UserId" = t."Id"
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t0 ON l."LeaveTypeId" = t0."Id"
    LEFT JOIN (
        SELECT u0."Id", u0."CreatedAt", u0."CreatedBy", u0."DeletedAt", u0."Email", u0."Gender", u0."IsActive", u0."IsDeleted", u0."LastLoginAt", u0."PasswordHash", u0."Role", u0."Username"
        FROM "Users" AS u0
        WHERE NOT (u0."IsDeleted")
    ) AS t1 ON l."ReviewedById" = t1."Id"
    WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
    LIMIT 1
) AS t2
LEFT JOIN (
    SELECT l1."Id", l1."DeletedAt", l1."FileContent", l1."FileName", l1."IsDeleted", l1."LeaveRequestId", l1."UploadedAt"
    FROM "LeaveAttachments" AS l1
    WHERE NOT (l1."IsDeleted")
) AS t3 ON t2."Id" = t3."LeaveRequestId"
ORDER BY t2."Id", t2."Id0", t2."Id1", t2."Id2"
2025-06-13 08:34:13,746 [40] ERROR LeaveManagementSystem.Controllers.LeaveRequestController - Error updating leave request status for ID: f137b974-0d82-42f4-abae-6660f7d0393c
System.Exception: Failed to update leave request status You cannot approve or reject your own leave request.
 ---> System.InvalidOperationException: You cannot approve or reject your own leave request.
   at LeaveManagementSystem.Services.LeaveRequestService.UpdateStatusAsync(Guid id, String status, Guid approverId) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 300
   --- End of inner exception stack trace ---
   at LeaveManagementSystem.Services.LeaveRequestService.UpdateStatusAsync(Guid id, String status, Guid approverId) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 334
   at LeaveManagementSystem.Controllers.LeaveRequestController.UpdateStatus(Guid id, UpdateLeaveRequestStatusDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Controllers/LeaveRequestController.cs:line 110
2025-06-13 08:34:55,382 [41] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T03:04:55.3825630Z, Method: POST, Path: /api/v1/auth/login, User: Chandler
2025-06-13 08:34:55,385 [41] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
FROM "Users" AS u
WHERE NOT (u."IsDeleted")
2025-06-13 08:34:55,556 [41] INFO  LeaveManagementSystem.Services.AuthenticationService - User joeytrib@example.com logged in successfully
2025-06-13 08:34:55,556 [41] INFO  LeaveManagementSystem.Controllers.AuthenticationController - User joeytrib@example.com logged in successfully.
2025-06-13 08:35:41,682 [40] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T03:05:41.6819900Z, Method: POST, Path: /api/v1/auth/login, User: Chandler
2025-06-13 08:35:41,689 [40] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
FROM "Users" AS u
WHERE NOT (u."IsDeleted")
2025-06-13 08:35:41,858 [40] INFO  LeaveManagementSystem.Services.AuthenticationService - User tony@example.com logged in successfully
2025-06-13 08:35:41,858 [40] INFO  LeaveManagementSystem.Controllers.AuthenticationController - User tony@example.com logged in successfully.
2025-06-13 08:36:00,181 [39] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T03:06:00.1813740Z, Method: PUT, Path: /api/v1/leave-requests/f137b974-0d82-42f4-abae-6660f7d0393c/status, User: Tony
2025-06-13 08:36:00,184 [39] INFO  LeaveManagementSystem.Controllers.LeaveRequestController - Updating leave request status for ID: f137b974-0d82-42f4-abae-6660f7d0393c by approver ID: 6e623a94-ef9f-4ffe-ba4e-24aafd1d5aa2
2025-06-13 08:36:00,190 [39] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (3ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t2."Id", t2."CreatedAt", t2."DeletedAt", t2."EndDate", t2."IsDeleted", t2."LeaveTypeId", t2."Reason", t2."ReviewedById", t2."StartDate", t2."Status", t2."UpdatedAt", t2."UserId", t2."Id0", t2."CreatedAt0", t2."CreatedBy", t2."DeletedAt0", t2."Email", t2."Gender", t2."IsActive", t2."IsDeleted0", t2."LastLoginAt", t2."PasswordHash", t2."Role", t2."Username", t2."Id1", t2."CreatedAt1", t2."CreatedBy0", t2."DeletedAt1", t2."Description", t2."IsDeleted1", t2."Name", t2."StandardLeaveCount", t2."UpdatedAt0", t2."UpdatedBy", t2."Id2", t2."CreatedAt2", t2."CreatedBy1", t2."DeletedAt2", t2."Email0", t2."Gender0", t2."IsActive0", t2."IsDeleted2", t2."LastLoginAt0", t2."PasswordHash0", t2."Role0", t2."Username0", t3."Id", t3."DeletedAt", t3."FileContent", t3."FileName", t3."IsDeleted", t3."LeaveRequestId", t3."UploadedAt"
FROM (
    SELECT l."Id", l."CreatedAt", l."DeletedAt", l."EndDate", l."IsDeleted", l."LeaveTypeId", l."Reason", l."ReviewedById", l."StartDate", l."Status", l."UpdatedAt", l."UserId", t."Id" AS "Id0", t."CreatedAt" AS "CreatedAt0", t."CreatedBy", t."DeletedAt" AS "DeletedAt0", t."Email", t."Gender", t."IsActive", t."IsDeleted" AS "IsDeleted0", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id" AS "Id1", t0."CreatedAt" AS "CreatedAt1", t0."CreatedBy" AS "CreatedBy0", t0."DeletedAt" AS "DeletedAt1", t0."Description", t0."IsDeleted" AS "IsDeleted1", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt" AS "UpdatedAt0", t0."UpdatedBy", t1."Id" AS "Id2", t1."CreatedAt" AS "CreatedAt2", t1."CreatedBy" AS "CreatedBy1", t1."DeletedAt" AS "DeletedAt2", t1."Email" AS "Email0", t1."Gender" AS "Gender0", t1."IsActive" AS "IsActive0", t1."IsDeleted" AS "IsDeleted2", t1."LastLoginAt" AS "LastLoginAt0", t1."PasswordHash" AS "PasswordHash0", t1."Role" AS "Role0", t1."Username" AS "Username0"
    FROM "LeaveRequests" AS l
    INNER JOIN (
        SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
        FROM "Users" AS u
        WHERE NOT (u."IsDeleted")
    ) AS t ON l."UserId" = t."Id"
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t0 ON l."LeaveTypeId" = t0."Id"
    LEFT JOIN (
        SELECT u0."Id", u0."CreatedAt", u0."CreatedBy", u0."DeletedAt", u0."Email", u0."Gender", u0."IsActive", u0."IsDeleted", u0."LastLoginAt", u0."PasswordHash", u0."Role", u0."Username"
        FROM "Users" AS u0
        WHERE NOT (u0."IsDeleted")
    ) AS t1 ON l."ReviewedById" = t1."Id"
    WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
    LIMIT 1
) AS t2
LEFT JOIN (
    SELECT l1."Id", l1."DeletedAt", l1."FileContent", l1."FileName", l1."IsDeleted", l1."LeaveRequestId", l1."UploadedAt"
    FROM "LeaveAttachments" AS l1
    WHERE NOT (l1."IsDeleted")
) AS t3 ON t2."Id" = t3."LeaveRequestId"
ORDER BY t2."Id", t2."Id0", t2."Id1", t2."Id2"
2025-06-13 08:36:00,212 [39] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM "LeaveBalances" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
2025-06-13 08:36:00,222 [41] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM "LeaveBalances" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
WHERE l."Id" = @__key_0
LIMIT 1
2025-06-13 08:36:00,252 [39] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (8ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = Int32), @p5='?' (DbType = Guid), @p2='?' (DbType = Guid), @p3='?', @p4='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
UPDATE "LeaveBalances" SET "UsedLeaves" = @p0
WHERE "Id" = @p1;
UPDATE "LeaveRequests" SET "ReviewedById" = @p2, "Status" = @p3, "UpdatedAt" = @p4
WHERE "Id" = @p5;
2025-06-13 08:36:00,265 [41] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t2."Id", t2."CreatedAt", t2."DeletedAt", t2."EndDate", t2."IsDeleted", t2."LeaveTypeId", t2."Reason", t2."ReviewedById", t2."StartDate", t2."Status", t2."UpdatedAt", t2."UserId", t2."Id0", t2."CreatedAt0", t2."CreatedBy", t2."DeletedAt0", t2."Email", t2."Gender", t2."IsActive", t2."IsDeleted0", t2."LastLoginAt", t2."PasswordHash", t2."Role", t2."Username", t2."Id1", t2."CreatedAt1", t2."CreatedBy0", t2."DeletedAt1", t2."Description", t2."IsDeleted1", t2."Name", t2."StandardLeaveCount", t2."UpdatedAt0", t2."UpdatedBy", t2."Id2", t2."CreatedAt2", t2."CreatedBy1", t2."DeletedAt2", t2."Email0", t2."Gender0", t2."IsActive0", t2."IsDeleted2", t2."LastLoginAt0", t2."PasswordHash0", t2."Role0", t2."Username0", t3."Id", t3."DeletedAt", t3."FileContent", t3."FileName", t3."IsDeleted", t3."LeaveRequestId", t3."UploadedAt"
FROM (
    SELECT l."Id", l."CreatedAt", l."DeletedAt", l."EndDate", l."IsDeleted", l."LeaveTypeId", l."Reason", l."ReviewedById", l."StartDate", l."Status", l."UpdatedAt", l."UserId", t."Id" AS "Id0", t."CreatedAt" AS "CreatedAt0", t."CreatedBy", t."DeletedAt" AS "DeletedAt0", t."Email", t."Gender", t."IsActive", t."IsDeleted" AS "IsDeleted0", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id" AS "Id1", t0."CreatedAt" AS "CreatedAt1", t0."CreatedBy" AS "CreatedBy0", t0."DeletedAt" AS "DeletedAt1", t0."Description", t0."IsDeleted" AS "IsDeleted1", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt" AS "UpdatedAt0", t0."UpdatedBy", t1."Id" AS "Id2", t1."CreatedAt" AS "CreatedAt2", t1."CreatedBy" AS "CreatedBy1", t1."DeletedAt" AS "DeletedAt2", t1."Email" AS "Email0", t1."Gender" AS "Gender0", t1."IsActive" AS "IsActive0", t1."IsDeleted" AS "IsDeleted2", t1."LastLoginAt" AS "LastLoginAt0", t1."PasswordHash" AS "PasswordHash0", t1."Role" AS "Role0", t1."Username" AS "Username0"
    FROM "LeaveRequests" AS l
    INNER JOIN (
        SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
        FROM "Users" AS u
        WHERE NOT (u."IsDeleted")
    ) AS t ON l."UserId" = t."Id"
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t0 ON l."LeaveTypeId" = t0."Id"
    LEFT JOIN (
        SELECT u0."Id", u0."CreatedAt", u0."CreatedBy", u0."DeletedAt", u0."Email", u0."Gender", u0."IsActive", u0."IsDeleted", u0."LastLoginAt", u0."PasswordHash", u0."Role", u0."Username"
        FROM "Users" AS u0
        WHERE NOT (u0."IsDeleted")
    ) AS t1 ON l."ReviewedById" = t1."Id"
    WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
    LIMIT 1
) AS t2
LEFT JOIN (
    SELECT l1."Id", l1."DeletedAt", l1."FileContent", l1."FileName", l1."IsDeleted", l1."LeaveRequestId", l1."UploadedAt"
    FROM "LeaveAttachments" AS l1
    WHERE NOT (l1."IsDeleted")
) AS t3 ON t2."Id" = t3."LeaveRequestId"
ORDER BY t2."Id", t2."Id0", t2."Id1", t2."Id2"
2025-06-13 08:36:00,271 [44] ERROR Microsoft.EntityFrameworkCore.Database.Command - Failed executing DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Guid), @p4='?', @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime), @p7='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
INSERT INTO "AuditLogs" ("Id", "Action", "DeletedAt", "EntityId", "EntityType", "IsDeleted", "Timestamp", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-06-13 08:36:08,276 [40] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T03:06:08.2764480Z, Method: PUT, Path: /api/v1/leave-requests/f137b974-0d82-42f4-abae-6660f7d0393c/status, User: Tony
2025-06-13 08:36:08,277 [40] INFO  LeaveManagementSystem.Controllers.LeaveRequestController - Updating leave request status for ID: f137b974-0d82-42f4-abae-6660f7d0393c by approver ID: 6e623a94-ef9f-4ffe-ba4e-24aafd1d5aa2
2025-06-13 08:36:08,306 [39] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (12ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t2."Id", t2."CreatedAt", t2."DeletedAt", t2."EndDate", t2."IsDeleted", t2."LeaveTypeId", t2."Reason", t2."ReviewedById", t2."StartDate", t2."Status", t2."UpdatedAt", t2."UserId", t2."Id0", t2."CreatedAt0", t2."CreatedBy", t2."DeletedAt0", t2."Email", t2."Gender", t2."IsActive", t2."IsDeleted0", t2."LastLoginAt", t2."PasswordHash", t2."Role", t2."Username", t2."Id1", t2."CreatedAt1", t2."CreatedBy0", t2."DeletedAt1", t2."Description", t2."IsDeleted1", t2."Name", t2."StandardLeaveCount", t2."UpdatedAt0", t2."UpdatedBy", t2."Id2", t2."CreatedAt2", t2."CreatedBy1", t2."DeletedAt2", t2."Email0", t2."Gender0", t2."IsActive0", t2."IsDeleted2", t2."LastLoginAt0", t2."PasswordHash0", t2."Role0", t2."Username0", t3."Id", t3."DeletedAt", t3."FileContent", t3."FileName", t3."IsDeleted", t3."LeaveRequestId", t3."UploadedAt"
FROM (
    SELECT l."Id", l."CreatedAt", l."DeletedAt", l."EndDate", l."IsDeleted", l."LeaveTypeId", l."Reason", l."ReviewedById", l."StartDate", l."Status", l."UpdatedAt", l."UserId", t."Id" AS "Id0", t."CreatedAt" AS "CreatedAt0", t."CreatedBy", t."DeletedAt" AS "DeletedAt0", t."Email", t."Gender", t."IsActive", t."IsDeleted" AS "IsDeleted0", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id" AS "Id1", t0."CreatedAt" AS "CreatedAt1", t0."CreatedBy" AS "CreatedBy0", t0."DeletedAt" AS "DeletedAt1", t0."Description", t0."IsDeleted" AS "IsDeleted1", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt" AS "UpdatedAt0", t0."UpdatedBy", t1."Id" AS "Id2", t1."CreatedAt" AS "CreatedAt2", t1."CreatedBy" AS "CreatedBy1", t1."DeletedAt" AS "DeletedAt2", t1."Email" AS "Email0", t1."Gender" AS "Gender0", t1."IsActive" AS "IsActive0", t1."IsDeleted" AS "IsDeleted2", t1."LastLoginAt" AS "LastLoginAt0", t1."PasswordHash" AS "PasswordHash0", t1."Role" AS "Role0", t1."Username" AS "Username0"
    FROM "LeaveRequests" AS l
    INNER JOIN (
        SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
        FROM "Users" AS u
        WHERE NOT (u."IsDeleted")
    ) AS t ON l."UserId" = t."Id"
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t0 ON l."LeaveTypeId" = t0."Id"
    LEFT JOIN (
        SELECT u0."Id", u0."CreatedAt", u0."CreatedBy", u0."DeletedAt", u0."Email", u0."Gender", u0."IsActive", u0."IsDeleted", u0."LastLoginAt", u0."PasswordHash", u0."Role", u0."Username"
        FROM "Users" AS u0
        WHERE NOT (u0."IsDeleted")
    ) AS t1 ON l."ReviewedById" = t1."Id"
    WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
    LIMIT 1
) AS t2
LEFT JOIN (
    SELECT l1."Id", l1."DeletedAt", l1."FileContent", l1."FileName", l1."IsDeleted", l1."LeaveRequestId", l1."UploadedAt"
    FROM "LeaveAttachments" AS l1
    WHERE NOT (l1."IsDeleted")
) AS t3 ON t2."Id" = t3."LeaveRequestId"
ORDER BY t2."Id", t2."Id0", t2."Id1", t2."Id2"
2025-06-13 08:36:08,306 [39] ERROR LeaveManagementSystem.Controllers.LeaveRequestController - Error updating leave request status for ID: f137b974-0d82-42f4-abae-6660f7d0393c
System.Exception: Failed to update leave request status Cannot change status of a finalized request.
 ---> System.InvalidOperationException: Cannot change status of a finalized request.
   at LeaveManagementSystem.Services.LeaveRequestService.UpdateStatusAsync(Guid id, String status, Guid approverId) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 297
   --- End of inner exception stack trace ---
   at LeaveManagementSystem.Services.LeaveRequestService.UpdateStatusAsync(Guid id, String status, Guid approverId) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 334
   at LeaveManagementSystem.Controllers.LeaveRequestController.UpdateStatus(Guid id, UpdateLeaveRequestStatusDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Controllers/LeaveRequestController.cs:line 110
2025-06-13 08:36:55,506 [44] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T03:06:55.5067920Z, Method: GET, Path: /api/v1/leave-requests/f137b974-0d82-42f4-abae-6660f7d0393c, User: Chandler
2025-06-13 08:36:55,509 [44] INFO  LeaveManagementSystem.Controllers.LeaveRequestController - Fetching leave request with ID: f137b974-0d82-42f4-abae-6660f7d0393c
2025-06-13 08:36:55,518 [44] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (6ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t2."Id", t2."CreatedAt", t2."DeletedAt", t2."EndDate", t2."IsDeleted", t2."LeaveTypeId", t2."Reason", t2."ReviewedById", t2."StartDate", t2."Status", t2."UpdatedAt", t2."UserId", t2."Id0", t2."CreatedAt0", t2."CreatedBy", t2."DeletedAt0", t2."Email", t2."Gender", t2."IsActive", t2."IsDeleted0", t2."LastLoginAt", t2."PasswordHash", t2."Role", t2."Username", t2."Id1", t2."CreatedAt1", t2."CreatedBy0", t2."DeletedAt1", t2."Description", t2."IsDeleted1", t2."Name", t2."StandardLeaveCount", t2."UpdatedAt0", t2."UpdatedBy", t2."Id2", t2."CreatedAt2", t2."CreatedBy1", t2."DeletedAt2", t2."Email0", t2."Gender0", t2."IsActive0", t2."IsDeleted2", t2."LastLoginAt0", t2."PasswordHash0", t2."Role0", t2."Username0", t3."Id", t3."DeletedAt", t3."FileContent", t3."FileName", t3."IsDeleted", t3."LeaveRequestId", t3."UploadedAt"
FROM (
    SELECT l."Id", l."CreatedAt", l."DeletedAt", l."EndDate", l."IsDeleted", l."LeaveTypeId", l."Reason", l."ReviewedById", l."StartDate", l."Status", l."UpdatedAt", l."UserId", t."Id" AS "Id0", t."CreatedAt" AS "CreatedAt0", t."CreatedBy", t."DeletedAt" AS "DeletedAt0", t."Email", t."Gender", t."IsActive", t."IsDeleted" AS "IsDeleted0", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id" AS "Id1", t0."CreatedAt" AS "CreatedAt1", t0."CreatedBy" AS "CreatedBy0", t0."DeletedAt" AS "DeletedAt1", t0."Description", t0."IsDeleted" AS "IsDeleted1", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt" AS "UpdatedAt0", t0."UpdatedBy", t1."Id" AS "Id2", t1."CreatedAt" AS "CreatedAt2", t1."CreatedBy" AS "CreatedBy1", t1."DeletedAt" AS "DeletedAt2", t1."Email" AS "Email0", t1."Gender" AS "Gender0", t1."IsActive" AS "IsActive0", t1."IsDeleted" AS "IsDeleted2", t1."LastLoginAt" AS "LastLoginAt0", t1."PasswordHash" AS "PasswordHash0", t1."Role" AS "Role0", t1."Username" AS "Username0"
    FROM "LeaveRequests" AS l
    INNER JOIN (
        SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
        FROM "Users" AS u
        WHERE NOT (u."IsDeleted")
    ) AS t ON l."UserId" = t."Id"
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t0 ON l."LeaveTypeId" = t0."Id"
    LEFT JOIN (
        SELECT u0."Id", u0."CreatedAt", u0."CreatedBy", u0."DeletedAt", u0."Email", u0."Gender", u0."IsActive", u0."IsDeleted", u0."LastLoginAt", u0."PasswordHash", u0."Role", u0."Username"
        FROM "Users" AS u0
        WHERE NOT (u0."IsDeleted")
    ) AS t1 ON l."ReviewedById" = t1."Id"
    WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
    LIMIT 1
) AS t2
LEFT JOIN (
    SELECT l1."Id", l1."DeletedAt", l1."FileContent", l1."FileName", l1."IsDeleted", l1."LeaveRequestId", l1."UploadedAt"
    FROM "LeaveAttachments" AS l1
    WHERE NOT (l1."IsDeleted")
) AS t3 ON t2."Id" = t3."LeaveRequestId"
ORDER BY t2."Id", t2."Id0", t2."Id1", t2."Id2"
2025-06-13 08:37:19,853 [44] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T03:07:19.8533800Z, Method: GET, Path: /api/v1/leave-requests/f137b974-0d82-42f4-abae-6660f7d0393c, User: Tony
2025-06-13 08:37:19,859 [44] INFO  LeaveManagementSystem.Controllers.LeaveRequestController - Fetching leave request with ID: f137b974-0d82-42f4-abae-6660f7d0393c
2025-06-13 08:37:19,864 [40] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (3ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t2."Id", t2."CreatedAt", t2."DeletedAt", t2."EndDate", t2."IsDeleted", t2."LeaveTypeId", t2."Reason", t2."ReviewedById", t2."StartDate", t2."Status", t2."UpdatedAt", t2."UserId", t2."Id0", t2."CreatedAt0", t2."CreatedBy", t2."DeletedAt0", t2."Email", t2."Gender", t2."IsActive", t2."IsDeleted0", t2."LastLoginAt", t2."PasswordHash", t2."Role", t2."Username", t2."Id1", t2."CreatedAt1", t2."CreatedBy0", t2."DeletedAt1", t2."Description", t2."IsDeleted1", t2."Name", t2."StandardLeaveCount", t2."UpdatedAt0", t2."UpdatedBy", t2."Id2", t2."CreatedAt2", t2."CreatedBy1", t2."DeletedAt2", t2."Email0", t2."Gender0", t2."IsActive0", t2."IsDeleted2", t2."LastLoginAt0", t2."PasswordHash0", t2."Role0", t2."Username0", t3."Id", t3."DeletedAt", t3."FileContent", t3."FileName", t3."IsDeleted", t3."LeaveRequestId", t3."UploadedAt"
FROM (
    SELECT l."Id", l."CreatedAt", l."DeletedAt", l."EndDate", l."IsDeleted", l."LeaveTypeId", l."Reason", l."ReviewedById", l."StartDate", l."Status", l."UpdatedAt", l."UserId", t."Id" AS "Id0", t."CreatedAt" AS "CreatedAt0", t."CreatedBy", t."DeletedAt" AS "DeletedAt0", t."Email", t."Gender", t."IsActive", t."IsDeleted" AS "IsDeleted0", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id" AS "Id1", t0."CreatedAt" AS "CreatedAt1", t0."CreatedBy" AS "CreatedBy0", t0."DeletedAt" AS "DeletedAt1", t0."Description", t0."IsDeleted" AS "IsDeleted1", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt" AS "UpdatedAt0", t0."UpdatedBy", t1."Id" AS "Id2", t1."CreatedAt" AS "CreatedAt2", t1."CreatedBy" AS "CreatedBy1", t1."DeletedAt" AS "DeletedAt2", t1."Email" AS "Email0", t1."Gender" AS "Gender0", t1."IsActive" AS "IsActive0", t1."IsDeleted" AS "IsDeleted2", t1."LastLoginAt" AS "LastLoginAt0", t1."PasswordHash" AS "PasswordHash0", t1."Role" AS "Role0", t1."Username" AS "Username0"
    FROM "LeaveRequests" AS l
    INNER JOIN (
        SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
        FROM "Users" AS u
        WHERE NOT (u."IsDeleted")
    ) AS t ON l."UserId" = t."Id"
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t0 ON l."LeaveTypeId" = t0."Id"
    LEFT JOIN (
        SELECT u0."Id", u0."CreatedAt", u0."CreatedBy", u0."DeletedAt", u0."Email", u0."Gender", u0."IsActive", u0."IsDeleted", u0."LastLoginAt", u0."PasswordHash", u0."Role", u0."Username"
        FROM "Users" AS u0
        WHERE NOT (u0."IsDeleted")
    ) AS t1 ON l."ReviewedById" = t1."Id"
    WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
    LIMIT 1
) AS t2
LEFT JOIN (
    SELECT l1."Id", l1."DeletedAt", l1."FileContent", l1."FileName", l1."IsDeleted", l1."LeaveRequestId", l1."UploadedAt"
    FROM "LeaveAttachments" AS l1
    WHERE NOT (l1."IsDeleted")
) AS t3 ON t2."Id" = t3."LeaveRequestId"
ORDER BY t2."Id", t2."Id0", t2."Id1", t2."Id2"
2025-06-13 08:37:40,161 [40] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T03:07:40.1615570Z, Method: GET, Path: /api/v1/leave-requests, User: Tony
2025-06-13 08:37:40,162 [40] INFO  LeaveManagementSystem.Controllers.LeaveRequestController - Fetching all leave requests.
2025-06-13 08:37:40,165 [45] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."DeletedAt", l."EndDate", l."IsDeleted", l."LeaveTypeId", l."Reason", l."ReviewedById", l."StartDate", l."Status", l."UpdatedAt", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy", t1."Id", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Email", t1."Gender", t1."IsActive", t1."IsDeleted", t1."LastLoginAt", t1."PasswordHash", t1."Role", t1."Username", t2."Id", t2."DeletedAt", t2."FileContent", t2."FileName", t2."IsDeleted", t2."LeaveRequestId", t2."UploadedAt"
FROM "LeaveRequests" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
LEFT JOIN (
    SELECT u0."Id", u0."CreatedAt", u0."CreatedBy", u0."DeletedAt", u0."Email", u0."Gender", u0."IsActive", u0."IsDeleted", u0."LastLoginAt", u0."PasswordHash", u0."Role", u0."Username"
    FROM "Users" AS u0
    WHERE NOT (u0."IsDeleted")
) AS t1 ON l."ReviewedById" = t1."Id"
LEFT JOIN (
    SELECT l1."Id", l1."DeletedAt", l1."FileContent", l1."FileName", l1."IsDeleted", l1."LeaveRequestId", l1."UploadedAt"
    FROM "LeaveAttachments" AS l1
    WHERE NOT (l1."IsDeleted")
) AS t2 ON l."Id" = t2."LeaveRequestId"
WHERE NOT (l."IsDeleted")
ORDER BY l."Id", t."Id", t0."Id", t1."Id"
2025-06-13 08:38:57,328 [45] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T03:08:57.3289440Z, Method: GET, Path: /api/v1/leave-attachments/ebb1552d-4fce-43c5-a202-5937ec83d408, User: Anonymous
2025-06-13 08:38:57,351 [45] INFO  LeaveManagementSystem.Controllers.LeaveAttachmentController - Fetching attachment with ID: ebb1552d-4fce-43c5-a202-5937ec83d408
2025-06-13 08:38:57,399 [39] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (8ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."DeletedAt", l."FileContent", l."FileName", l."IsDeleted", l."LeaveRequestId", l."UploadedAt", t."Id", t."CreatedAt", t."DeletedAt", t."EndDate", t."IsDeleted", t."LeaveTypeId", t."Reason", t."ReviewedById", t."StartDate", t."Status", t."UpdatedAt", t."UserId"
FROM "LeaveAttachments" AS l
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."DeletedAt", l0."EndDate", l0."IsDeleted", l0."LeaveTypeId", l0."Reason", l0."ReviewedById", l0."StartDate", l0."Status", l0."UpdatedAt", l0."UserId"
    FROM "LeaveRequests" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t ON l."LeaveRequestId" = t."Id"
WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
LIMIT 1
2025-06-13 08:38:57,404 [39] ERROR LeaveManagementSystem.Controllers.LeaveAttachmentController - Error fetching attachment with ID: ebb1552d-4fce-43c5-a202-5937ec83d408
System.Exception: Error occurred while retrieving the leave attachment.
 ---> System.Collections.Generic.KeyNotFoundException: LeaveAttachment with Id ebb1552d-4fce-43c5-a202-5937ec83d408 not found.
   at LeaveManagementSystem.Services.LeaveAttachmentService.GetByIdAsync(Guid id) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveAttachmentService.cs:line 77
   --- End of inner exception stack trace ---
   at LeaveManagementSystem.Services.LeaveAttachmentService.GetByIdAsync(Guid id) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveAttachmentService.cs:line 82
   at LeaveManagementSystem.Controllers.LeaveAttachmentController.GetById(Guid id) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Controllers/LeaveAttachmentController.cs:line 66
2025-06-13 08:39:01,697 [45] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T03:09:01.6976560Z, Method: GET, Path: /api/v1/leave-attachments/ebb1552d-4fce-43c5-a202-5937ec83d408, User: Anonymous
2025-06-13 08:39:01,700 [45] INFO  LeaveManagementSystem.Controllers.LeaveAttachmentController - Fetching attachment with ID: ebb1552d-4fce-43c5-a202-5937ec83d408
2025-06-13 08:39:01,708 [45] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (8ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."DeletedAt", l."FileContent", l."FileName", l."IsDeleted", l."LeaveRequestId", l."UploadedAt", t."Id", t."CreatedAt", t."DeletedAt", t."EndDate", t."IsDeleted", t."LeaveTypeId", t."Reason", t."ReviewedById", t."StartDate", t."Status", t."UpdatedAt", t."UserId"
FROM "LeaveAttachments" AS l
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."DeletedAt", l0."EndDate", l0."IsDeleted", l0."LeaveTypeId", l0."Reason", l0."ReviewedById", l0."StartDate", l0."Status", l0."UpdatedAt", l0."UserId"
    FROM "LeaveRequests" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t ON l."LeaveRequestId" = t."Id"
WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
LIMIT 1
2025-06-13 08:39:01,709 [45] ERROR LeaveManagementSystem.Controllers.LeaveAttachmentController - Error fetching attachment with ID: ebb1552d-4fce-43c5-a202-5937ec83d408
System.Exception: Error occurred while retrieving the leave attachment.
 ---> System.Collections.Generic.KeyNotFoundException: LeaveAttachment with Id ebb1552d-4fce-43c5-a202-5937ec83d408 not found.
   at LeaveManagementSystem.Services.LeaveAttachmentService.GetByIdAsync(Guid id) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveAttachmentService.cs:line 77
   --- End of inner exception stack trace ---
   at LeaveManagementSystem.Services.LeaveAttachmentService.GetByIdAsync(Guid id) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveAttachmentService.cs:line 82
   at LeaveManagementSystem.Controllers.LeaveAttachmentController.GetById(Guid id) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Controllers/LeaveAttachmentController.cs:line 66
2025-06-13 08:39:02,712 [45] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T03:09:02.7123140Z, Method: GET, Path: /api/v1/leave-attachments/ebb1552d-4fce-43c5-a202-5937ec83d408, User: Anonymous
2025-06-13 08:39:02,712 [45] INFO  LeaveManagementSystem.Controllers.LeaveAttachmentController - Fetching attachment with ID: ebb1552d-4fce-43c5-a202-5937ec83d408
2025-06-13 08:39:02,714 [45] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."DeletedAt", l."FileContent", l."FileName", l."IsDeleted", l."LeaveRequestId", l."UploadedAt", t."Id", t."CreatedAt", t."DeletedAt", t."EndDate", t."IsDeleted", t."LeaveTypeId", t."Reason", t."ReviewedById", t."StartDate", t."Status", t."UpdatedAt", t."UserId"
FROM "LeaveAttachments" AS l
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."DeletedAt", l0."EndDate", l0."IsDeleted", l0."LeaveTypeId", l0."Reason", l0."ReviewedById", l0."StartDate", l0."Status", l0."UpdatedAt", l0."UserId"
    FROM "LeaveRequests" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t ON l."LeaveRequestId" = t."Id"
WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
LIMIT 1
2025-06-13 08:39:02,714 [45] ERROR LeaveManagementSystem.Controllers.LeaveAttachmentController - Error fetching attachment with ID: ebb1552d-4fce-43c5-a202-5937ec83d408
System.Exception: Error occurred while retrieving the leave attachment.
 ---> System.Collections.Generic.KeyNotFoundException: LeaveAttachment with Id ebb1552d-4fce-43c5-a202-5937ec83d408 not found.
   at LeaveManagementSystem.Services.LeaveAttachmentService.GetByIdAsync(Guid id) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveAttachmentService.cs:line 77
   --- End of inner exception stack trace ---
   at LeaveManagementSystem.Services.LeaveAttachmentService.GetByIdAsync(Guid id) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveAttachmentService.cs:line 82
   at LeaveManagementSystem.Controllers.LeaveAttachmentController.GetById(Guid id) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Controllers/LeaveAttachmentController.cs:line 66
2025-06-13 08:39:03,436 [47] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T03:09:03.4365890Z, Method: GET, Path: /api/v1/leave-attachments/ebb1552d-4fce-43c5-a202-5937ec83d408, User: Anonymous
2025-06-13 08:39:03,437 [47] INFO  LeaveManagementSystem.Controllers.LeaveAttachmentController - Fetching attachment with ID: ebb1552d-4fce-43c5-a202-5937ec83d408
2025-06-13 08:39:03,438 [39] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."DeletedAt", l."FileContent", l."FileName", l."IsDeleted", l."LeaveRequestId", l."UploadedAt", t."Id", t."CreatedAt", t."DeletedAt", t."EndDate", t."IsDeleted", t."LeaveTypeId", t."Reason", t."ReviewedById", t."StartDate", t."Status", t."UpdatedAt", t."UserId"
FROM "LeaveAttachments" AS l
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."DeletedAt", l0."EndDate", l0."IsDeleted", l0."LeaveTypeId", l0."Reason", l0."ReviewedById", l0."StartDate", l0."Status", l0."UpdatedAt", l0."UserId"
    FROM "LeaveRequests" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t ON l."LeaveRequestId" = t."Id"
WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
LIMIT 1
2025-06-13 08:39:03,438 [39] ERROR LeaveManagementSystem.Controllers.LeaveAttachmentController - Error fetching attachment with ID: ebb1552d-4fce-43c5-a202-5937ec83d408
System.Exception: Error occurred while retrieving the leave attachment.
 ---> System.Collections.Generic.KeyNotFoundException: LeaveAttachment with Id ebb1552d-4fce-43c5-a202-5937ec83d408 not found.
   at LeaveManagementSystem.Services.LeaveAttachmentService.GetByIdAsync(Guid id) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveAttachmentService.cs:line 77
   --- End of inner exception stack trace ---
   at LeaveManagementSystem.Services.LeaveAttachmentService.GetByIdAsync(Guid id) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveAttachmentService.cs:line 82
   at LeaveManagementSystem.Controllers.LeaveAttachmentController.GetById(Guid id) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Controllers/LeaveAttachmentController.cs:line 66
2025-06-13 09:24:56,660 [82] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T03:54:56.6605880Z, Method: POST, Path: /api/v1/auth/login, User: Anonymous
2025-06-13 09:24:56,698 [82] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
FROM "Users" AS u
WHERE NOT (u."IsDeleted")
2025-06-13 09:24:56,860 [82] INFO  LeaveManagementSystem.Services.AuthenticationService - User chandler@example.com logged in successfully
2025-06-13 09:24:56,860 [82] INFO  LeaveManagementSystem.Controllers.AuthenticationController - User chandler@example.com logged in successfully.
2025-06-13 09:25:18,912 [78] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T03:55:18.9121640Z, Method: POST, Path: /api/v1/auth/login, User: Anonymous
2025-06-13 09:25:18,927 [78] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
FROM "Users" AS u
WHERE NOT (u."IsDeleted")
2025-06-13 09:25:19,094 [78] INFO  LeaveManagementSystem.Services.AuthenticationService - User joeytrib@example.com logged in successfully
2025-06-13 09:25:19,094 [78] INFO  LeaveManagementSystem.Controllers.AuthenticationController - User joeytrib@example.com logged in successfully.
2025-06-13 09:26:49,517 [77] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T03:56:49.5174240Z, Method: POST, Path: /api/v1/auth/logout, User: Chandler
2025-06-13 09:26:49,534 [77] INFO  LeaveManagementSystem.Services.AuthenticationService - User chandler@example.com logged out
2025-06-13 09:26:49,534 [77] INFO  LeaveManagementSystem.Controllers.AuthenticationController - User chandler@example.com logged out successfully.
2025-06-13 09:27:06,985 [77] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T03:57:06.9859560Z, Method: GET, Path: /api/v1/auth/me, User: Chandler
2025-06-13 09:27:06,994 [77] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
FROM "Users" AS u
WHERE NOT (u."IsDeleted")
2025-06-13 09:27:06,994 [77] INFO  LeaveManagementSystem.Controllers.AuthenticationController - Current user info retrieved successfully.
2025-06-13 09:27:14,818 [76] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T03:57:14.8189280Z, Method: GET, Path: /api/v1/users, User: Anonymous
2025-06-13 09:27:14,820 [76] INFO  LeaveManagementSystem.Controllers.UsersController - Fetching all users with pagination parameters.
2025-06-13 09:27:14,821 [74] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
FROM "Users" AS u
WHERE NOT (u."IsDeleted")
2025-06-13 09:33:59,040 [72] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T04:03:59.0404990Z, Method: PUT, Path: /api/v1/users/0b23eda3-d5c7-40a2-9049-557e40524a4d, User: Joey
2025-06-13 09:33:59,087 [72] INFO  LeaveManagementSystem.Controllers.UsersController - Updating user with ID: 0b23eda3-d5c7-40a2-9049-557e40524a4d
2025-06-13 09:33:59,122 [72] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (8ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."LeaveTypeId", t0."TotalLeaves", t0."UsedLeaves", t0."UserId", t0."Id0", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted") AND u."Id" = @__key_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t1."Id" AS "Id0", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Description", t1."IsDeleted", t1."Name", t1."StandardLeaveCount", t1."UpdatedAt", t1."UpdatedBy"
    FROM "LeaveBalances" AS l
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t1 ON l."LeaveTypeId" = t1."Id"
) AS t0 ON t."Id" = t0."UserId"
ORDER BY t."Id", t0."Id"
2025-06-13 09:33:59,127 [72] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."LeaveTypeId", t0."TotalLeaves", t0."UsedLeaves", t0."UserId", t0."Id0", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted") AND u."Id" = @__key_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t1."Id" AS "Id0", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Description", t1."IsDeleted", t1."Name", t1."StandardLeaveCount", t1."UpdatedAt", t1."UpdatedBy"
    FROM "LeaveBalances" AS l
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t1 ON l."LeaveTypeId" = t1."Id"
) AS t0 ON t."Id" = t0."UserId"
ORDER BY t."Id", t0."Id"
2025-06-13 09:33:59,156 [72] ERROR Microsoft.EntityFrameworkCore.Database.Command - Failed executing DbCommand (26ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Guid), @p4='?', @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime), @p7='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
INSERT INTO "AuditLogs" ("Id", "Action", "DeletedAt", "EntityId", "EntityType", "IsDeleted", "Timestamp", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-06-13 09:35:16,787 [64] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T04:05:16.7866870Z, Method: GET, Path: /api/v1/leave-requests, User: Joey
2025-06-13 09:35:16,790 [64] INFO  LeaveManagementSystem.Controllers.LeaveRequestController - Fetching all leave requests.
2025-06-13 09:35:16,842 [64] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."DeletedAt", l."EndDate", l."IsDeleted", l."LeaveTypeId", l."Reason", l."ReviewedById", l."StartDate", l."Status", l."UpdatedAt", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy", t1."Id", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Email", t1."Gender", t1."IsActive", t1."IsDeleted", t1."LastLoginAt", t1."PasswordHash", t1."Role", t1."Username", t2."Id", t2."DeletedAt", t2."FileContent", t2."FileName", t2."IsDeleted", t2."LeaveRequestId", t2."UploadedAt"
FROM "LeaveRequests" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
LEFT JOIN (
    SELECT u0."Id", u0."CreatedAt", u0."CreatedBy", u0."DeletedAt", u0."Email", u0."Gender", u0."IsActive", u0."IsDeleted", u0."LastLoginAt", u0."PasswordHash", u0."Role", u0."Username"
    FROM "Users" AS u0
    WHERE NOT (u0."IsDeleted")
) AS t1 ON l."ReviewedById" = t1."Id"
LEFT JOIN (
    SELECT l1."Id", l1."DeletedAt", l1."FileContent", l1."FileName", l1."IsDeleted", l1."LeaveRequestId", l1."UploadedAt"
    FROM "LeaveAttachments" AS l1
    WHERE NOT (l1."IsDeleted")
) AS t2 ON l."Id" = t2."LeaveRequestId"
WHERE NOT (l."IsDeleted")
ORDER BY l."Id", t."Id", t0."Id", t1."Id"
2025-06-13 09:35:31,820 [69] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T04:05:31.8200040Z, Method: POST, Path: /api/v1/leave-requests, User: Joey
2025-06-13 09:35:31,822 [69] INFO  LeaveManagementSystem.Controllers.LeaveRequestController - Creating new leave request.
2025-06-13 09:35:31,870 [69] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (44ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."LeaveTypeId", t0."TotalLeaves", t0."UsedLeaves", t0."UserId", t0."Id0", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted") AND u."Id" = @__key_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t1."Id" AS "Id0", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Description", t1."IsDeleted", t1."Name", t1."StandardLeaveCount", t1."UpdatedAt", t1."UpdatedBy"
    FROM "LeaveBalances" AS l
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t1 ON l."LeaveTypeId" = t1."Id"
) AS t0 ON t."Id" = t0."UserId"
ORDER BY t."Id", t0."Id"
2025-06-13 09:35:31,871 [67] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."CreatedBy", l."DeletedAt", l."Description", l."IsDeleted", l."Name", l."StandardLeaveCount", l."UpdatedAt", l."UpdatedBy"
FROM "LeaveTypes" AS l
WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
LIMIT 1
2025-06-13 09:35:31,877 [67] ERROR LeaveManagementSystem.Controllers.LeaveRequestController - Error creating leave request.
System.Exception: Failed to create leave request Only female employees can apply for Maternity Leave.
 ---> System.InvalidOperationException: Only female employees can apply for Maternity Leave.
   at LeaveManagementSystem.Services.LeaveRequestService.ValidateGenderBasedLeaveAsync(Guid userId, Guid leaveTypeId) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 377
   at LeaveManagementSystem.Services.LeaveRequestService.CreateAsync(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 211
   --- End of inner exception stack trace ---
   at LeaveManagementSystem.Services.LeaveRequestService.CreateAsync(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 282
   at LeaveManagementSystem.Controllers.LeaveRequestController.Create(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Controllers/LeaveRequestController.cs:line 79
2025-06-13 09:35:43,596 [67] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T04:05:43.5960080Z, Method: POST, Path: /api/v1/leave-requests, User: Joey
2025-06-13 09:35:43,599 [67] INFO  LeaveManagementSystem.Controllers.LeaveRequestController - Creating new leave request.
2025-06-13 09:35:43,607 [65] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."LeaveTypeId", t0."TotalLeaves", t0."UsedLeaves", t0."UserId", t0."Id0", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted") AND u."Id" = @__key_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t1."Id" AS "Id0", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Description", t1."IsDeleted", t1."Name", t1."StandardLeaveCount", t1."UpdatedAt", t1."UpdatedBy"
    FROM "LeaveBalances" AS l
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t1 ON l."LeaveTypeId" = t1."Id"
) AS t0 ON t."Id" = t0."UserId"
ORDER BY t."Id", t0."Id"
2025-06-13 09:35:43,608 [67] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (0ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."CreatedBy", l."DeletedAt", l."Description", l."IsDeleted", l."Name", l."StandardLeaveCount", l."UpdatedAt", l."UpdatedBy"
FROM "LeaveTypes" AS l
WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
LIMIT 1
2025-06-13 09:35:43,610 [67] ERROR LeaveManagementSystem.Controllers.LeaveRequestController - Error creating leave request.
System.Exception: Failed to create leave request Only male employees can apply for Paternity Leave.
 ---> System.InvalidOperationException: Only male employees can apply for Paternity Leave.
   at LeaveManagementSystem.Services.LeaveRequestService.ValidateGenderBasedLeaveAsync(Guid userId, Guid leaveTypeId) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 380
   at LeaveManagementSystem.Services.LeaveRequestService.CreateAsync(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 211
   --- End of inner exception stack trace ---
   at LeaveManagementSystem.Services.LeaveRequestService.CreateAsync(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 282
   at LeaveManagementSystem.Controllers.LeaveRequestController.Create(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Controllers/LeaveRequestController.cs:line 79
2025-06-13 09:35:53,677 [65] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T04:05:53.6773130Z, Method: POST, Path: /api/v1/leave-requests, User: Joey
2025-06-13 09:35:53,683 [65] INFO  LeaveManagementSystem.Controllers.LeaveRequestController - Creating new leave request.
2025-06-13 09:35:53,691 [65] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (4ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."LeaveTypeId", t0."TotalLeaves", t0."UsedLeaves", t0."UserId", t0."Id0", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted") AND u."Id" = @__key_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t1."Id" AS "Id0", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Description", t1."IsDeleted", t1."Name", t1."StandardLeaveCount", t1."UpdatedAt", t1."UpdatedBy"
    FROM "LeaveBalances" AS l
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t1 ON l."LeaveTypeId" = t1."Id"
) AS t0 ON t."Id" = t0."UserId"
ORDER BY t."Id", t0."Id"
2025-06-13 09:35:53,695 [65] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."CreatedBy", l."DeletedAt", l."Description", l."IsDeleted", l."Name", l."StandardLeaveCount", l."UpdatedAt", l."UpdatedBy"
FROM "LeaveTypes" AS l
WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
LIMIT 1
2025-06-13 09:35:53,696 [65] ERROR LeaveManagementSystem.Controllers.LeaveRequestController - Error creating leave request.
System.Exception: Failed to create leave request Leave start date cannot be in the past.
 ---> System.InvalidOperationException: Leave start date cannot be in the past.
   at LeaveManagementSystem.Services.LeaveRequestService.CreateAsync(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 214
   --- End of inner exception stack trace ---
   at LeaveManagementSystem.Services.LeaveRequestService.CreateAsync(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 282
   at LeaveManagementSystem.Controllers.LeaveRequestController.Create(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Controllers/LeaveRequestController.cs:line 79
2025-06-13 09:42:51,920 [63] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T04:12:51.9202670Z, Method: POST, Path: /api/v1/leave-requests, User: Joey
2025-06-13 09:42:51,923 [63] INFO  LeaveManagementSystem.Controllers.LeaveRequestController - Creating new leave request.
2025-06-13 09:42:52,007 [62] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (11ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."LeaveTypeId", t0."TotalLeaves", t0."UsedLeaves", t0."UserId", t0."Id0", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted") AND u."Id" = @__key_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t1."Id" AS "Id0", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Description", t1."IsDeleted", t1."Name", t1."StandardLeaveCount", t1."UpdatedAt", t1."UpdatedBy"
    FROM "LeaveBalances" AS l
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t1 ON l."LeaveTypeId" = t1."Id"
) AS t0 ON t."Id" = t0."UserId"
ORDER BY t."Id", t0."Id"
2025-06-13 09:42:52,010 [62] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."CreatedBy", l."DeletedAt", l."Description", l."IsDeleted", l."Name", l."StandardLeaveCount", l."UpdatedAt", l."UpdatedBy"
FROM "LeaveTypes" AS l
WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
LIMIT 1
2025-06-13 09:42:52,016 [62] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."DeletedAt", l."EndDate", l."IsDeleted", l."LeaveTypeId", l."Reason", l."ReviewedById", l."StartDate", l."Status", l."UpdatedAt", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy", t1."Id", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Email", t1."Gender", t1."IsActive", t1."IsDeleted", t1."LastLoginAt", t1."PasswordHash", t1."Role", t1."Username", t2."Id", t2."DeletedAt", t2."FileContent", t2."FileName", t2."IsDeleted", t2."LeaveRequestId", t2."UploadedAt"
FROM "LeaveRequests" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
LEFT JOIN (
    SELECT u0."Id", u0."CreatedAt", u0."CreatedBy", u0."DeletedAt", u0."Email", u0."Gender", u0."IsActive", u0."IsDeleted", u0."LastLoginAt", u0."PasswordHash", u0."Role", u0."Username"
    FROM "Users" AS u0
    WHERE NOT (u0."IsDeleted")
) AS t1 ON l."ReviewedById" = t1."Id"
LEFT JOIN (
    SELECT l1."Id", l1."DeletedAt", l1."FileContent", l1."FileName", l1."IsDeleted", l1."LeaveRequestId", l1."UploadedAt"
    FROM "LeaveAttachments" AS l1
    WHERE NOT (l1."IsDeleted")
) AS t2 ON l."Id" = t2."LeaveRequestId"
WHERE NOT (l."IsDeleted")
ORDER BY l."Id", t."Id", t0."Id", t1."Id"
2025-06-13 09:42:52,020 [62] ERROR LeaveManagementSystem.Controllers.LeaveRequestController - Error creating leave request.
System.Exception: Failed to create leave request You have already applied for leave in this date range.
 ---> System.InvalidOperationException: You have already applied for leave in this date range.
   at LeaveManagementSystem.Services.LeaveRequestService.CreateAsync(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 225
   --- End of inner exception stack trace ---
   at LeaveManagementSystem.Services.LeaveRequestService.CreateAsync(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 282
   at LeaveManagementSystem.Controllers.LeaveRequestController.Create(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Controllers/LeaveRequestController.cs:line 79
2025-06-13 09:43:06,026 [61] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T04:13:06.0267950Z, Method: POST, Path: /api/v1/leave-requests, User: Joey
2025-06-13 09:43:06,030 [61] INFO  LeaveManagementSystem.Controllers.LeaveRequestController - Creating new leave request.
2025-06-13 09:43:06,041 [61] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (5ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."LeaveTypeId", t0."TotalLeaves", t0."UsedLeaves", t0."UserId", t0."Id0", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted") AND u."Id" = @__key_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t1."Id" AS "Id0", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Description", t1."IsDeleted", t1."Name", t1."StandardLeaveCount", t1."UpdatedAt", t1."UpdatedBy"
    FROM "LeaveBalances" AS l
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t1 ON l."LeaveTypeId" = t1."Id"
) AS t0 ON t."Id" = t0."UserId"
ORDER BY t."Id", t0."Id"
2025-06-13 09:43:06,043 [61] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."CreatedBy", l."DeletedAt", l."Description", l."IsDeleted", l."Name", l."StandardLeaveCount", l."UpdatedAt", l."UpdatedBy"
FROM "LeaveTypes" AS l
WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
LIMIT 1
2025-06-13 09:43:06,049 [60] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."DeletedAt", l."EndDate", l."IsDeleted", l."LeaveTypeId", l."Reason", l."ReviewedById", l."StartDate", l."Status", l."UpdatedAt", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy", t1."Id", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Email", t1."Gender", t1."IsActive", t1."IsDeleted", t1."LastLoginAt", t1."PasswordHash", t1."Role", t1."Username", t2."Id", t2."DeletedAt", t2."FileContent", t2."FileName", t2."IsDeleted", t2."LeaveRequestId", t2."UploadedAt"
FROM "LeaveRequests" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
LEFT JOIN (
    SELECT u0."Id", u0."CreatedAt", u0."CreatedBy", u0."DeletedAt", u0."Email", u0."Gender", u0."IsActive", u0."IsDeleted", u0."LastLoginAt", u0."PasswordHash", u0."Role", u0."Username"
    FROM "Users" AS u0
    WHERE NOT (u0."IsDeleted")
) AS t1 ON l."ReviewedById" = t1."Id"
LEFT JOIN (
    SELECT l1."Id", l1."DeletedAt", l1."FileContent", l1."FileName", l1."IsDeleted", l1."LeaveRequestId", l1."UploadedAt"
    FROM "LeaveAttachments" AS l1
    WHERE NOT (l1."IsDeleted")
) AS t2 ON l."Id" = t2."LeaveRequestId"
WHERE NOT (l."IsDeleted")
ORDER BY l."Id", t."Id", t0."Id", t1."Id"
2025-06-13 09:43:06,050 [60] ERROR LeaveManagementSystem.Controllers.LeaveRequestController - Error creating leave request.
System.Exception: Failed to create leave request You cannot apply for more than 15 consecutive leave days.
 ---> System.InvalidOperationException: You cannot apply for more than 15 consecutive leave days.
   at LeaveManagementSystem.Services.LeaveRequestService.CreateAsync(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 230
   --- End of inner exception stack trace ---
   at LeaveManagementSystem.Services.LeaveRequestService.CreateAsync(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 282
   at LeaveManagementSystem.Controllers.LeaveRequestController.Create(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Controllers/LeaveRequestController.cs:line 79
2025-06-13 09:43:15,929 [60] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T04:13:15.9296110Z, Method: POST, Path: /api/v1/leave-requests, User: Joey
2025-06-13 09:43:15,936 [60] INFO  LeaveManagementSystem.Controllers.LeaveRequestController - Creating new leave request.
2025-06-13 09:43:15,942 [60] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."LeaveTypeId", t0."TotalLeaves", t0."UsedLeaves", t0."UserId", t0."Id0", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted") AND u."Id" = @__key_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t1."Id" AS "Id0", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Description", t1."IsDeleted", t1."Name", t1."StandardLeaveCount", t1."UpdatedAt", t1."UpdatedBy"
    FROM "LeaveBalances" AS l
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t1 ON l."LeaveTypeId" = t1."Id"
) AS t0 ON t."Id" = t0."UserId"
ORDER BY t."Id", t0."Id"
2025-06-13 09:43:15,945 [60] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (0ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."CreatedBy", l."DeletedAt", l."Description", l."IsDeleted", l."Name", l."StandardLeaveCount", l."UpdatedAt", l."UpdatedBy"
FROM "LeaveTypes" AS l
WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
LIMIT 1
2025-06-13 09:43:15,950 [62] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."DeletedAt", l."EndDate", l."IsDeleted", l."LeaveTypeId", l."Reason", l."ReviewedById", l."StartDate", l."Status", l."UpdatedAt", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy", t1."Id", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Email", t1."Gender", t1."IsActive", t1."IsDeleted", t1."LastLoginAt", t1."PasswordHash", t1."Role", t1."Username", t2."Id", t2."DeletedAt", t2."FileContent", t2."FileName", t2."IsDeleted", t2."LeaveRequestId", t2."UploadedAt"
FROM "LeaveRequests" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
LEFT JOIN (
    SELECT u0."Id", u0."CreatedAt", u0."CreatedBy", u0."DeletedAt", u0."Email", u0."Gender", u0."IsActive", u0."IsDeleted", u0."LastLoginAt", u0."PasswordHash", u0."Role", u0."Username"
    FROM "Users" AS u0
    WHERE NOT (u0."IsDeleted")
) AS t1 ON l."ReviewedById" = t1."Id"
LEFT JOIN (
    SELECT l1."Id", l1."DeletedAt", l1."FileContent", l1."FileName", l1."IsDeleted", l1."LeaveRequestId", l1."UploadedAt"
    FROM "LeaveAttachments" AS l1
    WHERE NOT (l1."IsDeleted")
) AS t2 ON l."Id" = t2."LeaveRequestId"
WHERE NOT (l."IsDeleted")
ORDER BY l."Id", t."Id", t0."Id", t1."Id"
2025-06-13 09:43:15,953 [62] ERROR LeaveManagementSystem.Controllers.LeaveRequestController - Error creating leave request.
System.Exception: Failed to create leave request You have already applied for leave in this date range.
 ---> System.InvalidOperationException: You have already applied for leave in this date range.
   at LeaveManagementSystem.Services.LeaveRequestService.CreateAsync(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 225
   --- End of inner exception stack trace ---
   at LeaveManagementSystem.Services.LeaveRequestService.CreateAsync(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 282
   at LeaveManagementSystem.Controllers.LeaveRequestController.Create(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Controllers/LeaveRequestController.cs:line 79
2025-06-13 09:43:26,396 [60] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T04:13:26.3962390Z, Method: POST, Path: /api/v1/leave-requests, User: Sample
2025-06-13 09:43:26,397 [60] INFO  LeaveManagementSystem.Controllers.LeaveRequestController - Creating new leave request.
2025-06-13 09:43:26,399 [60] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."LeaveTypeId", t0."TotalLeaves", t0."UsedLeaves", t0."UserId", t0."Id0", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted") AND u."Id" = @__key_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t1."Id" AS "Id0", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Description", t1."IsDeleted", t1."Name", t1."StandardLeaveCount", t1."UpdatedAt", t1."UpdatedBy"
    FROM "LeaveBalances" AS l
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t1 ON l."LeaveTypeId" = t1."Id"
) AS t0 ON t."Id" = t0."UserId"
ORDER BY t."Id", t0."Id"
2025-06-13 09:43:26,400 [60] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (0ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."CreatedBy", l."DeletedAt", l."Description", l."IsDeleted", l."Name", l."StandardLeaveCount", l."UpdatedAt", l."UpdatedBy"
FROM "LeaveTypes" AS l
WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
LIMIT 1
2025-06-13 09:43:26,403 [60] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."DeletedAt", l."EndDate", l."IsDeleted", l."LeaveTypeId", l."Reason", l."ReviewedById", l."StartDate", l."Status", l."UpdatedAt", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy", t1."Id", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Email", t1."Gender", t1."IsActive", t1."IsDeleted", t1."LastLoginAt", t1."PasswordHash", t1."Role", t1."Username", t2."Id", t2."DeletedAt", t2."FileContent", t2."FileName", t2."IsDeleted", t2."LeaveRequestId", t2."UploadedAt"
FROM "LeaveRequests" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
LEFT JOIN (
    SELECT u0."Id", u0."CreatedAt", u0."CreatedBy", u0."DeletedAt", u0."Email", u0."Gender", u0."IsActive", u0."IsDeleted", u0."LastLoginAt", u0."PasswordHash", u0."Role", u0."Username"
    FROM "Users" AS u0
    WHERE NOT (u0."IsDeleted")
) AS t1 ON l."ReviewedById" = t1."Id"
LEFT JOIN (
    SELECT l1."Id", l1."DeletedAt", l1."FileContent", l1."FileName", l1."IsDeleted", l1."LeaveRequestId", l1."UploadedAt"
    FROM "LeaveAttachments" AS l1
    WHERE NOT (l1."IsDeleted")
) AS t2 ON l."Id" = t2."LeaveRequestId"
WHERE NOT (l."IsDeleted")
ORDER BY l."Id", t."Id", t0."Id", t1."Id"
2025-06-13 09:43:26,406 [60] ERROR LeaveManagementSystem.Controllers.LeaveRequestController - Error creating leave request.
System.Exception: Failed to create leave request You have already applied for leave in this date range.
 ---> System.InvalidOperationException: You have already applied for leave in this date range.
   at LeaveManagementSystem.Services.LeaveRequestService.CreateAsync(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 225
   --- End of inner exception stack trace ---
   at LeaveManagementSystem.Services.LeaveRequestService.CreateAsync(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 282
   at LeaveManagementSystem.Controllers.LeaveRequestController.Create(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Controllers/LeaveRequestController.cs:line 79
2025-06-13 10:05:10,849 [46] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T04:35:10.8489340Z, Method: PUT, Path: /api/v1/leave-requests/f137b974-0d82-42f4-abae-6660f7d0393c/status, User: Chandler
2025-06-13 10:05:10,853 [46] INFO  LeaveManagementSystem.Controllers.LeaveRequestController - Updating leave request status for ID: f137b974-0d82-42f4-abae-6660f7d0393c by approver ID: 0728af92-6d38-4547-be7c-bca1f3dcdcc6
2025-06-13 10:05:10,912 [45] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (28ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t2."Id", t2."CreatedAt", t2."DeletedAt", t2."EndDate", t2."IsDeleted", t2."LeaveTypeId", t2."Reason", t2."ReviewedById", t2."StartDate", t2."Status", t2."UpdatedAt", t2."UserId", t2."Id0", t2."CreatedAt0", t2."CreatedBy", t2."DeletedAt0", t2."Email", t2."Gender", t2."IsActive", t2."IsDeleted0", t2."LastLoginAt", t2."PasswordHash", t2."Role", t2."Username", t2."Id1", t2."CreatedAt1", t2."CreatedBy0", t2."DeletedAt1", t2."Description", t2."IsDeleted1", t2."Name", t2."StandardLeaveCount", t2."UpdatedAt0", t2."UpdatedBy", t2."Id2", t2."CreatedAt2", t2."CreatedBy1", t2."DeletedAt2", t2."Email0", t2."Gender0", t2."IsActive0", t2."IsDeleted2", t2."LastLoginAt0", t2."PasswordHash0", t2."Role0", t2."Username0", t3."Id", t3."DeletedAt", t3."FileContent", t3."FileName", t3."IsDeleted", t3."LeaveRequestId", t3."UploadedAt"
FROM (
    SELECT l."Id", l."CreatedAt", l."DeletedAt", l."EndDate", l."IsDeleted", l."LeaveTypeId", l."Reason", l."ReviewedById", l."StartDate", l."Status", l."UpdatedAt", l."UserId", t."Id" AS "Id0", t."CreatedAt" AS "CreatedAt0", t."CreatedBy", t."DeletedAt" AS "DeletedAt0", t."Email", t."Gender", t."IsActive", t."IsDeleted" AS "IsDeleted0", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id" AS "Id1", t0."CreatedAt" AS "CreatedAt1", t0."CreatedBy" AS "CreatedBy0", t0."DeletedAt" AS "DeletedAt1", t0."Description", t0."IsDeleted" AS "IsDeleted1", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt" AS "UpdatedAt0", t0."UpdatedBy", t1."Id" AS "Id2", t1."CreatedAt" AS "CreatedAt2", t1."CreatedBy" AS "CreatedBy1", t1."DeletedAt" AS "DeletedAt2", t1."Email" AS "Email0", t1."Gender" AS "Gender0", t1."IsActive" AS "IsActive0", t1."IsDeleted" AS "IsDeleted2", t1."LastLoginAt" AS "LastLoginAt0", t1."PasswordHash" AS "PasswordHash0", t1."Role" AS "Role0", t1."Username" AS "Username0"
    FROM "LeaveRequests" AS l
    INNER JOIN (
        SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
        FROM "Users" AS u
        WHERE NOT (u."IsDeleted")
    ) AS t ON l."UserId" = t."Id"
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t0 ON l."LeaveTypeId" = t0."Id"
    LEFT JOIN (
        SELECT u0."Id", u0."CreatedAt", u0."CreatedBy", u0."DeletedAt", u0."Email", u0."Gender", u0."IsActive", u0."IsDeleted", u0."LastLoginAt", u0."PasswordHash", u0."Role", u0."Username"
        FROM "Users" AS u0
        WHERE NOT (u0."IsDeleted")
    ) AS t1 ON l."ReviewedById" = t1."Id"
    WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
    LIMIT 1
) AS t2
LEFT JOIN (
    SELECT l1."Id", l1."DeletedAt", l1."FileContent", l1."FileName", l1."IsDeleted", l1."LeaveRequestId", l1."UploadedAt"
    FROM "LeaveAttachments" AS l1
    WHERE NOT (l1."IsDeleted")
) AS t3 ON t2."Id" = t3."LeaveRequestId"
ORDER BY t2."Id", t2."Id0", t2."Id1", t2."Id2"
2025-06-13 10:05:10,918 [45] ERROR LeaveManagementSystem.Controllers.LeaveRequestController - Error updating leave request status for ID: f137b974-0d82-42f4-abae-6660f7d0393c
System.Exception: Failed to update leave request status Cannot change status of a finalized request.
 ---> System.InvalidOperationException: Cannot change status of a finalized request.
   at LeaveManagementSystem.Services.LeaveRequestService.UpdateStatusAsync(Guid id, String status, Guid approverId) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 297
   --- End of inner exception stack trace ---
   at LeaveManagementSystem.Services.LeaveRequestService.UpdateStatusAsync(Guid id, String status, Guid approverId) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 334
   at LeaveManagementSystem.Controllers.LeaveRequestController.UpdateStatus(Guid id, UpdateLeaveRequestStatusDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Controllers/LeaveRequestController.cs:line 110
2025-06-13 10:05:15,888 [49] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T04:35:15.8888680Z, Method: PUT, Path: /api/v1/leave-requests/f137b974-0d82-42f4-abae-6660f7d0393c/status, User: Chandler
2025-06-13 10:05:15,889 [49] INFO  LeaveManagementSystem.Controllers.LeaveRequestController - Updating leave request status for ID: f137b974-0d82-42f4-abae-6660f7d0393c by approver ID: 0728af92-6d38-4547-be7c-bca1f3dcdcc6
2025-06-13 10:05:15,893 [49] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (3ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t2."Id", t2."CreatedAt", t2."DeletedAt", t2."EndDate", t2."IsDeleted", t2."LeaveTypeId", t2."Reason", t2."ReviewedById", t2."StartDate", t2."Status", t2."UpdatedAt", t2."UserId", t2."Id0", t2."CreatedAt0", t2."CreatedBy", t2."DeletedAt0", t2."Email", t2."Gender", t2."IsActive", t2."IsDeleted0", t2."LastLoginAt", t2."PasswordHash", t2."Role", t2."Username", t2."Id1", t2."CreatedAt1", t2."CreatedBy0", t2."DeletedAt1", t2."Description", t2."IsDeleted1", t2."Name", t2."StandardLeaveCount", t2."UpdatedAt0", t2."UpdatedBy", t2."Id2", t2."CreatedAt2", t2."CreatedBy1", t2."DeletedAt2", t2."Email0", t2."Gender0", t2."IsActive0", t2."IsDeleted2", t2."LastLoginAt0", t2."PasswordHash0", t2."Role0", t2."Username0", t3."Id", t3."DeletedAt", t3."FileContent", t3."FileName", t3."IsDeleted", t3."LeaveRequestId", t3."UploadedAt"
FROM (
    SELECT l."Id", l."CreatedAt", l."DeletedAt", l."EndDate", l."IsDeleted", l."LeaveTypeId", l."Reason", l."ReviewedById", l."StartDate", l."Status", l."UpdatedAt", l."UserId", t."Id" AS "Id0", t."CreatedAt" AS "CreatedAt0", t."CreatedBy", t."DeletedAt" AS "DeletedAt0", t."Email", t."Gender", t."IsActive", t."IsDeleted" AS "IsDeleted0", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id" AS "Id1", t0."CreatedAt" AS "CreatedAt1", t0."CreatedBy" AS "CreatedBy0", t0."DeletedAt" AS "DeletedAt1", t0."Description", t0."IsDeleted" AS "IsDeleted1", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt" AS "UpdatedAt0", t0."UpdatedBy", t1."Id" AS "Id2", t1."CreatedAt" AS "CreatedAt2", t1."CreatedBy" AS "CreatedBy1", t1."DeletedAt" AS "DeletedAt2", t1."Email" AS "Email0", t1."Gender" AS "Gender0", t1."IsActive" AS "IsActive0", t1."IsDeleted" AS "IsDeleted2", t1."LastLoginAt" AS "LastLoginAt0", t1."PasswordHash" AS "PasswordHash0", t1."Role" AS "Role0", t1."Username" AS "Username0"
    FROM "LeaveRequests" AS l
    INNER JOIN (
        SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
        FROM "Users" AS u
        WHERE NOT (u."IsDeleted")
    ) AS t ON l."UserId" = t."Id"
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t0 ON l."LeaveTypeId" = t0."Id"
    LEFT JOIN (
        SELECT u0."Id", u0."CreatedAt", u0."CreatedBy", u0."DeletedAt", u0."Email", u0."Gender", u0."IsActive", u0."IsDeleted", u0."LastLoginAt", u0."PasswordHash", u0."Role", u0."Username"
        FROM "Users" AS u0
        WHERE NOT (u0."IsDeleted")
    ) AS t1 ON l."ReviewedById" = t1."Id"
    WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
    LIMIT 1
) AS t2
LEFT JOIN (
    SELECT l1."Id", l1."DeletedAt", l1."FileContent", l1."FileName", l1."IsDeleted", l1."LeaveRequestId", l1."UploadedAt"
    FROM "LeaveAttachments" AS l1
    WHERE NOT (l1."IsDeleted")
) AS t3 ON t2."Id" = t3."LeaveRequestId"
ORDER BY t2."Id", t2."Id0", t2."Id1", t2."Id2"
2025-06-13 10:05:15,894 [49] ERROR LeaveManagementSystem.Controllers.LeaveRequestController - Error updating leave request status for ID: f137b974-0d82-42f4-abae-6660f7d0393c
System.Exception: Failed to update leave request status Cannot change status of a finalized request.
 ---> System.InvalidOperationException: Cannot change status of a finalized request.
   at LeaveManagementSystem.Services.LeaveRequestService.UpdateStatusAsync(Guid id, String status, Guid approverId) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 297
   --- End of inner exception stack trace ---
   at LeaveManagementSystem.Services.LeaveRequestService.UpdateStatusAsync(Guid id, String status, Guid approverId) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 334
   at LeaveManagementSystem.Controllers.LeaveRequestController.UpdateStatus(Guid id, UpdateLeaveRequestStatusDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Controllers/LeaveRequestController.cs:line 110
2025-06-13 10:06:42,324 [44] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T04:36:42.3241470Z, Method: GET, Path: /api/v1/leave-requests, User: Joey
2025-06-13 10:06:42,325 [44] INFO  LeaveManagementSystem.Controllers.LeaveRequestController - Fetching all leave requests.
2025-06-13 10:06:42,362 [44] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (30ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."DeletedAt", l."EndDate", l."IsDeleted", l."LeaveTypeId", l."Reason", l."ReviewedById", l."StartDate", l."Status", l."UpdatedAt", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy", t1."Id", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Email", t1."Gender", t1."IsActive", t1."IsDeleted", t1."LastLoginAt", t1."PasswordHash", t1."Role", t1."Username", t2."Id", t2."DeletedAt", t2."FileContent", t2."FileName", t2."IsDeleted", t2."LeaveRequestId", t2."UploadedAt"
FROM "LeaveRequests" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
LEFT JOIN (
    SELECT u0."Id", u0."CreatedAt", u0."CreatedBy", u0."DeletedAt", u0."Email", u0."Gender", u0."IsActive", u0."IsDeleted", u0."LastLoginAt", u0."PasswordHash", u0."Role", u0."Username"
    FROM "Users" AS u0
    WHERE NOT (u0."IsDeleted")
) AS t1 ON l."ReviewedById" = t1."Id"
LEFT JOIN (
    SELECT l1."Id", l1."DeletedAt", l1."FileContent", l1."FileName", l1."IsDeleted", l1."LeaveRequestId", l1."UploadedAt"
    FROM "LeaveAttachments" AS l1
    WHERE NOT (l1."IsDeleted")
) AS t2 ON l."Id" = t2."LeaveRequestId"
WHERE NOT (l."IsDeleted")
ORDER BY l."Id", t."Id", t0."Id", t1."Id"
2025-06-13 10:11:02,277 [40] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T04:41:02.2774090Z, Method: POST, Path: /api/v1/users, User: Chandler
2025-06-13 10:12:18,758 [46] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T04:42:18.7588690Z, Method: GET, Path: /api/v1/leave-requests, User: Chandler
2025-06-13 10:12:18,761 [46] INFO  LeaveManagementSystem.Controllers.LeaveRequestController - Fetching all leave requests.
2025-06-13 10:12:18,807 [40] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (14ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."DeletedAt", l."EndDate", l."IsDeleted", l."LeaveTypeId", l."Reason", l."ReviewedById", l."StartDate", l."Status", l."UpdatedAt", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy", t1."Id", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Email", t1."Gender", t1."IsActive", t1."IsDeleted", t1."LastLoginAt", t1."PasswordHash", t1."Role", t1."Username", t2."Id", t2."DeletedAt", t2."FileContent", t2."FileName", t2."IsDeleted", t2."LeaveRequestId", t2."UploadedAt"
FROM "LeaveRequests" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
LEFT JOIN (
    SELECT u0."Id", u0."CreatedAt", u0."CreatedBy", u0."DeletedAt", u0."Email", u0."Gender", u0."IsActive", u0."IsDeleted", u0."LastLoginAt", u0."PasswordHash", u0."Role", u0."Username"
    FROM "Users" AS u0
    WHERE NOT (u0."IsDeleted")
) AS t1 ON l."ReviewedById" = t1."Id"
LEFT JOIN (
    SELECT l1."Id", l1."DeletedAt", l1."FileContent", l1."FileName", l1."IsDeleted", l1."LeaveRequestId", l1."UploadedAt"
    FROM "LeaveAttachments" AS l1
    WHERE NOT (l1."IsDeleted")
) AS t2 ON l."Id" = t2."LeaveRequestId"
WHERE NOT (l."IsDeleted")
ORDER BY l."Id", t."Id", t0."Id", t1."Id"
2025-06-13 10:12:47,406 [40] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T04:42:47.4060110Z, Method: PUT, Path: /api/v1/leave-requests/f137b974-0d82-42f4-abae-6660f7d0393c/status, User: Chandler
2025-06-13 10:12:47,412 [40] INFO  LeaveManagementSystem.Controllers.LeaveRequestController - Updating leave request status for ID: f137b974-0d82-42f4-abae-6660f7d0393c by approver ID: 0728af92-6d38-4547-be7c-bca1f3dcdcc6
2025-06-13 10:12:47,418 [40] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (4ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t2."Id", t2."CreatedAt", t2."DeletedAt", t2."EndDate", t2."IsDeleted", t2."LeaveTypeId", t2."Reason", t2."ReviewedById", t2."StartDate", t2."Status", t2."UpdatedAt", t2."UserId", t2."Id0", t2."CreatedAt0", t2."CreatedBy", t2."DeletedAt0", t2."Email", t2."Gender", t2."IsActive", t2."IsDeleted0", t2."LastLoginAt", t2."PasswordHash", t2."Role", t2."Username", t2."Id1", t2."CreatedAt1", t2."CreatedBy0", t2."DeletedAt1", t2."Description", t2."IsDeleted1", t2."Name", t2."StandardLeaveCount", t2."UpdatedAt0", t2."UpdatedBy", t2."Id2", t2."CreatedAt2", t2."CreatedBy1", t2."DeletedAt2", t2."Email0", t2."Gender0", t2."IsActive0", t2."IsDeleted2", t2."LastLoginAt0", t2."PasswordHash0", t2."Role0", t2."Username0", t3."Id", t3."DeletedAt", t3."FileContent", t3."FileName", t3."IsDeleted", t3."LeaveRequestId", t3."UploadedAt"
FROM (
    SELECT l."Id", l."CreatedAt", l."DeletedAt", l."EndDate", l."IsDeleted", l."LeaveTypeId", l."Reason", l."ReviewedById", l."StartDate", l."Status", l."UpdatedAt", l."UserId", t."Id" AS "Id0", t."CreatedAt" AS "CreatedAt0", t."CreatedBy", t."DeletedAt" AS "DeletedAt0", t."Email", t."Gender", t."IsActive", t."IsDeleted" AS "IsDeleted0", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id" AS "Id1", t0."CreatedAt" AS "CreatedAt1", t0."CreatedBy" AS "CreatedBy0", t0."DeletedAt" AS "DeletedAt1", t0."Description", t0."IsDeleted" AS "IsDeleted1", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt" AS "UpdatedAt0", t0."UpdatedBy", t1."Id" AS "Id2", t1."CreatedAt" AS "CreatedAt2", t1."CreatedBy" AS "CreatedBy1", t1."DeletedAt" AS "DeletedAt2", t1."Email" AS "Email0", t1."Gender" AS "Gender0", t1."IsActive" AS "IsActive0", t1."IsDeleted" AS "IsDeleted2", t1."LastLoginAt" AS "LastLoginAt0", t1."PasswordHash" AS "PasswordHash0", t1."Role" AS "Role0", t1."Username" AS "Username0"
    FROM "LeaveRequests" AS l
    INNER JOIN (
        SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
        FROM "Users" AS u
        WHERE NOT (u."IsDeleted")
    ) AS t ON l."UserId" = t."Id"
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t0 ON l."LeaveTypeId" = t0."Id"
    LEFT JOIN (
        SELECT u0."Id", u0."CreatedAt", u0."CreatedBy", u0."DeletedAt", u0."Email", u0."Gender", u0."IsActive", u0."IsDeleted", u0."LastLoginAt", u0."PasswordHash", u0."Role", u0."Username"
        FROM "Users" AS u0
        WHERE NOT (u0."IsDeleted")
    ) AS t1 ON l."ReviewedById" = t1."Id"
    WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
    LIMIT 1
) AS t2
LEFT JOIN (
    SELECT l1."Id", l1."DeletedAt", l1."FileContent", l1."FileName", l1."IsDeleted", l1."LeaveRequestId", l1."UploadedAt"
    FROM "LeaveAttachments" AS l1
    WHERE NOT (l1."IsDeleted")
) AS t3 ON t2."Id" = t3."LeaveRequestId"
ORDER BY t2."Id", t2."Id0", t2."Id1", t2."Id2"
2025-06-13 10:12:47,427 [40] ERROR LeaveManagementSystem.Controllers.LeaveRequestController - Error updating leave request status for ID: f137b974-0d82-42f4-abae-6660f7d0393c
System.Exception: Failed to update leave request status Cannot change status of a finalized request.
 ---> System.InvalidOperationException: Cannot change status of a finalized request.
   at LeaveManagementSystem.Services.LeaveRequestService.UpdateStatusAsync(Guid id, String status, Guid approverId) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 297
   --- End of inner exception stack trace ---
   at LeaveManagementSystem.Services.LeaveRequestService.UpdateStatusAsync(Guid id, String status, Guid approverId) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 334
   at LeaveManagementSystem.Controllers.LeaveRequestController.UpdateStatus(Guid id, UpdateLeaveRequestStatusDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Controllers/LeaveRequestController.cs:line 110
2025-06-13 10:14:47,993 [40] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T04:44:47.9935040Z, Method: POST, Path: /api/LeaveBalance/deduct, User: Chandler
2025-06-13 10:15:12,055 [33] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T04:45:12.0549980Z, Method: POST, Path: /api/LeaveBalance/reset/user/%7BuserId%7D, User: Chandler
2025-06-13 10:15:28,922 [36] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T04:45:28.9225410Z, Method: GET, Path: /api/v1/leave-balance/user/7f1ffd9c-9e10-4b8c-82df-696060387368, User: Chandler
2025-06-13 10:15:28,939 [36] INFO  LeaveManagementSystem.Controllers.LeaveBalanceController - Fetching leave balances for user ID: 7f1ffd9c-9e10-4b8c-82df-696060387368
2025-06-13 10:15:28,954 [36] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (11ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."LeaveTypeId", t0."TotalLeaves", t0."UsedLeaves", t0."UserId", t0."Id0", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted") AND u."Id" = @__key_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t1."Id" AS "Id0", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Description", t1."IsDeleted", t1."Name", t1."StandardLeaveCount", t1."UpdatedAt", t1."UpdatedBy"
    FROM "LeaveBalances" AS l
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t1 ON l."LeaveTypeId" = t1."Id"
) AS t0 ON t."Id" = t0."UserId"
ORDER BY t."Id", t0."Id"
2025-06-13 10:15:36,386 [36] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T04:45:36.3868240Z, Method: GET, Path: /api/v1/leave-balance/user/7f1ffd9c-9e10-4b8c-82df-696060387368/leaveType/80664038-baf4-458f-a0d2-43deb910c8a5, User: Chandler
2025-06-13 10:15:36,396 [36] INFO  LeaveManagementSystem.Controllers.LeaveBalanceController - Fetching leave balance for user ID: 7f1ffd9c-9e10-4b8c-82df-696060387368 and leave type ID: 80664038-baf4-458f-a0d2-43deb910c8a5
2025-06-13 10:15:36,401 [36] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (3ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."LeaveTypeId", t0."TotalLeaves", t0."UsedLeaves", t0."UserId", t0."Id0", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted") AND u."Id" = @__key_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t1."Id" AS "Id0", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Description", t1."IsDeleted", t1."Name", t1."StandardLeaveCount", t1."UpdatedAt", t1."UpdatedBy"
    FROM "LeaveBalances" AS l
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t1 ON l."LeaveTypeId" = t1."Id"
) AS t0 ON t."Id" = t0."UserId"
ORDER BY t."Id", t0."Id"
2025-06-13 10:16:00,524 [33] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T04:46:00.5234750Z, Method: GET, Path: /api/v1/leave-balance/user/%7B7f1ffd9c-9e10-4b8c-82df-696060387368%7D/leaveType/%7B80664038-baf4-458f-a0d2-43deb910c8a5%7D, User: Chandler
2025-06-13 10:16:00,530 [33] INFO  LeaveManagementSystem.Controllers.LeaveBalanceController - Fetching leave balance for user ID: 7f1ffd9c-9e10-4b8c-82df-696060387368 and leave type ID: 80664038-baf4-458f-a0d2-43deb910c8a5
2025-06-13 10:16:00,535 [35] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (3ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."LeaveTypeId", t0."TotalLeaves", t0."UsedLeaves", t0."UserId", t0."Id0", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted") AND u."Id" = @__key_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t1."Id" AS "Id0", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Description", t1."IsDeleted", t1."Name", t1."StandardLeaveCount", t1."UpdatedAt", t1."UpdatedBy"
    FROM "LeaveBalances" AS l
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t1 ON l."LeaveTypeId" = t1."Id"
) AS t0 ON t."Id" = t0."UserId"
ORDER BY t."Id", t0."Id"
2025-06-13 13:02:20,094 [39] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T07:32:20.0935240Z, Method: POST, Path: /api/v1/users, User: Chandler
2025-06-13 13:02:20,114 [39] INFO  LeaveManagementSystem.Controllers.UsersController - Creating new user.
2025-06-13 13:02:20,354 [44] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Guid), @p3='?' (DbType = DateTime), @p4='?', @p5='?', @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime), @p9='?', @p10='?', @p11='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "Users" ("Id", "CreatedAt", "CreatedBy", "DeletedAt", "Email", "Gender", "IsActive", "IsDeleted", "LastLoginAt", "PasswordHash", "Role", "Username")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-13 13:02:20,371 [41] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM "LeaveBalances" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
2025-06-13 13:02:20,376 [41] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."CreatedBy", l."DeletedAt", l."Description", l."IsDeleted", l."Name", l."StandardLeaveCount", l."UpdatedAt", l."UpdatedBy"
FROM "LeaveTypes" AS l
WHERE NOT (l."IsDeleted")
2025-06-13 13:02:20,383 [41] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
INSERT INTO "LeaveBalances" ("Id", "LeaveTypeId", "TotalLeaves", "UsedLeaves", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-06-13 13:02:20,385 [39] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
INSERT INTO "LeaveBalances" ("Id", "LeaveTypeId", "TotalLeaves", "UsedLeaves", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-06-13 13:02:20,386 [44] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
INSERT INTO "LeaveBalances" ("Id", "LeaveTypeId", "TotalLeaves", "UsedLeaves", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-06-13 13:02:20,386 [44] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
INSERT INTO "LeaveBalances" ("Id", "LeaveTypeId", "TotalLeaves", "UsedLeaves", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-06-13 13:02:20,387 [44] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
INSERT INTO "LeaveBalances" ("Id", "LeaveTypeId", "TotalLeaves", "UsedLeaves", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-06-13 13:02:20,393 [44] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
INSERT INTO "LeaveBalances" ("Id", "LeaveTypeId", "TotalLeaves", "UsedLeaves", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-06-13 13:02:20,394 [39] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
INSERT INTO "LeaveBalances" ("Id", "LeaveTypeId", "TotalLeaves", "UsedLeaves", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-06-13 13:02:20,395 [39] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
INSERT INTO "LeaveBalances" ("Id", "LeaveTypeId", "TotalLeaves", "UsedLeaves", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-06-13 13:02:20,396 [39] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
INSERT INTO "LeaveBalances" ("Id", "LeaveTypeId", "TotalLeaves", "UsedLeaves", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-06-13 13:02:20,398 [39] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
INSERT INTO "LeaveBalances" ("Id", "LeaveTypeId", "TotalLeaves", "UsedLeaves", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-06-13 13:02:20,401 [44] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
INSERT INTO "LeaveBalances" ("Id", "LeaveTypeId", "TotalLeaves", "UsedLeaves", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-06-13 13:02:20,402 [44] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
INSERT INTO "LeaveBalances" ("Id", "LeaveTypeId", "TotalLeaves", "UsedLeaves", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-06-13 13:02:20,403 [44] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
INSERT INTO "LeaveBalances" ("Id", "LeaveTypeId", "TotalLeaves", "UsedLeaves", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-06-13 13:02:20,418 [41] ERROR Microsoft.EntityFrameworkCore.Database.Command - Failed executing DbCommand (14ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Guid), @p4='?', @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime), @p7='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
INSERT INTO "AuditLogs" ("Id", "Action", "DeletedAt", "EntityId", "EntityType", "IsDeleted", "Timestamp", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-06-13 13:02:28,144 [39] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T07:32:28.1449620Z, Method: POST, Path: /api/v1/users, User: Chandler
2025-06-13 13:02:28,157 [39] INFO  LeaveManagementSystem.Controllers.UsersController - Creating new user.
2025-06-13 13:02:28,358 [39] ERROR Microsoft.EntityFrameworkCore.Database.Command - Failed executing DbCommand (26ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Guid), @p3='?' (DbType = DateTime), @p4='?', @p5='?', @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTime), @p9='?', @p10='?', @p11='?'], CommandType='Text', CommandTimeout='30']
INSERT INTO "Users" ("Id", "CreatedAt", "CreatedBy", "DeletedAt", "Email", "Gender", "IsActive", "IsDeleted", "LastLoginAt", "PasswordHash", "Role", "Username")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-13 13:02:28,375 [39] ERROR Microsoft.EntityFrameworkCore.Update - An exception occurred in the database while saving changes for context type 'LeaveManagementSystem.Contexts.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "IX_Users_Email"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|234_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "IX_Users_Email"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Users
    ConstraintName: IX_Users_Email
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "IX_Users_Email"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|234_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "IX_Users_Email"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Users
    ConstraintName: IX_Users_Email
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-06-13 13:02:28,380 [39] ERROR LeaveManagementSystem.Controllers.UsersController - Error occurred while creating a user.
LeaveManagementSystem.Exceptions.DuplicateKeyException: A user with the same unique field (like email or username) already exists.
 ---> Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23505: duplicate key value violates unique constraint "IX_Users_Email"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.<ReadMessage>g__ReadMessageLong|234_0(NpgsqlConnector connector, Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(CommandBehavior behavior, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23505
    MessageText: duplicate key value violates unique constraint "IX_Users_Email"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: Users
    ConstraintName: IX_Users_Email
    File: nbtinsert.c
    Line: 673
    Routine: _bt_check_unique
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at LeaveManagementSystem.Repositories.Repository`2.Add(T item) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Repositories/Repository.cs:line 19
   at LeaveManagementSystem.Services.UserService.CreateUser(CreateUserDto createUserDto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/UserService.cs:line 159
   --- End of inner exception stack trace ---
   at LeaveManagementSystem.Services.UserService.CreateUser(CreateUserDto createUserDto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/UserService.cs:line 173
   at LeaveManagementSystem.Controllers.UsersController.CreateUser(CreateUserDto createUserDto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Controllers/UserController.cs:line 180
2025-06-13 13:02:51,866 [39] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T07:32:51.8660210Z, Method: PUT, Path: /api/v1/users/0b23eda3-d5c7-40a2-9049-557e40524a4d, User: Joey
2025-06-13 13:02:51,870 [39] INFO  LeaveManagementSystem.Controllers.UsersController - Updating user with ID: 0b23eda3-d5c7-40a2-9049-557e40524a4d
2025-06-13 13:02:51,909 [39] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (35ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."LeaveTypeId", t0."TotalLeaves", t0."UsedLeaves", t0."UserId", t0."Id0", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted") AND u."Id" = @__key_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t1."Id" AS "Id0", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Description", t1."IsDeleted", t1."Name", t1."StandardLeaveCount", t1."UpdatedAt", t1."UpdatedBy"
    FROM "LeaveBalances" AS l
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t1 ON l."LeaveTypeId" = t1."Id"
) AS t0 ON t."Id" = t0."UserId"
ORDER BY t."Id", t0."Id"
2025-06-13 13:02:51,911 [39] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."LeaveTypeId", t0."TotalLeaves", t0."UsedLeaves", t0."UserId", t0."Id0", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted") AND u."Id" = @__key_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t1."Id" AS "Id0", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Description", t1."IsDeleted", t1."Name", t1."StandardLeaveCount", t1."UpdatedAt", t1."UpdatedBy"
    FROM "LeaveBalances" AS l
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t1 ON l."LeaveTypeId" = t1."Id"
) AS t0 ON t."Id" = t0."UserId"
ORDER BY t."Id", t0."Id"
2025-06-13 13:02:51,917 [39] ERROR Microsoft.EntityFrameworkCore.Database.Command - Failed executing DbCommand (2ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Guid), @p4='?', @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime), @p7='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
INSERT INTO "AuditLogs" ("Id", "Action", "DeletedAt", "EntityId", "EntityType", "IsDeleted", "Timestamp", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-06-13 13:03:26,699 [39] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T07:33:26.6990760Z, Method: POST, Path: /api/v1/auth/login, User: Tony
2025-06-13 13:03:26,738 [41] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
FROM "Users" AS u
WHERE NOT (u."IsDeleted")
2025-06-13 13:03:26,894 [41] INFO  LeaveManagementSystem.Services.AuthenticationService - User aryastark@example.com logged in successfully
2025-06-13 13:03:26,894 [41] INFO  LeaveManagementSystem.Controllers.AuthenticationController - User aryastark@example.com logged in successfully.
2025-06-13 13:03:52,788 [41] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T07:33:52.7888100Z, Method: PUT, Path: /api/v1/users/0b23eda3-d5c7-40a2-9049-557e40524a4d, User: Arya
2025-06-13 13:03:52,794 [41] WARN  LeaveManagementSystem.Controllers.UsersController - User is not authorized to update user with ID: 0b23eda3-d5c7-40a2-9049-557e40524a4d
2025-06-13 13:04:16,300 [39] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T07:34:16.3006450Z, Method: PUT, Path: /api/v1/users/0b23eda3-d5c7-40a2-9049-557e40524a4d, User: Joey
2025-06-13 13:04:16,303 [39] INFO  LeaveManagementSystem.Controllers.UsersController - Updating user with ID: 0b23eda3-d5c7-40a2-9049-557e40524a4d
2025-06-13 13:04:16,324 [44] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (15ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."LeaveTypeId", t0."TotalLeaves", t0."UsedLeaves", t0."UserId", t0."Id0", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted") AND u."Id" = @__key_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t1."Id" AS "Id0", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Description", t1."IsDeleted", t1."Name", t1."StandardLeaveCount", t1."UpdatedAt", t1."UpdatedBy"
    FROM "LeaveBalances" AS l
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t1 ON l."LeaveTypeId" = t1."Id"
) AS t0 ON t."Id" = t0."UserId"
ORDER BY t."Id", t0."Id"
2025-06-13 13:04:16,327 [44] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."LeaveTypeId", t0."TotalLeaves", t0."UsedLeaves", t0."UserId", t0."Id0", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted") AND u."Id" = @__key_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t1."Id" AS "Id0", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Description", t1."IsDeleted", t1."Name", t1."StandardLeaveCount", t1."UpdatedAt", t1."UpdatedBy"
    FROM "LeaveBalances" AS l
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t1 ON l."LeaveTypeId" = t1."Id"
) AS t0 ON t."Id" = t0."UserId"
ORDER BY t."Id", t0."Id"
2025-06-13 13:04:16,356 [41] ERROR Microsoft.EntityFrameworkCore.Database.Command - Failed executing DbCommand (21ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Guid), @p4='?', @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime), @p7='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
INSERT INTO "AuditLogs" ("Id", "Action", "DeletedAt", "EntityId", "EntityType", "IsDeleted", "Timestamp", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-06-13 13:04:26,670 [39] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T07:34:26.6708160Z, Method: PUT, Path: /api/v1/users/0b23eda3-d5c7-40a2-9049-557e40524a4d, User: Chandler
2025-06-13 13:04:26,673 [39] INFO  LeaveManagementSystem.Controllers.UsersController - Updating user with ID: 0b23eda3-d5c7-40a2-9049-557e40524a4d
2025-06-13 13:04:26,702 [44] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (9ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."LeaveTypeId", t0."TotalLeaves", t0."UsedLeaves", t0."UserId", t0."Id0", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted") AND u."Id" = @__key_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t1."Id" AS "Id0", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Description", t1."IsDeleted", t1."Name", t1."StandardLeaveCount", t1."UpdatedAt", t1."UpdatedBy"
    FROM "LeaveBalances" AS l
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t1 ON l."LeaveTypeId" = t1."Id"
) AS t0 ON t."Id" = t0."UserId"
ORDER BY t."Id", t0."Id"
2025-06-13 13:04:26,706 [41] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."LeaveTypeId", t0."TotalLeaves", t0."UsedLeaves", t0."UserId", t0."Id0", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted") AND u."Id" = @__key_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t1."Id" AS "Id0", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Description", t1."IsDeleted", t1."Name", t1."StandardLeaveCount", t1."UpdatedAt", t1."UpdatedBy"
    FROM "LeaveBalances" AS l
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t1 ON l."LeaveTypeId" = t1."Id"
) AS t0 ON t."Id" = t0."UserId"
ORDER BY t."Id", t0."Id"
2025-06-13 13:04:26,722 [41] ERROR Microsoft.EntityFrameworkCore.Database.Command - Failed executing DbCommand (15ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Guid), @p4='?', @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime), @p7='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
INSERT INTO "AuditLogs" ("Id", "Action", "DeletedAt", "EntityId", "EntityType", "IsDeleted", "Timestamp", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-06-13 13:04:52,986 [41] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T07:34:52.9863020Z, Method: GET, Path: /api/v1/leavetypes, User: Anonymous
2025-06-13 13:04:52,991 [41] INFO  LeaveManagementSystem.Controllers.LeaveTypeController - Fetching all leave types with pagination.
2025-06-13 13:04:53,049 [38] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."CreatedBy", l."DeletedAt", l."Description", l."IsDeleted", l."Name", l."StandardLeaveCount", l."UpdatedAt", l."UpdatedBy"
FROM "LeaveTypes" AS l
WHERE NOT (l."IsDeleted")
2025-06-13 13:05:04,040 [44] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T07:35:04.0402700Z, Method: GET, Path: /api/v1/leavetypes, User: Anonymous
2025-06-13 13:05:04,047 [44] INFO  LeaveManagementSystem.Controllers.LeaveTypeController - Fetching all leave types with pagination.
2025-06-13 13:05:04,053 [44] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."CreatedBy", l."DeletedAt", l."Description", l."IsDeleted", l."Name", l."StandardLeaveCount", l."UpdatedAt", l."UpdatedBy"
FROM "LeaveTypes" AS l
WHERE NOT (l."IsDeleted")
2025-06-13 13:05:20,829 [41] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T07:35:20.8290840Z, Method: GET, Path: /api/v1/leavetypes/%7B21a9c3ae-dcc8-41aa-9e64-57ec38b72420%7D%0A, User: Anonymous
2025-06-13 13:05:20,844 [41] INFO  LeaveManagementSystem.Controllers.LeaveTypeController - Fetching leave type with ID: 21a9c3ae-dcc8-41aa-9e64-57ec38b72420
2025-06-13 13:05:20,847 [41] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."CreatedBy", l."DeletedAt", l."Description", l."IsDeleted", l."Name", l."StandardLeaveCount", l."UpdatedAt", l."UpdatedBy"
FROM "LeaveTypes" AS l
WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
LIMIT 1
2025-06-13 13:05:56,087 [44] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T07:35:56.0870970Z, Method: PUT, Path: /api/v1/leavetypes/6f1be7e2-ad8e-41fa-8ac9-7669c58a20b2, User: Chandler
2025-06-13 13:05:56,107 [44] INFO  LeaveManagementSystem.Controllers.LeaveTypeController - Updating leave type with ID: 6f1be7e2-ad8e-41fa-8ac9-7669c58a20b2
2025-06-13 13:05:56,112 [44] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."CreatedBy", l."DeletedAt", l."Description", l."IsDeleted", l."Name", l."StandardLeaveCount", l."UpdatedAt", l."UpdatedBy"
FROM "LeaveTypes" AS l
WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
LIMIT 1
2025-06-13 13:05:56,113 [44] WARN  LeaveManagementSystem.Controllers.LeaveTypeController - Leave type with ID: 6f1be7e2-ad8e-41fa-8ac9-7669c58a20b2 not found for update.
2025-06-13 13:06:46,788 [44] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T07:36:46.7881450Z, Method: GET, Path: /api/v1/leavetypes, User: Joey
2025-06-13 13:06:46,790 [44] INFO  LeaveManagementSystem.Controllers.LeaveTypeController - Fetching all leave types with pagination.
2025-06-13 13:06:46,796 [41] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."CreatedBy", l."DeletedAt", l."Description", l."IsDeleted", l."Name", l."StandardLeaveCount", l."UpdatedAt", l."UpdatedBy"
FROM "LeaveTypes" AS l
WHERE NOT (l."IsDeleted")
2025-06-13 13:07:10,046 [37] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T07:37:10.0462580Z, Method: PUT, Path: /api/v1/leavetypes/a522c818-ef32-4c98-a60c-003d3bb4133c, User: Chandler
2025-06-13 13:07:10,052 [37] INFO  LeaveManagementSystem.Controllers.LeaveTypeController - Updating leave type with ID: a522c818-ef32-4c98-a60c-003d3bb4133c
2025-06-13 13:07:10,081 [44] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (26ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."CreatedBy", l."DeletedAt", l."Description", l."IsDeleted", l."Name", l."StandardLeaveCount", l."UpdatedAt", l."UpdatedBy"
FROM "LeaveTypes" AS l
WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
LIMIT 1
2025-06-13 13:07:10,087 [37] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."CreatedBy", l."DeletedAt", l."Description", l."IsDeleted", l."Name", l."StandardLeaveCount", l."UpdatedAt", l."UpdatedBy"
FROM "LeaveTypes" AS l
WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
LIMIT 1
2025-06-13 13:07:10,100 [35] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (9ms) [Parameters=[@p6='?' (DbType = Guid), @p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = Int32), @p4='?' (DbType = DateTime), @p5='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
UPDATE "LeaveTypes" SET "CreatedAt" = @p0, "Description" = @p1, "Name" = @p2, "StandardLeaveCount" = @p3, "UpdatedAt" = @p4, "UpdatedBy" = @p5
WHERE "Id" = @p6;
2025-06-13 13:07:10,119 [35] ERROR Microsoft.EntityFrameworkCore.Database.Command - Failed executing DbCommand (12ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Guid), @p4='?', @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime), @p7='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
INSERT INTO "AuditLogs" ("Id", "Action", "DeletedAt", "EntityId", "EntityType", "IsDeleted", "Timestamp", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-06-13 13:10:57,661 [44] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T07:40:57.6617560Z, Method: PUT, Path: /api/v1/leavetypes/a522c818-ef32-4c98-a60c-003d3bb4133c, User: Chandler
2025-06-13 13:10:57,665 [44] INFO  LeaveManagementSystem.Controllers.LeaveTypeController - Updating leave type with ID: a522c818-ef32-4c98-a60c-003d3bb4133c
2025-06-13 13:10:57,722 [44] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (4ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."CreatedBy", l."DeletedAt", l."Description", l."IsDeleted", l."Name", l."StandardLeaveCount", l."UpdatedAt", l."UpdatedBy"
FROM "LeaveTypes" AS l
WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
LIMIT 1
2025-06-13 13:10:57,726 [23] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."CreatedBy", l."DeletedAt", l."Description", l."IsDeleted", l."Name", l."StandardLeaveCount", l."UpdatedAt", l."UpdatedBy"
FROM "LeaveTypes" AS l
WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
LIMIT 1
2025-06-13 13:10:57,755 [23] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (27ms) [Parameters=[@p3='?' (DbType = Guid), @p0='?', @p1='?', @p2='?' (DbType = DateTime)], CommandType='Text', CommandTimeout='30']
UPDATE "LeaveTypes" SET "Description" = @p0, "Name" = @p1, "UpdatedAt" = @p2
WHERE "Id" = @p3;
2025-06-13 13:10:57,789 [23] ERROR Microsoft.EntityFrameworkCore.Database.Command - Failed executing DbCommand (32ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Guid), @p4='?', @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime), @p7='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
INSERT INTO "AuditLogs" ("Id", "Action", "DeletedAt", "EntityId", "EntityType", "IsDeleted", "Timestamp", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-06-13 13:11:30,298 [23] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T07:41:30.2982520Z, Method: DELETE, Path: /api/v1/leavetypes/6f1be7e2-ad8e-41fa-8ac9-7669c58a20b2, User: Chandler
2025-06-13 13:11:30,317 [23] INFO  LeaveManagementSystem.Controllers.LeaveTypeController - Deleting leave type with ID: 6f1be7e2-ad8e-41fa-8ac9-7669c58a20b2
2025-06-13 13:11:30,338 [23] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (3ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."CreatedBy", l."DeletedAt", l."Description", l."IsDeleted", l."Name", l."StandardLeaveCount", l."UpdatedAt", l."UpdatedBy"
FROM "LeaveTypes" AS l
WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
LIMIT 1
2025-06-13 13:11:30,341 [23] WARN  LeaveManagementSystem.Controllers.LeaveTypeController - Leave type with ID: 6f1be7e2-ad8e-41fa-8ac9-7669c58a20b2 not found for deletion.
2025-06-13 13:12:12,531 [23] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T07:42:12.5318080Z, Method: GET, Path: /api/v1/leave-requests, User: Chandler
2025-06-13 13:12:12,535 [23] INFO  LeaveManagementSystem.Controllers.LeaveRequestController - Fetching all leave requests.
2025-06-13 13:12:12,561 [23] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."DeletedAt", l."EndDate", l."IsDeleted", l."LeaveTypeId", l."Reason", l."ReviewedById", l."StartDate", l."Status", l."UpdatedAt", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy", t1."Id", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Email", t1."Gender", t1."IsActive", t1."IsDeleted", t1."LastLoginAt", t1."PasswordHash", t1."Role", t1."Username", t2."Id", t2."DeletedAt", t2."FileContent", t2."FileName", t2."IsDeleted", t2."LeaveRequestId", t2."UploadedAt"
FROM "LeaveRequests" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
LEFT JOIN (
    SELECT u0."Id", u0."CreatedAt", u0."CreatedBy", u0."DeletedAt", u0."Email", u0."Gender", u0."IsActive", u0."IsDeleted", u0."LastLoginAt", u0."PasswordHash", u0."Role", u0."Username"
    FROM "Users" AS u0
    WHERE NOT (u0."IsDeleted")
) AS t1 ON l."ReviewedById" = t1."Id"
LEFT JOIN (
    SELECT l1."Id", l1."DeletedAt", l1."FileContent", l1."FileName", l1."IsDeleted", l1."LeaveRequestId", l1."UploadedAt"
    FROM "LeaveAttachments" AS l1
    WHERE NOT (l1."IsDeleted")
) AS t2 ON l."Id" = t2."LeaveRequestId"
WHERE NOT (l."IsDeleted")
ORDER BY l."Id", t."Id", t0."Id", t1."Id"
2025-06-13 13:15:32,846 [23] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T07:45:32.8461580Z, Method: GET, Path: /api/v1/leave-requests/0578f9ba-ed0f-4789-9105-5d0aaee9b0c1, User: Joey
2025-06-13 13:15:32,853 [23] INFO  LeaveManagementSystem.Controllers.LeaveRequestController - Fetching leave request with ID: 0578f9ba-ed0f-4789-9105-5d0aaee9b0c1
2025-06-13 13:15:32,884 [23] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (27ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t2."Id", t2."CreatedAt", t2."DeletedAt", t2."EndDate", t2."IsDeleted", t2."LeaveTypeId", t2."Reason", t2."ReviewedById", t2."StartDate", t2."Status", t2."UpdatedAt", t2."UserId", t2."Id0", t2."CreatedAt0", t2."CreatedBy", t2."DeletedAt0", t2."Email", t2."Gender", t2."IsActive", t2."IsDeleted0", t2."LastLoginAt", t2."PasswordHash", t2."Role", t2."Username", t2."Id1", t2."CreatedAt1", t2."CreatedBy0", t2."DeletedAt1", t2."Description", t2."IsDeleted1", t2."Name", t2."StandardLeaveCount", t2."UpdatedAt0", t2."UpdatedBy", t2."Id2", t2."CreatedAt2", t2."CreatedBy1", t2."DeletedAt2", t2."Email0", t2."Gender0", t2."IsActive0", t2."IsDeleted2", t2."LastLoginAt0", t2."PasswordHash0", t2."Role0", t2."Username0", t3."Id", t3."DeletedAt", t3."FileContent", t3."FileName", t3."IsDeleted", t3."LeaveRequestId", t3."UploadedAt"
FROM (
    SELECT l."Id", l."CreatedAt", l."DeletedAt", l."EndDate", l."IsDeleted", l."LeaveTypeId", l."Reason", l."ReviewedById", l."StartDate", l."Status", l."UpdatedAt", l."UserId", t."Id" AS "Id0", t."CreatedAt" AS "CreatedAt0", t."CreatedBy", t."DeletedAt" AS "DeletedAt0", t."Email", t."Gender", t."IsActive", t."IsDeleted" AS "IsDeleted0", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id" AS "Id1", t0."CreatedAt" AS "CreatedAt1", t0."CreatedBy" AS "CreatedBy0", t0."DeletedAt" AS "DeletedAt1", t0."Description", t0."IsDeleted" AS "IsDeleted1", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt" AS "UpdatedAt0", t0."UpdatedBy", t1."Id" AS "Id2", t1."CreatedAt" AS "CreatedAt2", t1."CreatedBy" AS "CreatedBy1", t1."DeletedAt" AS "DeletedAt2", t1."Email" AS "Email0", t1."Gender" AS "Gender0", t1."IsActive" AS "IsActive0", t1."IsDeleted" AS "IsDeleted2", t1."LastLoginAt" AS "LastLoginAt0", t1."PasswordHash" AS "PasswordHash0", t1."Role" AS "Role0", t1."Username" AS "Username0"
    FROM "LeaveRequests" AS l
    INNER JOIN (
        SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
        FROM "Users" AS u
        WHERE NOT (u."IsDeleted")
    ) AS t ON l."UserId" = t."Id"
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t0 ON l."LeaveTypeId" = t0."Id"
    LEFT JOIN (
        SELECT u0."Id", u0."CreatedAt", u0."CreatedBy", u0."DeletedAt", u0."Email", u0."Gender", u0."IsActive", u0."IsDeleted", u0."LastLoginAt", u0."PasswordHash", u0."Role", u0."Username"
        FROM "Users" AS u0
        WHERE NOT (u0."IsDeleted")
    ) AS t1 ON l."ReviewedById" = t1."Id"
    WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
    LIMIT 1
) AS t2
LEFT JOIN (
    SELECT l1."Id", l1."DeletedAt", l1."FileContent", l1."FileName", l1."IsDeleted", l1."LeaveRequestId", l1."UploadedAt"
    FROM "LeaveAttachments" AS l1
    WHERE NOT (l1."IsDeleted")
) AS t3 ON t2."Id" = t3."LeaveRequestId"
ORDER BY t2."Id", t2."Id0", t2."Id1", t2."Id2"
2025-06-13 13:16:33,876 [22] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T07:46:33.8754430Z, Method: POST, Path: /api/v1/leave-requests, User: Sample
2025-06-13 13:16:33,878 [22] INFO  LeaveManagementSystem.Controllers.LeaveRequestController - Creating new leave request.
2025-06-13 13:16:33,893 [20] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (13ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."LeaveTypeId", t0."TotalLeaves", t0."UsedLeaves", t0."UserId", t0."Id0", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted") AND u."Id" = @__key_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t1."Id" AS "Id0", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Description", t1."IsDeleted", t1."Name", t1."StandardLeaveCount", t1."UpdatedAt", t1."UpdatedBy"
    FROM "LeaveBalances" AS l
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t1 ON l."LeaveTypeId" = t1."Id"
) AS t0 ON t."Id" = t0."UserId"
ORDER BY t."Id", t0."Id"
2025-06-13 13:16:33,895 [19] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (0ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."CreatedBy", l."DeletedAt", l."Description", l."IsDeleted", l."Name", l."StandardLeaveCount", l."UpdatedAt", l."UpdatedBy"
FROM "LeaveTypes" AS l
WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
LIMIT 1
2025-06-13 13:16:33,898 [19] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."DeletedAt", l."EndDate", l."IsDeleted", l."LeaveTypeId", l."Reason", l."ReviewedById", l."StartDate", l."Status", l."UpdatedAt", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy", t1."Id", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Email", t1."Gender", t1."IsActive", t1."IsDeleted", t1."LastLoginAt", t1."PasswordHash", t1."Role", t1."Username", t2."Id", t2."DeletedAt", t2."FileContent", t2."FileName", t2."IsDeleted", t2."LeaveRequestId", t2."UploadedAt"
FROM "LeaveRequests" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
LEFT JOIN (
    SELECT u0."Id", u0."CreatedAt", u0."CreatedBy", u0."DeletedAt", u0."Email", u0."Gender", u0."IsActive", u0."IsDeleted", u0."LastLoginAt", u0."PasswordHash", u0."Role", u0."Username"
    FROM "Users" AS u0
    WHERE NOT (u0."IsDeleted")
) AS t1 ON l."ReviewedById" = t1."Id"
LEFT JOIN (
    SELECT l1."Id", l1."DeletedAt", l1."FileContent", l1."FileName", l1."IsDeleted", l1."LeaveRequestId", l1."UploadedAt"
    FROM "LeaveAttachments" AS l1
    WHERE NOT (l1."IsDeleted")
) AS t2 ON l."Id" = t2."LeaveRequestId"
WHERE NOT (l."IsDeleted")
ORDER BY l."Id", t."Id", t0."Id", t1."Id"
2025-06-13 13:16:33,908 [19] ERROR LeaveManagementSystem.Controllers.LeaveRequestController - Error creating leave request.
System.Exception: Failed to create leave request You have already applied for leave in this date range.
 ---> System.InvalidOperationException: You have already applied for leave in this date range.
   at LeaveManagementSystem.Services.LeaveRequestService.CreateAsync(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 225
   --- End of inner exception stack trace ---
   at LeaveManagementSystem.Services.LeaveRequestService.CreateAsync(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 282
   at LeaveManagementSystem.Controllers.LeaveRequestController.Create(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Controllers/LeaveRequestController.cs:line 79
2025-06-13 13:20:29,198 [.NET Signal Handler] INFO  Microsoft.Hosting.Lifetime - Application is shutting down...
2025-06-13 13:25:13,024 [1] WARN  Microsoft.EntityFrameworkCore.Model.Validation - Entity 'LeaveType' has a global query filter defined and is the required end of a relationship with the entity 'LeaveBalance'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-06-13 13:25:13,303 [1] INFO  Microsoft.Hosting.Lifetime - Now listening on: http://localhost:5000
2025-06-13 13:25:13,304 [1] INFO  Microsoft.Hosting.Lifetime - Application started. Press Ctrl+C to shut down.
2025-06-13 13:25:13,304 [1] INFO  Microsoft.Hosting.Lifetime - Hosting environment: Development
2025-06-13 13:25:13,304 [1] INFO  Microsoft.Hosting.Lifetime - Content root path: /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem
2025-06-13 13:25:14,212 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."DeletedAt", l."EndDate", l."IsDeleted", l."LeaveTypeId", l."Reason", l."ReviewedById", l."StartDate", l."Status", l."UpdatedAt", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy", t1."Id", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Email", t1."Gender", t1."IsActive", t1."IsDeleted", t1."LastLoginAt", t1."PasswordHash", t1."Role", t1."Username", t2."Id", t2."DeletedAt", t2."FileContent", t2."FileName", t2."IsDeleted", t2."LeaveRequestId", t2."UploadedAt"
FROM "LeaveRequests" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
LEFT JOIN (
    SELECT u0."Id", u0."CreatedAt", u0."CreatedBy", u0."DeletedAt", u0."Email", u0."Gender", u0."IsActive", u0."IsDeleted", u0."LastLoginAt", u0."PasswordHash", u0."Role", u0."Username"
    FROM "Users" AS u0
    WHERE NOT (u0."IsDeleted")
) AS t1 ON l."ReviewedById" = t1."Id"
LEFT JOIN (
    SELECT l1."Id", l1."DeletedAt", l1."FileContent", l1."FileName", l1."IsDeleted", l1."LeaveRequestId", l1."UploadedAt"
    FROM "LeaveAttachments" AS l1
    WHERE NOT (l1."IsDeleted")
) AS t2 ON l."Id" = t2."LeaveRequestId"
WHERE NOT (l."IsDeleted")
ORDER BY l."Id", t."Id", t0."Id", t1."Id"
2025-06-13 13:25:22,613 [7] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T07:55:22.6133160Z, Method: POST, Path: /api/v1/leave-requests, User: Chandler
2025-06-13 13:25:22,667 [7] INFO  LeaveManagementSystem.Controllers.LeaveRequestController - Creating new leave request.
2025-06-13 13:25:22,697 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (8ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."LeaveTypeId", t0."TotalLeaves", t0."UsedLeaves", t0."UserId", t0."Id0", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted") AND u."Id" = @__key_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t1."Id" AS "Id0", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Description", t1."IsDeleted", t1."Name", t1."StandardLeaveCount", t1."UpdatedAt", t1."UpdatedBy"
    FROM "LeaveBalances" AS l
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t1 ON l."LeaveTypeId" = t1."Id"
) AS t0 ON t."Id" = t0."UserId"
ORDER BY t."Id", t0."Id"
2025-06-13 13:25:22,707 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."CreatedBy", l."DeletedAt", l."Description", l."IsDeleted", l."Name", l."StandardLeaveCount", l."UpdatedAt", l."UpdatedBy"
FROM "LeaveTypes" AS l
WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
LIMIT 1
2025-06-13 13:25:22,710 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."DeletedAt", l."EndDate", l."IsDeleted", l."LeaveTypeId", l."Reason", l."ReviewedById", l."StartDate", l."Status", l."UpdatedAt", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy", t1."Id", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Email", t1."Gender", t1."IsActive", t1."IsDeleted", t1."LastLoginAt", t1."PasswordHash", t1."Role", t1."Username", t2."Id", t2."DeletedAt", t2."FileContent", t2."FileName", t2."IsDeleted", t2."LeaveRequestId", t2."UploadedAt"
FROM "LeaveRequests" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
LEFT JOIN (
    SELECT u0."Id", u0."CreatedAt", u0."CreatedBy", u0."DeletedAt", u0."Email", u0."Gender", u0."IsActive", u0."IsDeleted", u0."LastLoginAt", u0."PasswordHash", u0."Role", u0."Username"
    FROM "Users" AS u0
    WHERE NOT (u0."IsDeleted")
) AS t1 ON l."ReviewedById" = t1."Id"
LEFT JOIN (
    SELECT l1."Id", l1."DeletedAt", l1."FileContent", l1."FileName", l1."IsDeleted", l1."LeaveRequestId", l1."UploadedAt"
    FROM "LeaveAttachments" AS l1
    WHERE NOT (l1."IsDeleted")
) AS t2 ON l."Id" = t2."LeaveRequestId"
WHERE NOT (l."IsDeleted")
ORDER BY l."Id", t."Id", t0."Id", t1."Id"
2025-06-13 13:25:22,713 [15] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."CreatedBy", l."DeletedAt", l."Description", l."IsDeleted", l."Name", l."StandardLeaveCount", l."UpdatedAt", l."UpdatedBy"
FROM "LeaveTypes" AS l
WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
LIMIT 1
2025-06-13 13:25:22,715 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."LeaveTypeId", t0."TotalLeaves", t0."UsedLeaves", t0."UserId", t0."Id0", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted") AND u."Id" = @__key_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t1."Id" AS "Id0", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Description", t1."IsDeleted", t1."Name", t1."StandardLeaveCount", t1."UpdatedAt", t1."UpdatedBy"
    FROM "LeaveBalances" AS l
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t1 ON l."LeaveTypeId" = t1."Id"
) AS t0 ON t."Id" = t0."UserId"
ORDER BY t."Id", t0."Id"
2025-06-13 13:25:22,719 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."DeletedAt", l."EndDate", l."IsDeleted", l."LeaveTypeId", l."Reason", l."ReviewedById", l."StartDate", l."Status", l."UpdatedAt", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy", t1."Id", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Email", t1."Gender", t1."IsActive", t1."IsDeleted", t1."LastLoginAt", t1."PasswordHash", t1."Role", t1."Username", t2."Id", t2."DeletedAt", t2."FileContent", t2."FileName", t2."IsDeleted", t2."LeaveRequestId", t2."UploadedAt"
FROM "LeaveRequests" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
LEFT JOIN (
    SELECT u0."Id", u0."CreatedAt", u0."CreatedBy", u0."DeletedAt", u0."Email", u0."Gender", u0."IsActive", u0."IsDeleted", u0."LastLoginAt", u0."PasswordHash", u0."Role", u0."Username"
    FROM "Users" AS u0
    WHERE NOT (u0."IsDeleted")
) AS t1 ON l."ReviewedById" = t1."Id"
LEFT JOIN (
    SELECT l1."Id", l1."DeletedAt", l1."FileContent", l1."FileName", l1."IsDeleted", l1."LeaveRequestId", l1."UploadedAt"
    FROM "LeaveAttachments" AS l1
    WHERE NOT (l1."IsDeleted")
) AS t2 ON l."Id" = t2."LeaveRequestId"
WHERE NOT (l."IsDeleted")
ORDER BY l."Id", t."Id", t0."Id", t1."Id"
2025-06-13 13:25:22,769 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Boolean), @p5='?' (DbType = Guid), @p6='?', @p7='?' (DbType = Guid), @p8='?' (DbType = DateTime), @p9='?', @p10='?' (DbType = DateTime), @p11='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
INSERT INTO "LeaveRequests" ("Id", "CreatedAt", "DeletedAt", "EndDate", "IsDeleted", "LeaveTypeId", "Reason", "ReviewedById", "StartDate", "Status", "UpdatedAt", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-13 13:25:22,783 [9] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Guid), @p4='?', @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime), @p7='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
INSERT INTO "AuditLogs" ("Id", "Action", "DeletedAt", "EntityId", "EntityType", "IsDeleted", "Timestamp", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-06-13 13:25:22,792 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t2."Id", t2."CreatedAt", t2."DeletedAt", t2."EndDate", t2."IsDeleted", t2."LeaveTypeId", t2."Reason", t2."ReviewedById", t2."StartDate", t2."Status", t2."UpdatedAt", t2."UserId", t2."Id0", t2."CreatedAt0", t2."CreatedBy", t2."DeletedAt0", t2."Email", t2."Gender", t2."IsActive", t2."IsDeleted0", t2."LastLoginAt", t2."PasswordHash", t2."Role", t2."Username", t2."Id1", t2."CreatedAt1", t2."CreatedBy0", t2."DeletedAt1", t2."Description", t2."IsDeleted1", t2."Name", t2."StandardLeaveCount", t2."UpdatedAt0", t2."UpdatedBy", t2."Id2", t2."CreatedAt2", t2."CreatedBy1", t2."DeletedAt2", t2."Email0", t2."Gender0", t2."IsActive0", t2."IsDeleted2", t2."LastLoginAt0", t2."PasswordHash0", t2."Role0", t2."Username0", t3."Id", t3."DeletedAt", t3."FileContent", t3."FileName", t3."IsDeleted", t3."LeaveRequestId", t3."UploadedAt"
FROM (
    SELECT l."Id", l."CreatedAt", l."DeletedAt", l."EndDate", l."IsDeleted", l."LeaveTypeId", l."Reason", l."ReviewedById", l."StartDate", l."Status", l."UpdatedAt", l."UserId", t."Id" AS "Id0", t."CreatedAt" AS "CreatedAt0", t."CreatedBy", t."DeletedAt" AS "DeletedAt0", t."Email", t."Gender", t."IsActive", t."IsDeleted" AS "IsDeleted0", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id" AS "Id1", t0."CreatedAt" AS "CreatedAt1", t0."CreatedBy" AS "CreatedBy0", t0."DeletedAt" AS "DeletedAt1", t0."Description", t0."IsDeleted" AS "IsDeleted1", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt" AS "UpdatedAt0", t0."UpdatedBy", t1."Id" AS "Id2", t1."CreatedAt" AS "CreatedAt2", t1."CreatedBy" AS "CreatedBy1", t1."DeletedAt" AS "DeletedAt2", t1."Email" AS "Email0", t1."Gender" AS "Gender0", t1."IsActive" AS "IsActive0", t1."IsDeleted" AS "IsDeleted2", t1."LastLoginAt" AS "LastLoginAt0", t1."PasswordHash" AS "PasswordHash0", t1."Role" AS "Role0", t1."Username" AS "Username0"
    FROM "LeaveRequests" AS l
    INNER JOIN (
        SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
        FROM "Users" AS u
        WHERE NOT (u."IsDeleted")
    ) AS t ON l."UserId" = t."Id"
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t0 ON l."LeaveTypeId" = t0."Id"
    LEFT JOIN (
        SELECT u0."Id", u0."CreatedAt", u0."CreatedBy", u0."DeletedAt", u0."Email", u0."Gender", u0."IsActive", u0."IsDeleted", u0."LastLoginAt", u0."PasswordHash", u0."Role", u0."Username"
        FROM "Users" AS u0
        WHERE NOT (u0."IsDeleted")
    ) AS t1 ON l."ReviewedById" = t1."Id"
    WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
    LIMIT 1
) AS t2
LEFT JOIN (
    SELECT l1."Id", l1."DeletedAt", l1."FileContent", l1."FileName", l1."IsDeleted", l1."LeaveRequestId", l1."UploadedAt"
    FROM "LeaveAttachments" AS l1
    WHERE NOT (l1."IsDeleted")
) AS t3 ON t2."Id" = t3."LeaveRequestId"
ORDER BY t2."Id", t2."Id0", t2."Id1", t2."Id2"
2025-06-13 13:25:43,300 [11] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T07:55:43.3006370Z, Method: PUT, Path: /api/v1/leave-requests/29fafc64-9260-453e-aee6-c0c010ff2d0c/status, User: Chandler
2025-06-13 13:25:43,313 [11] INFO  LeaveManagementSystem.Controllers.LeaveRequestController - Updating leave request status for ID: 29fafc64-9260-453e-aee6-c0c010ff2d0c by approver ID: 0728af92-6d38-4547-be7c-bca1f3dcdcc6
2025-06-13 13:25:43,351 [11] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (3ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t2."Id", t2."CreatedAt", t2."DeletedAt", t2."EndDate", t2."IsDeleted", t2."LeaveTypeId", t2."Reason", t2."ReviewedById", t2."StartDate", t2."Status", t2."UpdatedAt", t2."UserId", t2."Id0", t2."CreatedAt0", t2."CreatedBy", t2."DeletedAt0", t2."Email", t2."Gender", t2."IsActive", t2."IsDeleted0", t2."LastLoginAt", t2."PasswordHash", t2."Role", t2."Username", t2."Id1", t2."CreatedAt1", t2."CreatedBy0", t2."DeletedAt1", t2."Description", t2."IsDeleted1", t2."Name", t2."StandardLeaveCount", t2."UpdatedAt0", t2."UpdatedBy", t2."Id2", t2."CreatedAt2", t2."CreatedBy1", t2."DeletedAt2", t2."Email0", t2."Gender0", t2."IsActive0", t2."IsDeleted2", t2."LastLoginAt0", t2."PasswordHash0", t2."Role0", t2."Username0", t3."Id", t3."DeletedAt", t3."FileContent", t3."FileName", t3."IsDeleted", t3."LeaveRequestId", t3."UploadedAt"
FROM (
    SELECT l."Id", l."CreatedAt", l."DeletedAt", l."EndDate", l."IsDeleted", l."LeaveTypeId", l."Reason", l."ReviewedById", l."StartDate", l."Status", l."UpdatedAt", l."UserId", t."Id" AS "Id0", t."CreatedAt" AS "CreatedAt0", t."CreatedBy", t."DeletedAt" AS "DeletedAt0", t."Email", t."Gender", t."IsActive", t."IsDeleted" AS "IsDeleted0", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id" AS "Id1", t0."CreatedAt" AS "CreatedAt1", t0."CreatedBy" AS "CreatedBy0", t0."DeletedAt" AS "DeletedAt1", t0."Description", t0."IsDeleted" AS "IsDeleted1", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt" AS "UpdatedAt0", t0."UpdatedBy", t1."Id" AS "Id2", t1."CreatedAt" AS "CreatedAt2", t1."CreatedBy" AS "CreatedBy1", t1."DeletedAt" AS "DeletedAt2", t1."Email" AS "Email0", t1."Gender" AS "Gender0", t1."IsActive" AS "IsActive0", t1."IsDeleted" AS "IsDeleted2", t1."LastLoginAt" AS "LastLoginAt0", t1."PasswordHash" AS "PasswordHash0", t1."Role" AS "Role0", t1."Username" AS "Username0"
    FROM "LeaveRequests" AS l
    INNER JOIN (
        SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
        FROM "Users" AS u
        WHERE NOT (u."IsDeleted")
    ) AS t ON l."UserId" = t."Id"
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t0 ON l."LeaveTypeId" = t0."Id"
    LEFT JOIN (
        SELECT u0."Id", u0."CreatedAt", u0."CreatedBy", u0."DeletedAt", u0."Email", u0."Gender", u0."IsActive", u0."IsDeleted", u0."LastLoginAt", u0."PasswordHash", u0."Role", u0."Username"
        FROM "Users" AS u0
        WHERE NOT (u0."IsDeleted")
    ) AS t1 ON l."ReviewedById" = t1."Id"
    WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
    LIMIT 1
) AS t2
LEFT JOIN (
    SELECT l1."Id", l1."DeletedAt", l1."FileContent", l1."FileName", l1."IsDeleted", l1."LeaveRequestId", l1."UploadedAt"
    FROM "LeaveAttachments" AS l1
    WHERE NOT (l1."IsDeleted")
) AS t3 ON t2."Id" = t3."LeaveRequestId"
ORDER BY t2."Id", t2."Id0", t2."Id1", t2."Id2"
2025-06-13 13:25:43,369 [11] ERROR LeaveManagementSystem.Controllers.LeaveRequestController - Error updating leave request status for ID: 29fafc64-9260-453e-aee6-c0c010ff2d0c
System.Exception: Failed to update leave request status You cannot approve or reject your own leave request.
 ---> System.InvalidOperationException: You cannot approve or reject your own leave request.
   at LeaveManagementSystem.Services.LeaveRequestService.UpdateStatusAsync(Guid id, String status, Guid approverId) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 300
   --- End of inner exception stack trace ---
   at LeaveManagementSystem.Services.LeaveRequestService.UpdateStatusAsync(Guid id, String status, Guid approverId) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 334
   at LeaveManagementSystem.Controllers.LeaveRequestController.UpdateStatus(Guid id, UpdateLeaveRequestStatusDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Controllers/LeaveRequestController.cs:line 110
2025-06-13 13:26:47,000 [11] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T07:56:47.0000270Z, Method: POST, Path: /api/v1/auth/login, User: Chandler
2025-06-13 13:26:47,020 [11] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
FROM "Users" AS u
WHERE NOT (u."IsDeleted")
2025-06-13 13:26:47,255 [11] INFO  LeaveManagementSystem.Services.AuthenticationService - User tony@example.com logged in successfully
2025-06-13 13:26:47,256 [11] INFO  LeaveManagementSystem.Controllers.AuthenticationController - User tony@example.com logged in successfully.
2025-06-13 13:28:23,902 [9] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T07:58:23.9022440Z, Method: GET, Path: /api/v1/leave-requests/b26b65b2-35f2-4483-8c17-90d4be243245, User: Joey
2025-06-13 13:28:23,911 [9] INFO  LeaveManagementSystem.Controllers.LeaveRequestController - Fetching leave request with ID: b26b65b2-35f2-4483-8c17-90d4be243245
2025-06-13 13:28:23,932 [17] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (15ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t2."Id", t2."CreatedAt", t2."DeletedAt", t2."EndDate", t2."IsDeleted", t2."LeaveTypeId", t2."Reason", t2."ReviewedById", t2."StartDate", t2."Status", t2."UpdatedAt", t2."UserId", t2."Id0", t2."CreatedAt0", t2."CreatedBy", t2."DeletedAt0", t2."Email", t2."Gender", t2."IsActive", t2."IsDeleted0", t2."LastLoginAt", t2."PasswordHash", t2."Role", t2."Username", t2."Id1", t2."CreatedAt1", t2."CreatedBy0", t2."DeletedAt1", t2."Description", t2."IsDeleted1", t2."Name", t2."StandardLeaveCount", t2."UpdatedAt0", t2."UpdatedBy", t2."Id2", t2."CreatedAt2", t2."CreatedBy1", t2."DeletedAt2", t2."Email0", t2."Gender0", t2."IsActive0", t2."IsDeleted2", t2."LastLoginAt0", t2."PasswordHash0", t2."Role0", t2."Username0", t3."Id", t3."DeletedAt", t3."FileContent", t3."FileName", t3."IsDeleted", t3."LeaveRequestId", t3."UploadedAt"
FROM (
    SELECT l."Id", l."CreatedAt", l."DeletedAt", l."EndDate", l."IsDeleted", l."LeaveTypeId", l."Reason", l."ReviewedById", l."StartDate", l."Status", l."UpdatedAt", l."UserId", t."Id" AS "Id0", t."CreatedAt" AS "CreatedAt0", t."CreatedBy", t."DeletedAt" AS "DeletedAt0", t."Email", t."Gender", t."IsActive", t."IsDeleted" AS "IsDeleted0", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id" AS "Id1", t0."CreatedAt" AS "CreatedAt1", t0."CreatedBy" AS "CreatedBy0", t0."DeletedAt" AS "DeletedAt1", t0."Description", t0."IsDeleted" AS "IsDeleted1", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt" AS "UpdatedAt0", t0."UpdatedBy", t1."Id" AS "Id2", t1."CreatedAt" AS "CreatedAt2", t1."CreatedBy" AS "CreatedBy1", t1."DeletedAt" AS "DeletedAt2", t1."Email" AS "Email0", t1."Gender" AS "Gender0", t1."IsActive" AS "IsActive0", t1."IsDeleted" AS "IsDeleted2", t1."LastLoginAt" AS "LastLoginAt0", t1."PasswordHash" AS "PasswordHash0", t1."Role" AS "Role0", t1."Username" AS "Username0"
    FROM "LeaveRequests" AS l
    INNER JOIN (
        SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
        FROM "Users" AS u
        WHERE NOT (u."IsDeleted")
    ) AS t ON l."UserId" = t."Id"
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t0 ON l."LeaveTypeId" = t0."Id"
    LEFT JOIN (
        SELECT u0."Id", u0."CreatedAt", u0."CreatedBy", u0."DeletedAt", u0."Email", u0."Gender", u0."IsActive", u0."IsDeleted", u0."LastLoginAt", u0."PasswordHash", u0."Role", u0."Username"
        FROM "Users" AS u0
        WHERE NOT (u0."IsDeleted")
    ) AS t1 ON l."ReviewedById" = t1."Id"
    WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
    LIMIT 1
) AS t2
LEFT JOIN (
    SELECT l1."Id", l1."DeletedAt", l1."FileContent", l1."FileName", l1."IsDeleted", l1."LeaveRequestId", l1."UploadedAt"
    FROM "LeaveAttachments" AS l1
    WHERE NOT (l1."IsDeleted")
) AS t3 ON t2."Id" = t3."LeaveRequestId"
ORDER BY t2."Id", t2."Id0", t2."Id1", t2."Id2"
2025-06-13 13:29:45,342 [14] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T07:59:45.3421800Z, Method: GET, Path: /api/v1/leave-balance/user/7f1ffd9c-9e10-4b8c-82df-696060387368, User: Chandler
2025-06-13 13:29:45,355 [14] INFO  LeaveManagementSystem.Controllers.LeaveBalanceController - Fetching leave balances for user ID: 7f1ffd9c-9e10-4b8c-82df-696060387368
2025-06-13 13:29:45,362 [14] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (4ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."LeaveTypeId", t0."TotalLeaves", t0."UsedLeaves", t0."UserId", t0."Id0", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted") AND u."Id" = @__key_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t1."Id" AS "Id0", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Description", t1."IsDeleted", t1."Name", t1."StandardLeaveCount", t1."UpdatedAt", t1."UpdatedBy"
    FROM "LeaveBalances" AS l
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t1 ON l."LeaveTypeId" = t1."Id"
) AS t0 ON t."Id" = t0."UserId"
ORDER BY t."Id", t0."Id"
2025-06-13 13:30:31,180 [17] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T08:00:31.1806680Z, Method: GET, Path: /api/v1/leave-balance/user/%7B7f1ffd9c-9e10-4b8c-82df-696060387368%7D/leaveType/%7B059d3482-efb8-479d-85ce-a2e098d60ae9%7D, User: Chandler
2025-06-13 13:30:31,186 [17] INFO  LeaveManagementSystem.Controllers.LeaveBalanceController - Fetching leave balance for user ID: 7f1ffd9c-9e10-4b8c-82df-696060387368 and leave type ID: 059d3482-efb8-479d-85ce-a2e098d60ae9
2025-06-13 13:30:31,235 [22] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (17ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."LeaveTypeId", t0."TotalLeaves", t0."UsedLeaves", t0."UserId", t0."Id0", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted") AND u."Id" = @__key_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t1."Id" AS "Id0", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Description", t1."IsDeleted", t1."Name", t1."StandardLeaveCount", t1."UpdatedAt", t1."UpdatedBy"
    FROM "LeaveBalances" AS l
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t1 ON l."LeaveTypeId" = t1."Id"
) AS t0 ON t."Id" = t0."UserId"
ORDER BY t."Id", t0."Id"
2025-06-13 13:30:31,236 [22] WARN  LeaveManagementSystem.Controllers.LeaveBalanceController - Leave balance not found for user ID: 7f1ffd9c-9e10-4b8c-82df-696060387368 and leave type ID: 059d3482-efb8-479d-85ce-a2e098d60ae9. Leave Balance for LeaveType 059d3482-efb8-479d-85ce-a2e098d60ae9 not found for User 7f1ffd9c-9e10-4b8c-82df-696060387368
2025-06-13 13:30:58,632 [14] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T08:00:58.6321820Z, Method: GET, Path: /api/v1/leavetypes, User: Chandler
2025-06-13 13:30:58,640 [14] INFO  LeaveManagementSystem.Controllers.LeaveTypeController - Fetching all leave types with pagination.
2025-06-13 13:30:58,652 [17] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."CreatedBy", l."DeletedAt", l."Description", l."IsDeleted", l."Name", l."StandardLeaveCount", l."UpdatedAt", l."UpdatedBy"
FROM "LeaveTypes" AS l
WHERE NOT (l."IsDeleted")
2025-06-13 13:31:31,138 [3] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T08:01:31.1370360Z, Method: GET, Path: /api/v1/leave-balance/user/%7B7f1ffd9c-9e10-4b8c-82df-696060387368%7D/leaveType/%7Ba522c818-ef32-4c98-a60c-003d3bb4133c%7D, User: Chandler
2025-06-13 13:31:31,140 [3] INFO  LeaveManagementSystem.Controllers.LeaveBalanceController - Fetching leave balance for user ID: 7f1ffd9c-9e10-4b8c-82df-696060387368 and leave type ID: a522c818-ef32-4c98-a60c-003d3bb4133c
2025-06-13 13:31:31,162 [3] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (12ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."LeaveTypeId", t0."TotalLeaves", t0."UsedLeaves", t0."UserId", t0."Id0", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted") AND u."Id" = @__key_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t1."Id" AS "Id0", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Description", t1."IsDeleted", t1."Name", t1."StandardLeaveCount", t1."UpdatedAt", t1."UpdatedBy"
    FROM "LeaveBalances" AS l
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t1 ON l."LeaveTypeId" = t1."Id"
) AS t0 ON t."Id" = t0."UserId"
ORDER BY t."Id", t0."Id"
2025-06-13 13:31:39,715 [3] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T08:01:39.7159030Z, Method: POST, Path: /api/Leave-balance/initialize/user/%7Ba9878ee5-34ba-4ec4-8a5c-4466310b9718%7D%0A, User: Anonymous
2025-06-13 13:32:44,065 [17] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T08:02:44.0649780Z, Method: GET, Path: /api/v1/Users, User: Anonymous
2025-06-13 13:32:44,077 [17] INFO  LeaveManagementSystem.Controllers.UsersController - Fetching all users with pagination parameters.
2025-06-13 13:32:44,086 [14] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
FROM "Users" AS u
WHERE NOT (u."IsDeleted")
2025-06-13 13:33:30,340 [24] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T08:03:30.3400750Z, Method: POST, Path: /api/v1/leave-balance/initialize/user/5bfcb31a-61ef-44d9-bf86-a6bc60a381b3%0A, User: Chandler
2025-06-13 13:33:30,349 [24] INFO  LeaveManagementSystem.Controllers.LeaveBalanceController - Initializing leave balances for user ID: 5bfcb31a-61ef-44d9-bf86-a6bc60a381b3
2025-06-13 13:33:30,376 [24] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM "LeaveBalances" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
2025-06-13 13:34:45,119 [3] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T08:04:45.1195470Z, Method: GET, Path: /api/v1/leavetypes, User: Anonymous
2025-06-13 13:34:45,121 [3] INFO  LeaveManagementSystem.Controllers.LeaveTypeController - Fetching all leave types with pagination.
2025-06-13 13:34:45,126 [3] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."CreatedBy", l."DeletedAt", l."Description", l."IsDeleted", l."Name", l."StandardLeaveCount", l."UpdatedAt", l."UpdatedBy"
FROM "LeaveTypes" AS l
WHERE NOT (l."IsDeleted")
2025-06-13 13:35:21,042 [26] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T08:05:21.0418960Z, Method: POST, Path: /api/v1/leave-balance/initialize/user/5bfcb31a-61ef-44d9-bf86-a6bc60a381b3/leaveType/3f910643-21e5-4d49-a28c-3733afb1d1fa, User: Chandler
2025-06-13 13:35:21,049 [26] INFO  LeaveManagementSystem.Controllers.LeaveBalanceController - Initializing leave balance for user ID: 5bfcb31a-61ef-44d9-bf86-a6bc60a381b3 and leave type ID: 3f910643-21e5-4d49-a28c-3733afb1d1fa with standard leave count: 12
2025-06-13 13:35:21,054 [26] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM "LeaveBalances" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
2025-06-13 13:37:16,892 [17] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T08:07:16.8922730Z, Method: POST, Path: /api/v1/leave-balance/deduct, User: Chandler
2025-06-13 13:37:16,902 [17] INFO  LeaveManagementSystem.Controllers.LeaveBalanceController - Deducting 1 days from leave balance for user ID: 5bfcb31a-61ef-44d9-bf86-a6bc60a381b3 and leave type ID: 3f910643-21e5-4d49-a28c-3733afb1d1fa
2025-06-13 13:37:16,935 [28] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM "LeaveBalances" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
2025-06-13 13:37:16,970 [24] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (12ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM "LeaveBalances" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
WHERE l."Id" = @__key_0
LIMIT 1
2025-06-13 13:37:16,990 [24] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (7ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
UPDATE "LeaveBalances" SET "UsedLeaves" = @p0
WHERE "Id" = @p1;
2025-06-13 13:37:50,404 [17] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T08:07:50.4044350Z, Method: POST, Path: /api/v1/leave-balance/reset/user/5bfcb31a-61ef-44d9-bf86-a6bc60a381b3, User: Chandler
2025-06-13 13:37:50,414 [17] INFO  LeaveManagementSystem.Controllers.LeaveBalanceController - Resetting leave balances for user ID: 5bfcb31a-61ef-44d9-bf86-a6bc60a381b3
2025-06-13 13:37:50,421 [17] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM "LeaveBalances" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
2025-06-13 13:37:50,426 [17] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM "LeaveBalances" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
WHERE l."Id" = @__key_0
LIMIT 1
2025-06-13 13:37:50,428 [17] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM "LeaveBalances" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
WHERE l."Id" = @__key_0
LIMIT 1
2025-06-13 13:37:50,430 [17] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM "LeaveBalances" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
WHERE l."Id" = @__key_0
LIMIT 1
2025-06-13 13:37:50,431 [17] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM "LeaveBalances" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
WHERE l."Id" = @__key_0
LIMIT 1
2025-06-13 13:37:50,432 [17] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM "LeaveBalances" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
WHERE l."Id" = @__key_0
LIMIT 1
2025-06-13 13:37:50,434 [26] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM "LeaveBalances" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
WHERE l."Id" = @__key_0
LIMIT 1
2025-06-13 13:37:50,436 [26] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM "LeaveBalances" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
WHERE l."Id" = @__key_0
LIMIT 1
2025-06-13 13:37:50,437 [26] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM "LeaveBalances" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
WHERE l."Id" = @__key_0
LIMIT 1
2025-06-13 13:37:50,438 [26] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM "LeaveBalances" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
WHERE l."Id" = @__key_0
LIMIT 1
2025-06-13 13:37:50,441 [24] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Guid), @p0='?' (DbType = Int32)], CommandType='Text', CommandTimeout='30']
UPDATE "LeaveBalances" SET "UsedLeaves" = @p0
WHERE "Id" = @p1;
2025-06-13 14:06:42,172 [35] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T08:36:42.1722690Z, Method: POST, Path: /api/v1/leave-balance/reset/user/5bfcb31a-61ef-44d9-bf86-a6bc60a381b3, User: Chandler
2025-06-13 14:06:42,180 [35] INFO  LeaveManagementSystem.Controllers.LeaveBalanceController - Resetting leave balances for user ID: 5bfcb31a-61ef-44d9-bf86-a6bc60a381b3
2025-06-13 14:06:42,254 [35] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM "LeaveBalances" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
2025-06-13 14:06:42,260 [35] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (4ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM "LeaveBalances" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
WHERE l."Id" = @__key_0
LIMIT 1
2025-06-13 14:06:42,261 [35] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM "LeaveBalances" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
WHERE l."Id" = @__key_0
LIMIT 1
2025-06-13 14:06:42,263 [42] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM "LeaveBalances" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
WHERE l."Id" = @__key_0
LIMIT 1
2025-06-13 14:06:42,264 [42] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM "LeaveBalances" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
WHERE l."Id" = @__key_0
LIMIT 1
2025-06-13 14:06:42,266 [42] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (0ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM "LeaveBalances" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
WHERE l."Id" = @__key_0
LIMIT 1
2025-06-13 14:06:42,267 [42] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM "LeaveBalances" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
WHERE l."Id" = @__key_0
LIMIT 1
2025-06-13 14:06:42,268 [35] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM "LeaveBalances" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
WHERE l."Id" = @__key_0
LIMIT 1
2025-06-13 14:06:42,269 [35] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM "LeaveBalances" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
WHERE l."Id" = @__key_0
LIMIT 1
2025-06-13 14:06:42,270 [35] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM "LeaveBalances" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
WHERE l."Id" = @__key_0
LIMIT 1
2025-06-13 17:10:43,846 [1] WARN  Microsoft.EntityFrameworkCore.Model.Validation - Entity 'LeaveType' has a global query filter defined and is the required end of a relationship with the entity 'LeaveBalance'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-06-13 17:10:44,122 [1] INFO  Microsoft.Hosting.Lifetime - Now listening on: http://localhost:5000
2025-06-13 17:10:44,123 [1] INFO  Microsoft.Hosting.Lifetime - Application started. Press Ctrl+C to shut down.
2025-06-13 17:10:44,123 [1] INFO  Microsoft.Hosting.Lifetime - Hosting environment: Development
2025-06-13 17:10:44,123 [1] INFO  Microsoft.Hosting.Lifetime - Content root path: /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem
2025-06-13 17:10:44,208 [13] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."DeletedAt", l."EndDate", l."IsDeleted", l."LeaveTypeId", l."Reason", l."ReviewedById", l."StartDate", l."Status", l."UpdatedAt", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy", t1."Id", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Email", t1."Gender", t1."IsActive", t1."IsDeleted", t1."LastLoginAt", t1."PasswordHash", t1."Role", t1."Username", t2."Id", t2."DeletedAt", t2."FileContent", t2."FileName", t2."IsDeleted", t2."LeaveRequestId", t2."UploadedAt"
FROM "LeaveRequests" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
LEFT JOIN (
    SELECT u0."Id", u0."CreatedAt", u0."CreatedBy", u0."DeletedAt", u0."Email", u0."Gender", u0."IsActive", u0."IsDeleted", u0."LastLoginAt", u0."PasswordHash", u0."Role", u0."Username"
    FROM "Users" AS u0
    WHERE NOT (u0."IsDeleted")
) AS t1 ON l."ReviewedById" = t1."Id"
LEFT JOIN (
    SELECT l1."Id", l1."DeletedAt", l1."FileContent", l1."FileName", l1."IsDeleted", l1."LeaveRequestId", l1."UploadedAt"
    FROM "LeaveAttachments" AS l1
    WHERE NOT (l1."IsDeleted")
) AS t2 ON l."Id" = t2."LeaveRequestId"
WHERE NOT (l."IsDeleted")
ORDER BY l."Id", t."Id", t0."Id", t1."Id"
2025-06-13 17:39:29,267 [.NET Signal Handler] INFO  Microsoft.Hosting.Lifetime - Application is shutting down...
2025-06-13 17:39:42,350 [1] WARN  Microsoft.EntityFrameworkCore.Model.Validation - Entity 'LeaveType' has a global query filter defined and is the required end of a relationship with the entity 'LeaveBalance'. This may lead to unexpected results when the required entity is filtered out. Either configure the navigation as optional, or define matching query filters for both entities in the navigation. See https://go.microsoft.com/fwlink/?linkid=2131316 for more information.
2025-06-13 17:39:42,646 [1] INFO  Microsoft.Hosting.Lifetime - Now listening on: http://localhost:5000
2025-06-13 17:39:42,647 [1] INFO  Microsoft.Hosting.Lifetime - Application started. Press Ctrl+C to shut down.
2025-06-13 17:39:42,647 [1] INFO  Microsoft.Hosting.Lifetime - Hosting environment: Development
2025-06-13 17:39:42,647 [1] INFO  Microsoft.Hosting.Lifetime - Content root path: /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem
2025-06-13 17:39:42,728 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."DeletedAt", l."EndDate", l."IsDeleted", l."LeaveTypeId", l."Reason", l."ReviewedById", l."StartDate", l."Status", l."UpdatedAt", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy", t1."Id", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Email", t1."Gender", t1."IsActive", t1."IsDeleted", t1."LastLoginAt", t1."PasswordHash", t1."Role", t1."Username", t2."Id", t2."DeletedAt", t2."FileContent", t2."FileName", t2."IsDeleted", t2."LeaveRequestId", t2."UploadedAt"
FROM "LeaveRequests" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
LEFT JOIN (
    SELECT u0."Id", u0."CreatedAt", u0."CreatedBy", u0."DeletedAt", u0."Email", u0."Gender", u0."IsActive", u0."IsDeleted", u0."LastLoginAt", u0."PasswordHash", u0."Role", u0."Username"
    FROM "Users" AS u0
    WHERE NOT (u0."IsDeleted")
) AS t1 ON l."ReviewedById" = t1."Id"
LEFT JOIN (
    SELECT l1."Id", l1."DeletedAt", l1."FileContent", l1."FileName", l1."IsDeleted", l1."LeaveRequestId", l1."UploadedAt"
    FROM "LeaveAttachments" AS l1
    WHERE NOT (l1."IsDeleted")
) AS t2 ON l."Id" = t2."LeaveRequestId"
WHERE NOT (l."IsDeleted")
ORDER BY l."Id", t."Id", t0."Id", t1."Id"
2025-06-13 17:39:54,203 [7] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T12:09:54.2032420Z, Method: POST, Path: /api/v1/leave-requests, User: Joey
2025-06-13 17:39:54,269 [7] INFO  LeaveManagementSystem.Controllers.LeaveRequestController - Creating new leave request.
2025-06-13 17:39:54,321 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (12ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."LeaveTypeId", t0."TotalLeaves", t0."UsedLeaves", t0."UserId", t0."Id0", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted") AND u."Id" = @__key_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t1."Id" AS "Id0", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Description", t1."IsDeleted", t1."Name", t1."StandardLeaveCount", t1."UpdatedAt", t1."UpdatedBy"
    FROM "LeaveBalances" AS l
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t1 ON l."LeaveTypeId" = t1."Id"
) AS t0 ON t."Id" = t0."UserId"
ORDER BY t."Id", t0."Id"
2025-06-13 17:39:54,338 [10] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."CreatedBy", l."DeletedAt", l."Description", l."IsDeleted", l."Name", l."StandardLeaveCount", l."UpdatedAt", l."UpdatedBy"
FROM "LeaveTypes" AS l
WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
LIMIT 1
2025-06-13 17:39:54,349 [10] ERROR LeaveManagementSystem.Controllers.LeaveRequestController - Error creating leave request.
System.Exception: Failed to create leave request Only female employees can apply for Maternity Leave.
 ---> System.InvalidOperationException: Only female employees can apply for Maternity Leave.
   at LeaveManagementSystem.Services.LeaveRequestService.ValidateGenderBasedLeaveAsync(Guid userId, Guid leaveTypeId) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 371
   at LeaveManagementSystem.Services.LeaveRequestService.CreateAsync(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 168
   --- End of inner exception stack trace ---
   at LeaveManagementSystem.Services.LeaveRequestService.CreateAsync(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 195
   at LeaveManagementSystem.Controllers.LeaveRequestController.Create(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Controllers/LeaveRequestController.cs:line 79
2025-06-13 17:39:59,903 [7] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T12:09:59.9032780Z, Method: POST, Path: /api/v1/leave-requests, User: Joey
2025-06-13 17:39:59,906 [7] INFO  LeaveManagementSystem.Controllers.LeaveRequestController - Creating new leave request.
2025-06-13 17:39:59,945 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (3ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."LeaveTypeId", t0."TotalLeaves", t0."UsedLeaves", t0."UserId", t0."Id0", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted") AND u."Id" = @__key_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t1."Id" AS "Id0", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Description", t1."IsDeleted", t1."Name", t1."StandardLeaveCount", t1."UpdatedAt", t1."UpdatedBy"
    FROM "LeaveBalances" AS l
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t1 ON l."LeaveTypeId" = t1."Id"
) AS t0 ON t."Id" = t0."UserId"
ORDER BY t."Id", t0."Id"
2025-06-13 17:39:59,947 [13] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (0ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."CreatedBy", l."DeletedAt", l."Description", l."IsDeleted", l."Name", l."StandardLeaveCount", l."UpdatedAt", l."UpdatedBy"
FROM "LeaveTypes" AS l
WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
LIMIT 1
2025-06-13 17:39:59,948 [13] ERROR LeaveManagementSystem.Controllers.LeaveRequestController - Error creating leave request.
System.Exception: Failed to create leave request Only male employees can apply for Paternity Leave.
 ---> System.InvalidOperationException: Only male employees can apply for Paternity Leave.
   at LeaveManagementSystem.Services.LeaveRequestService.ValidateGenderBasedLeaveAsync(Guid userId, Guid leaveTypeId) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 374
   at LeaveManagementSystem.Services.LeaveRequestService.CreateAsync(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 168
   --- End of inner exception stack trace ---
   at LeaveManagementSystem.Services.LeaveRequestService.CreateAsync(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 195
   at LeaveManagementSystem.Controllers.LeaveRequestController.Create(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Controllers/LeaveRequestController.cs:line 79
2025-06-13 17:40:06,564 [7] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T12:10:06.5642010Z, Method: POST, Path: /api/v1/leave-requests, User: Joey
2025-06-13 17:40:06,571 [7] INFO  LeaveManagementSystem.Controllers.LeaveRequestController - Creating new leave request.
2025-06-13 17:40:06,575 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."LeaveTypeId", t0."TotalLeaves", t0."UsedLeaves", t0."UserId", t0."Id0", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted") AND u."Id" = @__key_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t1."Id" AS "Id0", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Description", t1."IsDeleted", t1."Name", t1."StandardLeaveCount", t1."UpdatedAt", t1."UpdatedBy"
    FROM "LeaveBalances" AS l
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t1 ON l."LeaveTypeId" = t1."Id"
) AS t0 ON t."Id" = t0."UserId"
ORDER BY t."Id", t0."Id"
2025-06-13 17:40:06,578 [13] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (0ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."CreatedBy", l."DeletedAt", l."Description", l."IsDeleted", l."Name", l."StandardLeaveCount", l."UpdatedAt", l."UpdatedBy"
FROM "LeaveTypes" AS l
WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
LIMIT 1
2025-06-13 17:40:06,580 [13] ERROR LeaveManagementSystem.Controllers.LeaveRequestController - Error creating leave request.
System.Exception: Failed to create leave request Leave start date cannot be in the past.
 ---> System.InvalidOperationException: Leave start date cannot be in the past.
   at LeaveManagementSystem.Services.LeaveRequestService.ValidateStartDate(DateTime startDate) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 203
   at LeaveManagementSystem.Services.LeaveRequestService.CreateAsync(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 169
   --- End of inner exception stack trace ---
   at LeaveManagementSystem.Services.LeaveRequestService.CreateAsync(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Services/LeaveRequestService.cs:line 195
   at LeaveManagementSystem.Controllers.LeaveRequestController.Create(LeaveRequestDto dto) in /Users/presidio/Desktop/AllApi/LeaveManagementSystem copy/LeaveManagementSystem/Controllers/LeaveRequestController.cs:line 79
2025-06-13 17:40:27,551 [13] INFO  LeaveManagementSystem.Middlewares.ExceptionHandlingMiddleware - [Incoming Request] Timestamp: 2025-06-13T12:10:27.5510030Z, Method: POST, Path: /api/v1/leave-requests, User: Sample
2025-06-13 17:40:27,554 [13] INFO  LeaveManagementSystem.Controllers.LeaveRequestController - Creating new leave request.
2025-06-13 17:40:27,563 [13] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (6ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."LeaveTypeId", t0."TotalLeaves", t0."UsedLeaves", t0."UserId", t0."Id0", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy"
FROM (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted") AND u."Id" = @__key_0
    LIMIT 1
) AS t
LEFT JOIN (
    SELECT l."Id", l."LeaveTypeId", l."TotalLeaves", l."UsedLeaves", l."UserId", t1."Id" AS "Id0", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Description", t1."IsDeleted", t1."Name", t1."StandardLeaveCount", t1."UpdatedAt", t1."UpdatedBy"
    FROM "LeaveBalances" AS l
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t1 ON l."LeaveTypeId" = t1."Id"
) AS t0 ON t."Id" = t0."UserId"
ORDER BY t."Id", t0."Id"
2025-06-13 17:40:27,566 [13] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."CreatedBy", l."DeletedAt", l."Description", l."IsDeleted", l."Name", l."StandardLeaveCount", l."UpdatedAt", l."UpdatedBy"
FROM "LeaveTypes" AS l
WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
LIMIT 1
2025-06-13 17:40:27,569 [13] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."DeletedAt", l."EndDate", l."IsDeleted", l."LeaveTypeId", l."Reason", l."ReviewedById", l."StartDate", l."Status", l."UpdatedAt", l."UserId", t."Id", t."CreatedAt", t."CreatedBy", t."DeletedAt", t."Email", t."Gender", t."IsActive", t."IsDeleted", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id", t0."CreatedAt", t0."CreatedBy", t0."DeletedAt", t0."Description", t0."IsDeleted", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt", t0."UpdatedBy", t1."Id", t1."CreatedAt", t1."CreatedBy", t1."DeletedAt", t1."Email", t1."Gender", t1."IsActive", t1."IsDeleted", t1."LastLoginAt", t1."PasswordHash", t1."Role", t1."Username", t2."Id", t2."DeletedAt", t2."FileContent", t2."FileName", t2."IsDeleted", t2."LeaveRequestId", t2."UploadedAt"
FROM "LeaveRequests" AS l
INNER JOIN (
    SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
    FROM "Users" AS u
    WHERE NOT (u."IsDeleted")
) AS t ON l."UserId" = t."Id"
INNER JOIN (
    SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
    FROM "LeaveTypes" AS l0
    WHERE NOT (l0."IsDeleted")
) AS t0 ON l."LeaveTypeId" = t0."Id"
LEFT JOIN (
    SELECT u0."Id", u0."CreatedAt", u0."CreatedBy", u0."DeletedAt", u0."Email", u0."Gender", u0."IsActive", u0."IsDeleted", u0."LastLoginAt", u0."PasswordHash", u0."Role", u0."Username"
    FROM "Users" AS u0
    WHERE NOT (u0."IsDeleted")
) AS t1 ON l."ReviewedById" = t1."Id"
LEFT JOIN (
    SELECT l1."Id", l1."DeletedAt", l1."FileContent", l1."FileName", l1."IsDeleted", l1."LeaveRequestId", l1."UploadedAt"
    FROM "LeaveAttachments" AS l1
    WHERE NOT (l1."IsDeleted")
) AS t2 ON l."Id" = t2."LeaveRequestId"
WHERE NOT (l."IsDeleted")
ORDER BY l."Id", t."Id", t0."Id", t1."Id"
2025-06-13 17:40:27,575 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (1ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT l."Id", l."CreatedAt", l."CreatedBy", l."DeletedAt", l."Description", l."IsDeleted", l."Name", l."StandardLeaveCount", l."UpdatedAt", l."UpdatedBy"
FROM "LeaveTypes" AS l
WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
LIMIT 1
2025-06-13 17:40:27,737 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (103ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Boolean), @p5='?' (DbType = Guid), @p6='?', @p7='?' (DbType = Guid), @p8='?' (DbType = DateTime), @p9='?', @p10='?' (DbType = DateTime), @p11='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
INSERT INTO "LeaveRequests" ("Id", "CreatedAt", "DeletedAt", "EndDate", "IsDeleted", "LeaveTypeId", "Reason", "ReviewedById", "StartDate", "Status", "UpdatedAt", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-06-13 17:40:27,759 [14] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?', @p2='?' (DbType = DateTime), @p3='?' (DbType = Guid), @p4='?', @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTime), @p7='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
INSERT INTO "AuditLogs" ("Id", "Action", "DeletedAt", "EntityId", "EntityType", "IsDeleted", "Timestamp", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-06-13 17:40:27,768 [7] INFO  Microsoft.EntityFrameworkCore.Database.Command - Executed DbCommand (2ms) [Parameters=[@__key_0='?' (DbType = Guid)], CommandType='Text', CommandTimeout='30']
SELECT t2."Id", t2."CreatedAt", t2."DeletedAt", t2."EndDate", t2."IsDeleted", t2."LeaveTypeId", t2."Reason", t2."ReviewedById", t2."StartDate", t2."Status", t2."UpdatedAt", t2."UserId", t2."Id0", t2."CreatedAt0", t2."CreatedBy", t2."DeletedAt0", t2."Email", t2."Gender", t2."IsActive", t2."IsDeleted0", t2."LastLoginAt", t2."PasswordHash", t2."Role", t2."Username", t2."Id1", t2."CreatedAt1", t2."CreatedBy0", t2."DeletedAt1", t2."Description", t2."IsDeleted1", t2."Name", t2."StandardLeaveCount", t2."UpdatedAt0", t2."UpdatedBy", t2."Id2", t2."CreatedAt2", t2."CreatedBy1", t2."DeletedAt2", t2."Email0", t2."Gender0", t2."IsActive0", t2."IsDeleted2", t2."LastLoginAt0", t2."PasswordHash0", t2."Role0", t2."Username0", t3."Id", t3."DeletedAt", t3."FileContent", t3."FileName", t3."IsDeleted", t3."LeaveRequestId", t3."UploadedAt"
FROM (
    SELECT l."Id", l."CreatedAt", l."DeletedAt", l."EndDate", l."IsDeleted", l."LeaveTypeId", l."Reason", l."ReviewedById", l."StartDate", l."Status", l."UpdatedAt", l."UserId", t."Id" AS "Id0", t."CreatedAt" AS "CreatedAt0", t."CreatedBy", t."DeletedAt" AS "DeletedAt0", t."Email", t."Gender", t."IsActive", t."IsDeleted" AS "IsDeleted0", t."LastLoginAt", t."PasswordHash", t."Role", t."Username", t0."Id" AS "Id1", t0."CreatedAt" AS "CreatedAt1", t0."CreatedBy" AS "CreatedBy0", t0."DeletedAt" AS "DeletedAt1", t0."Description", t0."IsDeleted" AS "IsDeleted1", t0."Name", t0."StandardLeaveCount", t0."UpdatedAt" AS "UpdatedAt0", t0."UpdatedBy", t1."Id" AS "Id2", t1."CreatedAt" AS "CreatedAt2", t1."CreatedBy" AS "CreatedBy1", t1."DeletedAt" AS "DeletedAt2", t1."Email" AS "Email0", t1."Gender" AS "Gender0", t1."IsActive" AS "IsActive0", t1."IsDeleted" AS "IsDeleted2", t1."LastLoginAt" AS "LastLoginAt0", t1."PasswordHash" AS "PasswordHash0", t1."Role" AS "Role0", t1."Username" AS "Username0"
    FROM "LeaveRequests" AS l
    INNER JOIN (
        SELECT u."Id", u."CreatedAt", u."CreatedBy", u."DeletedAt", u."Email", u."Gender", u."IsActive", u."IsDeleted", u."LastLoginAt", u."PasswordHash", u."Role", u."Username"
        FROM "Users" AS u
        WHERE NOT (u."IsDeleted")
    ) AS t ON l."UserId" = t."Id"
    INNER JOIN (
        SELECT l0."Id", l0."CreatedAt", l0."CreatedBy", l0."DeletedAt", l0."Description", l0."IsDeleted", l0."Name", l0."StandardLeaveCount", l0."UpdatedAt", l0."UpdatedBy"
        FROM "LeaveTypes" AS l0
        WHERE NOT (l0."IsDeleted")
    ) AS t0 ON l."LeaveTypeId" = t0."Id"
    LEFT JOIN (
        SELECT u0."Id", u0."CreatedAt", u0."CreatedBy", u0."DeletedAt", u0."Email", u0."Gender", u0."IsActive", u0."IsDeleted", u0."LastLoginAt", u0."PasswordHash", u0."Role", u0."Username"
        FROM "Users" AS u0
        WHERE NOT (u0."IsDeleted")
    ) AS t1 ON l."ReviewedById" = t1."Id"
    WHERE NOT (l."IsDeleted") AND l."Id" = @__key_0
    LIMIT 1
) AS t2
LEFT JOIN (
    SELECT l1."Id", l1."DeletedAt", l1."FileContent", l1."FileName", l1."IsDeleted", l1."LeaveRequestId", l1."UploadedAt"
    FROM "LeaveAttachments" AS l1
    WHERE NOT (l1."IsDeleted")
) AS t3 ON t2."Id" = t3."LeaveRequestId"
ORDER BY t2."Id", t2."Id0", t2."Id1", t2."Id2"
